(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),y=function(t){var e=Object(o.F)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},g=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,g=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?g=t:(g=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===g&&!0===d.get("logging_enabled")&&b(!0)),g){var n=m.apply(null,t);g(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw f.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},O="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===O||e===I)return-1;if(e===O||t===I)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var j=function(t){var e,n,r,i,s;Object(o.d)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},R=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(R.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout(function(){throw S("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},L=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),q=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),B=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,U="websocket",H="long_polling",z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function K(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===U)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),W={},Q={};function Y(t){var e=t.toString();return W[e]||(W[e]=new G),W[e]}var $=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Z="start",X="close",J=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Y(e),this.urlFn=function(t){return K(e,H,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new $(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new tt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Z)n.id=o,n.password=a;else{if(i!==X)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&B.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Y(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&B.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),K(t,U,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[J,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),st=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=L(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),L(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):L(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),at=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function gt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function vt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function bt(t){return t.pieceNum_>=t.pieces_.length}function _t(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return _t(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wt(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Et(t,e){if(ft(t)!==ft(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ct(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ot(t))}function Ot(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var It,xt,kt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),At=1e3,Nt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=At,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),kt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=At),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new st(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){S(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(at),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Pt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(O,t),r=new Dt(O,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return It},set:function(t){It=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(I,It)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,It)},e.prototype.toString=function(){return".key"},e}(Pt),Rt=new jt,Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Lt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Mt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Lt,t}();function qt(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var Ut,Ht,zt,Kt,Gt,Wt=function(t){return"number"==typeof t?"number:"+j(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===xt||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ut},set:function(t){Ut=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return bt(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Wt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?j(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),$t=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(I,new Yt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new Dt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Pt)),Zt=Math.log(2),Xt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Zt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Jt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Mt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Mt.BLACK):(a(h,Mt.BLACK),a(h,Mt.RED))}return o}(new Xt(t.length));return new Vt(r||e,o)},te={},ee=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(te&&$t,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":te},{".priority":$t})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Rt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Jt(i,e.getCompare()):te;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===te){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Jt(a,s.getCompare())}return te}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===te)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ne=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(Bt),null,ee.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Gt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(o.d)(".priority"!==dt(t)||1===ft(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild($t,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Wt(this.getPriority().val())+":"),this.forEachChild($t,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===re?-1:0},t.prototype.withIndex=function(e){if(e===Rt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Rt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator($t),r=e.getIterator($t),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Rt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),re=new(function(t){function e(){return t.call(this,new Vt(Bt),ne.EMPTY_NODE,ee.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ne.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ne));function ie(t,e){if(void 0===e&&(e=null),null===t)return ne.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,ie(e));if(t instanceof Array){var n=ne.EMPTY_NODE;return P(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=ie(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ie(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=ie(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ne.EMPTY_NODE;var s=Jt(r,qt,function(t){return t.name},Bt);if(i){var a=Jt(r,$t.getCompare());return new ne(s,ie(e),new ee({".priority":a},{".priority":$t}))}return new ne(s,ie(e),ee.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(O,ne.EMPTY_NODE)},MAX:{value:new Dt(I,re)}}),jt.__EMPTY_NODE=ne.EMPTY_NODE,Yt.__childrenNodeConstructor=ne,xt=re,zt=re,Ht=ie;var oe,se,ae=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!bt(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ie(t),r=ne.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ne.EMPTY_NODE.updateChild(this.indexPath_,re);return new Dt(I,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(Pt),ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=ie(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Pt)),ce="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",le=(oe=0,se=[],function(t){var e,n=t===oe;oe=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ce.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===se[e];e--)se[e]=0;se[e]++}else for(e=0;e<12;e++)se[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ce.charAt(se[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),he=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=ce.charAt(ce.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},de=function(t){if("-2147483648"===t)return O;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ce.charAt(ce.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function fe(t){return{type:"value",snapshotNode:t}}function pe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ge=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(pe(e,n)):s.trackChildChange(me(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild($t,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild($t,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(pe(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ne.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(e){this.indexedFilter_=new ge(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ne.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ne.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ne.EMPTY_NODE);var i=this;return e.forEachChild($t,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),be=function(){function t(t){this.rangedFilter_=new ve(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ne.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ne.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ne.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ne.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ne.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var y=u.updateImmediateChild(e,ne.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pe(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(pe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ne.EMPTY_NODE)):t},t}(),_e=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$t}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===$t},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function we(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ce(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===$t?e="$priority":t.index_===ue?e="$value":t.index_===Rt?e="$key":(Object(o.d)(t.index_ instanceof ae,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Te(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==$t&&(e.i=t.index_.toString()),e}var Oe=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){S("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(at),Ie=function(){function t(){this.rootNode_=ne.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function xe(){return{value:null,children:new Map}}function ke(t,e,n){if(bt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,xe()),ke(t.children.get(r),e=pt(e),n)}}function Ae(t,e){if(bt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild($t,function(e,n){ke(t,new lt(e),n)}),Ae(t,e)}if(t.children.size>0){var r=dt(e);return e=pt(e),t.children.has(r)&&Ae(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ne(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ne(r,new lt(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Pe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();L(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),L(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),je=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Re(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Fe,Me=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=je.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(bt(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.d)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),Le=function(){function t(t,e){this.source=t,this.path=e,this.type=je.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=je.OVERWRITE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=je.MERGE}return t.prototype.operationForChild=function(e){if(bt(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Ve(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.d)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(bt(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ue=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function ze(t,e){return{eventCache:t,serverCache:e}}function Ke(t,e,n,r){return ze(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return ze(t.eventCache,new Be(e,n,r))}function We(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Fe||(Fe=new Vt(k)),e=Fe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new lt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(bt(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:vt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(bt(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(bt(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(bt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(bt(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(bt(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(vt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(bt(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),vt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(bt(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),vt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(vt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),$e=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Ze(t,e,n){if(bt(e))return new $e(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=_t(i,e);return o=o.updateChild(s,n),new $e(t.writeTree_.set(i,o))}var a=new Ye(n),u=t.writeTree_.setTree(e,a);return new $e(u)}function Xe(t,e,n){var r=t;return P(n,function(t,n){r=Ze(r,vt(e,t),n)}),r}function Je(t,e){if(bt(e))return $e.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new $e(n)}function tn(t,e){return null!=en(t,e)}function en(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(_t(n.path,e)):null}function nn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild($t,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function rn(t,e){if(bt(e))return t;var n=en(t,e);return new $e(null!=n?new Ye(n):t.writeTree_.subtree(e))}function on(t){return t.writeTree_.isEmpty()}function sn(t,e){return an(ht(),t.writeTree_,e)}function an(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=an(vt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(vt(t,".priority"),r)),n}function un(t,e){return bn(e,t)}function cn(t,e){if(t.snap)return Ct(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ct(vt(t.path,n),e))return!0;return!1}function ln(t){return t.visible}function hn(t,e,n){for(var r=$e.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ct(n,a)?r=Ze(r,u=_t(n,a),s.snap):Ct(a,n)&&(u=_t(a,n),r=Ze(r,ht(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Ct(n,a))r=Xe(r,u=_t(n,a),s.children);else if(Ct(a,n))if(bt(u=_t(a,n)))r=Xe(r,ht(),s.children);else{var c=Object(o.D)(s.children,dt(u));if(c){var l=c.getChild(pt(u));r=Ze(r,ht(),l)}}}}}return r}function dn(t,e,n,r,i){if(r||i){var o=rn(t.visibleWrites,e);return!i&&on(o)?n:i||null!=n||tn(o,ht())?sn(hn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ct(t.path,e)||Ct(e,t.path))},e),n||ne.EMPTY_NODE):null}var s=en(t.visibleWrites,e);if(null!=s)return s;var a=rn(t.visibleWrites,e);return on(a)?n:null!=n||tn(a,ht())?sn(a,n||ne.EMPTY_NODE):null}function fn(t,e,n,r){return dn(t.writeTree,t.treePath,e,n,r)}function pn(t,e){return function(t,e,n){var r=ne.EMPTY_NODE,i=en(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($t,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=rn(t.visibleWrites,e);return n.forEachChild($t,function(t,e){var n=sn(rn(o,new lt(t)),e);r=r.updateImmediateChild(t,n)}),nn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return nn(rn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=vt(e,n);if(tn(t.visibleWrites,s))return null;var a=rn(t.visibleWrites,s);return on(a)?i.getChild(n):sn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e){return en(t.visibleWrites,e)}(t.writeTree,vt(t.treePath,e))}function gn(t,e,n){return function(t,e,n,r){var i=vt(e,n),o=en(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?sn(rn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function vn(t,e){return bn(vt(t.treePath,e),t.writeTree)}function bn(t,e){return{treePath:t,writeTree:e}}var _n=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,pe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),wn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),En=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=rn(t.visibleWrites,e),c=en(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=sn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Cn(t,e,n,r,i,s){var a=e.eventCache;if(null!=mn(r,n))return e;var u=void 0,c=void 0;if(bt(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=pn(r,l instanceof ne?l:ne.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=fn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=dt(n);if(".priority"===f){Object(o.d)(1===ft(n),"Can't have a priority with additional path components");var p=a.getNode(),y=yn(r,n,p,c=e.serverCache.getNode());u=null!=y?t.filter.updatePriority(p,y):a.getNode()}else{var m=pt(n),g=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=yn(r,n,a.getNode(),c);g=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else g=gn(r,f,e.serverCache);u=null!=g?t.filter.updateChild(a.getNode(),f,g,m,i,s):a.getNode()}}return Ke(e,u,a.isFullyInitialized()||bt(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(bt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=dt(n);if(!c.isCompleteForPath(n)&&ft(n)>1)return e;var f=pt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,wn,null)}var y=Ge(e,u,c.isFullyInitialized()||bt(n),l.filtersNodes());return Cn(t,y,n,i,new En(i,y,o),a)}function Tn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new En(i,e,o);if(bt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ke(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ke(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=pt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(bt(d))p=r;else{var y=l.getCompleteChild(h);p=null!=y?".priority"===yt(d)&&y.getChild(gt(d)).isEmpty()?y:y.updateChild(d,r):ne.EMPTY_NODE}a=f.equals(p)?e:Ke(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function On(t,e){return t.eventCache.isCompleteForChild(e)}function In(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function xn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=bt(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=In(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new lt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=In(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new lt(n),h,i,o,s,a)}}),c}var kn,An=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ge(r.getIndex()),o=(n=r).loadsAllData()?new ge(n.getIndex()):n.hasLimit()?new be(n):new ve(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ne.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ne.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ze(h,l),this.eventGenerator_=new Ue(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!bt(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Pn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function jn(t,e,n,r){e.type===je.MERGE&&null!==e.source.queryId&&(Object(o.d)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(We(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new _n;if(n.type===je.OVERWRITE){var c=n;c.source.fromUser?s=Tn(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!bt(c.path),s=Sn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===je.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=vt(n,r);On(e,dt(c))&&(a=Tn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=vt(n,r);On(e,dt(c))||(a=Tn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===je.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=mn(r,n))return e;var u=new En(r,e,i),c=e.eventCache.getNode(),l=void 0;if(bt(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=fn(r,Qe(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof ne,"serverChildren would be complete if leaf node"),h=pn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=dt(n),p=gn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,pt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ne.EMPTY_NODE,pt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=fn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=mn(r,ht()),Ke(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=mn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(bt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(bt(n)){var c=new Ye(null);return u.getNode().forEachChild(Rt,function(t,e){c=c.set(new lt(t),e)}),xn(t,e,n,c,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=vt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),xn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==je.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Cn(t,Ge(e,o.getNode(),o.isFullyInitialized()||bt(n),o.isFiltered()),n,r,wn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=We(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(fe(We(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Rn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Rn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Fn,Mn=function(){return function(){this.views=new Map}}();function Ln(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),jn(c,e,n,r)}var l=[];try{for(var h=Object(s.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(jn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=fn(n,i?r:null),a=!1;s?a=!0:r instanceof ne?(s=pn(n,r),a=!1):(s=ne.EMPTY_NODE,a=!1);var u=ze(new Be(s,a,!1),new Be(r,i,!1));return new An(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Nn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Un(t,e){return e._queryParams.loadsAllData()?Kn(t):t.views.get(e._queryIdentifier)}function Hn(t,e){return null!=Un(t,e)}function zn(t){return null!=Kn(t)}function Kn(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,Wn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:$e.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ze(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?tr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&cn(u,r.path)?i=!1:Ct(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=hn(t.allWrites,ln,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Je(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=Je(t.visibleWrites,vt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ye(null);return null!=r.snap?i=i.set(ht(),!0):P(r.children,function(t){i=i.set(new lt(t),!0)}),tr(t,new Me(r.path,i,n))}return[]}function $n(t,e,n){return tr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Zn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Hn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=zn(t);if("default"===u)try{for(var d=Object(s.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,y=Object(s.e)(f.value,2),m=y[0];l=l.concat(Pn(p=y[1],n,r)),Dn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Pn(p,n,r)),Dn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!zn(t)&&c.push(new(Object(o.d)(kn,"Reference.ts has not been loaded"),kn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return zn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&zn(e))return[Kn(e)];var r=[];return e&&(r=qn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),y=0;y<p.length;++y){var m=p[y],g=m.query,v=rr(t,m);t.listenProvider_.startListening(cr(g),ir(t,g),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(cr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(or(e));t.listenProvider_.stopListening(cr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=or(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Xn(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=_t(t,r);i=i||Bn(e,n),s=s||zn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||zn(u),i=i||Bn(u,ht())):(u=new Mn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ne.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,ht());n&&(i=i.updateImmediateChild(t,n))}));var c=Hn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=or(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild($t,function(t,e){r.push(pe(t,e))}),n.isFullyInitialized()&&r.push(fe(n.getNode())),Rn(t,r,n.getNode(),e)}(s,n)}(u,e,n,un(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Un(u,e);d=d.concat(function(t,e,n){var r=e._path,i=ir(t,e),s=rr(t,n),a=t.listenProvider_.startListening(cr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!bt(t)&&e&&zn(e))return[Kn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(cr(h),ir(t,h))}return a}(t,e,f))}return d}function Jn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,_t(t,e));if(r)return r});return dn(r,e,i,n,!0)}function tr(t,e){return er(e,t.syncPointTree_,null,un(t.pendingWriteTree_,ht()))}function er(t,e,n,r){if(bt(t.path))return nr(t,e,n,r);var i=e.get(ht());null==n&&null!=i&&(n=Bn(i,ht()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=vn(r,s);o=o.concat(er(a,u,c,l))}return i&&(o=o.concat(Ln(i,t,r,n))),o}function nr(t,e,n,r){var i=e.get(ht());null==n&&null!=i&&(n=Bn(i,ht()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=vn(r,e),u=t.operationForChild(e);u&&(o=o.concat(nr(u,i,s,a)))}),i&&(o=o.concat(Ln(i,t,r,n))),o}function rr(t,e){var n=e.query,r=ir(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ne.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=sr(t,n);if(r){var i=ar(r),o=i.path,s=i.queryId,a=_t(o,e);return ur(t,o,new Le(Re(s),a))}return[]}(t,n._path,r):function(t,e){return tr(t,new Le({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Zn(t,n,null,i)}}}function ir(t,e){var n=or(e);return t.queryToTagMap.get(n)}function or(t){return t._path.toString()+"$"+t._queryIdentifier}function sr(t,e){return t.tagToQueryMap.get(e)}function ar(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function ur(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),Ln(r,n,un(t.pendingWriteTree_,e),null)}function cr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.d)(Fn,"Reference.ts has not been loaded"),Fn)(t._repo,t._path):t}var lr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),hr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=vt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Jn(this.syncTree_,this.path_)},t}(),dr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?fr(t[".sv"],e,n):"object"==typeof t[".sv"]?pr(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},fr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},pr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return gr(e,new hr(n,t),r)},mr=function(t,e,n){return gr(t,new lr(e),n)};function gr(t,e,n){var r,i=t.getPriority().val(),o=dr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,ie(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild($t,function(t,i){var o=gr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var vr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function br(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=dt(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new vr(i,r,s),i=dt(n=pt(n))}return r}function _r(t){return t.node.value}function wr(t,e){t.node.value=e,Or(t)}function Er(t){return t.node.childCount>0}function Cr(t,e){P(t.node.children,function(n,r){e(new vr(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Cr(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function Tr(t){return new lt(null===t.parent?t.name:Tr(t.parent)+"/"+t.name)}function Or(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===_r(t)&&!Er(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Or(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Or(t))}(t.parent,t.name,t)}var Ir=/[\[\].#$\/\u0000-\u001F\u007F]/,xr=/[\[\].#$\u0000-\u001F\u007F]/,kr=10485760,Ar=function(t){return"string"==typeof t&&0!==t.length&&!Ir.test(t)},Nr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Pr=function(t,e,n,r){r&&void 0===e||jr(Object(o.l)(t,"value"),e,n)},jr=function(t,e,n){var r=n instanceof lt?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Ot(r));if("function"==typeof e)throw new Error(t+"contains a function "+Ot(r)+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+Ot(r));if("string"==typeof e&&e.length>kr/3&&Object(o.E)(e)>kr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Ot(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Ar(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ot(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.E)(e),Tt(t)}(r,e),jr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(o.E)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+Ot(r)+" in addition to actual children.")}},Rr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.l)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];P(e,function(t,e){var r=new lt(t);if(jr(i,e,vt(n,r)),".priority"===yt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ar(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(wt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ct(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Fr=function(t,e,n){if(!n||void 0!==e){if(T(e))throw new Error(Object(o.l)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error(Object(o.l)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Lr=function(t,e,n,r){if(!(r&&void 0===n||Ar(n)))throw new Error(Object(o.l)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error(Object(o.l)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ar(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nr(t)}(n))throw new Error(Object(o.l)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ur=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e)+"must be a boolean.")},Hr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Et(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Kr(t,e,n){zr(t,n),Wr(t,function(t){return Et(t,e)})}function Gr(t,e,n){zr(t,n),Wr(t,function(t){return Ct(t,e)||Ct(e,t)})}function Wr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();g&&_("event: "+n.toString()),M(r)}}}var Yr="repo_interrupt",$r=function(){function t(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new vr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Zr(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Xr(t){return(e=(e={timestamp:Zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Jr(t,e,n,r,i){t.dataUpdateCount++;var s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,function(t){return ie(t)});a=function(t,e,n,r){var i=sr(t,r);if(i){var o=ar(i),s=o.path,a=o.queryId,u=_t(s,e),c=Ye.fromObject(n);return ur(t,s,new qe(Re(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ie(n);a=function(t,e,n,r){var i=sr(t,r);if(null!=i){var o=ar(i),s=o.path,a=o.queryId,u=_t(s,e);return ur(t,s,new Ve(Re(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,function(t){return ie(t)});a=function(t,e,n){var r=Ye.fromObject(n);return tr(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ie(n);a=$n(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=di(t,s)),Gr(t.eventQueue_,d,a)}function ti(t,e){ei(t,"connected",e),!1===e&&function(t){ui(t,"onDisconnectEvents");var e=Xr(t),n=xe();Ne(t.onDisconnect_,ht(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);ke(n,r,o)});var r=[];Ne(n,ht(),function(e,n){r=r.concat($n(t.serverSyncTree_,e,n));var i=gi(t,e);di(t,i)}),t.onDisconnect_=xe(),Gr(t.eventQueue_,ht(),r)}(t)}function ei(t,e,n){var r=new lt("/.info/"+e),i=ie(n);t.infoData_.updateSnapshot(r,i);var o=$n(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ni(t){return t.nextWriteId_++}function ri(t,e,n,r,i){ui(t,"set",{path:e.toString(),value:n,priority:r});var o=Xr(t),s=ie(n,r),a=Jn(t.serverSyncTree_,e),u=mr(s,a,o),c=ni(t),l=Qn(t.serverSyncTree_,e,u,c,!0);zr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||S("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),ci(0,i,n,r)});var h=gi(t,e);di(t,h),Gr(t.eventQueue_,h,[])}function ii(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ae(t.onDisconnect_,e),ci(0,n,r,i)})}function oi(t,e,n,r){var i=ie(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&ke(t.onDisconnect_,e,i),ci(0,r,n,o)})}function si(t,e,n){var r;r=".info"===dt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}function ai(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function ci(t,e,n,r){e&&M(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function li(t,e,n){return Jn(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function hi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||mi(t,e),_r(e)){var n=pi(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=li(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=_t(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ui(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(mi(t,br(t.transactionQueueTree_,e)),hi(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)M(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(S("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;di(t,e)}},a)}(t,Tr(e),n)}else Er(e)&&Cr(e,function(e){hi(t,e)})}function di(t,e){var n=fi(t,e),r=Tr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=_t(n,c.path),h=!1;if(Object(o.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=li(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){jr("transaction failed: Data returned ",f,c.path);var p=ie(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var y=c.currentWriteId,m=Xr(t),g=mr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=g,c.currentWriteId=ni(t),s.splice(s.indexOf(y),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,y,!0))}else h=!0,u="nodata",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(mi(t,t.transactionQueueTree_),u=0;u<r.length;u++)M(r[u]);hi(t,t.transactionQueueTree_)}}(t,pi(t,n),r),r}function fi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===_r(r);)r=br(r,n),n=dt(e=pt(e));return r}function pi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=_r(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Cr(e,function(e){yi(t,e,n)})}function mi(t,e){var n=_r(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,wr(e,n.length>0?n:void 0)}Cr(e,function(e){mi(t,e)})}function gi(t,e){var n=Tr(fi(t,e)),r=br(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){vi(t,e)}),vi(t,r),Sr(r,function(e){vi(t,e)}),n}function vi(t,e){var n=_r(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?wr(e,void 0):n.length=s+1,Gr(t.eventQueue_,Tr(e),i),a=0;a<r.length;a++)M(r[a])}}var bi=function(t,e){var n=_i(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},_i=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},wi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Ei=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.a;return ii(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new o.a;return oi(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Pr("OnDisconnect.set",t,this._path,!1);var e=new o.a;return oi(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Pr("OnDisconnect.setWithPriority",t,this._path,!1),Fr("OnDisconnect.setWithPriority",e,!1);var n=new o.a;return function(t,e,n,r,i){var o=ie(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&ke(t.onDisconnect_,e,o),ci(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Rr("OnDisconnect.update",t,this._path,!1);var e=new o.a;return function(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void ci(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=ie(r);ke(t.onDisconnect_,vt(e,n),i)}),ci(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ti=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return bt(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ki(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Te(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Te(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.m)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Et(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Oi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ii(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Rt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==O)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===$t){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ae||t.getIndex()===ue,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ki=function(t){function e(e,n){return t.call(this,e,n,new _e,!1)||this}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=gt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ti),Ai=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new lt(e),r=Pi(this.ref,e);return new t(this._node.getChild(n),r,$t)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Pi(n.ref,r),$t))})},t.prototype.hasChild=function(t){var e=new lt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ni(t,e){return(t=Object(o.m)(t))._checkNotDeleted("ref"),void 0!==e?Pi(t._root,e):t._root}function Di(t,e){(t=Object(o.m)(t))._checkNotDeleted("refFromURL");var n=bi(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ni(t,n.path.toString())}function Pi(t,e){var n;return null===dt((t=Object(o.m)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new ki(t._repo,vt(t._path,e))}function ji(t,e){t=Object(o.m)(t),qr("push",t._path),Pr("push",e,t._path,!0);var n,r=Zr(t._repo),i=le(r),s=Pi(t,i),a=Pi(t,i);return n=null!=e?Fi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Ri(t){return qr("remove",t._path),Fi(t,null)}function Fi(t,e){t=Object(o.m)(t),qr("set",t._path),Pr("set",e,t._path,!1);var n=new o.a;return ri(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Mi(t,e){t=Object(o.m)(t),qr("setPriority",t._path),Fr("setPriority",e,!1);var n=new o.a;return ri(t._repo,vt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Li(t,e,n){if(qr("setWithPriority",t._path),Pr("setWithPriority",e,t._path,!1),Fr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.a;return ri(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Rr("update",e,t._path,!1);var n=new o.a;return function(t,e,n,r){ui(t,"update",{path:e.toString(),value:n});var i=!0,s=Xr(t),a={};if(P(n,function(n,r){i=!1,a[n]=yr(vt(e,n),ie(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),ci(0,r,"ok",void 0);else{var u=ni(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Xe(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ye.fromObject(n);return tr(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||S("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?di(t,e):e;Gr(t.eventQueue_,a,s),ci(0,r,n,i)}),P(n,function(n){var r=gi(t,vt(e,n));di(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new wi("value",this,new Ai(t.snapshotNode,new ki(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t){this.callbacks=t}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks,e)},t.prototype.createCancelEvent=function(t,e){return this.callbacks.cancel.hasCancelCallback?new Ei(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=Pi(new ki(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new wi(t.type,this,new Ai(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){if("cancel"===t.getEventType()){var e=this.callbacks.cancel;return function(){return e.onCancel(t.error)}}var n=this.callbacks[t.eventType];return function(){return n.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks||!e.callbacks)return!0;var r=Object.keys(e.callbacks),i=Object.keys(this.callbacks),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return a===s&&(!e.callbacks[s]||!this.callbacks[a]||e.callbacks[s].matches(this.callbacks[a]))}return i.every(function(t){return e.callbacks[t].matches(n.callbacks[t])})}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks},t}();function Ui(t,e,n,r,i){var o,s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){var a=n,u=function(e,n){a(e,n),si(t._repo,t,l)};u.userCallback=n.userCallback,u.context=n.context,n=u}var c=new Ci(n,s||void 0),l="value"===e?new qi(c):new Bi(((o={})[e]=c,o));return function(t,e,n){var r;r=".info"===dt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}(t._repo,t,l),function(){return si(t._repo,t,l)}}function Hi(t,e,n,r){return Ui(t,"value",e,n,r)}function zi(t,e,n,r){return Ui(t,"child_added",e,n,r)}function Ki(t,e,n,r){return Ui(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return Ui(t,"child_moved",e,n,r)}function Wi(t,e,n,r){return Ui(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=null,o=n?new Ci(n):null;"value"===e?r=new qi(o):e&&(n&&((i={})[e]=o),r=new Bi(i)),si(t._repo,t,r)}var Yi=function(){return function(){}}(),$i=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Pr("endAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(xi(e),Ii(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Zi(t,e){return Lr("endAt","key",e,!0),new $i(t,e)}var Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Pr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Rt?("string"==typeof n&&(n=de(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?O:de(r)),i.endBeforeSet_=!0,i);if(xi(o),Ii(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function Ji(t,e){return Lr("endBefore","key",e,!0),new Xi(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Pr("startAt",this._value,t._path,!0);var e=we(t._queryParams,this._value,this._key);if(xi(e),Ii(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function eo(t,e){return void 0===t&&(t=null),Lr("startAt","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Pr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Rt?("string"==typeof n&&(n=he(n)),i=we(e,n,r)):i=we(e,n,null==r?I:he(r)),i.startAfterSet_=!0,i);if(xi(o),Ii(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function ro(t,e){return Lr("startAfter","key",e,!0),new no(t,e)}var io=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function oo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new io(t)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){Oi(t,"orderByChild");var e=new lt(this._path);if(bt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ae(e),r=Ce(t._queryParams,n);return Ii(r),new Ti(t._repo,t._path,r,!0)},e}(Yi);function co(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new uo(t)}var lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){Oi(t,"orderByKey");var e=Ce(t._queryParams,Rt);return Ii(e),new Ti(t._repo,t._path,e,!0)},e}(Yi);function ho(){return new lo}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){Oi(t,"orderByPriority");var e=Ce(t._queryParams,$t);return Ii(e),new Ti(t._repo,t._path,e,!0)},e}(Yi);function po(){return new fo}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){Oi(t,"orderByValue");var e=Ce(t._queryParams,ue);return Ii(e),new Ti(t._repo,t._path,e,!0)},e}(Yi);function mo(){return new yo}var go=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){if(Pr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $i(this._value,this._key)._apply(new to(this._value,this._key)._apply(t))},e}(Yi);function vo(t,e){return Lr("equalTo","key",e,!0),new go(t,e)}function bo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=Object(o.m)(t);try{for(var u=Object(s.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(o.d)(!kn,"__referenceConstructor has already been defined"),kn=t}(ki),function(t){Object(o.d)(!Fn,"__referenceConstructor has already been defined"),Fn=t}(ki);var _o={},wo=!1;function Eo(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=bi(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=bi(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new q:new V(t.name,t.options,e);Br("Invalid Firebase Database URL",s),bt(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n){var r=_o[e.name];r||(_o[e.name]=r={});var i=r[t.toURLString()];return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new $r(t,wo,n),r[t.toURLString()]=i,i}(a,t,c);return new Co(l,t)}var Co=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Y(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Oe(t.repoInfo_,function(e,n,r,i){Jr(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return ti(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,function(e,n,r,i){Jr(t,e,n,r,i)},function(e){ti(t,e)},function(e){!function(t,e){P(e,function(e,n){ei(t,e,n)})}(t,e)},t.authTokenProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(r=function(){return new Pe(t.stats_,t.server_)},i=t.repoInfo_.toString(),Q[i]||(Q[i]=r()),Q[i]),t.infoData_=new Ie,t.infoSyncTree_=new Wn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=$n(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ei(t,"connected",!1),t.serverSyncTree_=new Wn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ki(this._repo,ht())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=_o[e=this.app.name])&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),ai(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=Object(o.m)(t))._checkNotDeleted("goOffline"),ai(t._repo)}function To(t){var e;(t=Object(o.m)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}function Oo(t,e){b(t,e)}var Io={".sv":"timestamp"},xo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function ko(t,e,n){var r;if(t=Object(o.m)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.a,a=Hi(t,function(){});return function(e,n,r,i,a,u){ui(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ai(r,new ki(t._repo,t._path),$t),s.resolve(new xo(n,i)))},status:null,order:p(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=li(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{jr("transaction failed: Data returned ",h,c.path),c.status=0;var d=br(e.transactionQueueTree_,n),f=_r(d)||[];f.push(c),wr(d,f);var y=void 0;"object"==typeof h&&null!==h&&Object(o.h)(h,".priority")?(y=Object(o.D)(h,".priority"),Object(o.d)(Dr(y),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):y=(Jn(e.serverSyncTree_,n)||ne.EMPTY_NODE).getPriority().val();var m=Xr(e),g=ie(h,y),v=mr(g,l,m);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=v,c.currentWriteId=ni(e);var b=Qn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,b),hi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Ao=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),Object(o.I)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),Object(o.I)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.I)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.I)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),No=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Do=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),new jo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Po=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;Object(o.H)("Query.on",2,4,arguments.length),Object(o.I)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Do(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Hi(this._delegate,c,l),n;case"child_added":return zi(this._delegate,c,l),n;case"child_removed":return Wi(this._delegate,c,l),n;case"child_changed":return Ki(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(o.l)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.H)("Query.off",0,3,arguments.length),Mr("Query.off",t,!0),Object(o.I)("Query.off","callback",e,!0),Object(o.J)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=_t(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,ht()):(i=new Mn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return We(Vn(i,e,un(t.pendingWriteTree_,e._path),o?s.getNode():ne.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=ie(n),i=$n(t.serverSyncTree_,e._path,r);return Kr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ui(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(o.m)(t))._repo,t).then(function(e){return new Ai(e,new ki(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Do(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Object(o.I)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.a,c=function(t,e){var r=new Do(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o.l)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.H)("Query.limitToFirst",1,1,arguments.length),new t(this.database,bo(this._delegate,oo(e)))},t.prototype.limitToLast=function(e){return Object(o.H)("Query.limitToLast",1,1,arguments.length),new t(this.database,bo(this._delegate,ao(e)))},t.prototype.orderByChild=function(e){return Object(o.H)("Query.orderByChild",1,1,arguments.length),new t(this.database,bo(this._delegate,co(e)))},t.prototype.orderByKey=function(){return Object(o.H)("Query.orderByKey",0,0,arguments.length),new t(this.database,bo(this._delegate,ho()))},t.prototype.orderByPriority=function(){return Object(o.H)("Query.orderByPriority",0,0,arguments.length),new t(this.database,bo(this._delegate,po()))},t.prototype.orderByValue=function(){return Object(o.H)("Query.orderByValue",0,0,arguments.length),new t(this.database,bo(this._delegate,mo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),new t(this.database,bo(this._delegate,eo(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),new t(this.database,bo(this._delegate,ro(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),new t(this.database,bo(this._delegate,Zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),new t(this.database,bo(this._delegate,Ji(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.H)("Query.equalTo",1,2,arguments.length),new t(this.database,bo(this._delegate,vo(e,n)))},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.I)(t,"cancel",r.cancel,!0),r.context=n,Object(o.J)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new jo(this.database,new ki(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),jo=function(t){function e(e,n){var r=t.call(this,e,new Ti(n._repo,n._path,new _e,!1))||this;return r.database=e,r._delegate=n,r}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Pi(this._delegate,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.H)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),Object(o.I)("Reference.set","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(o.I)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){Object(o.H)("Reference.setWithPriority",2,3,arguments.length),Object(o.I)("Reference.setWithPriority","onComplete",n,!0);var r=Li(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(o.H)("Reference.remove",0,1,arguments.length),Object(o.I)("Reference.remove","onComplete",t,!0);var e=Ri(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.H)("Reference.transaction",1,3,arguments.length),Object(o.I)("Reference.transaction","transactionUpdate",t,!1),Object(o.I)("Reference.transaction","onComplete",e,!0),Ur("Reference.transaction","applyLocally",n,!0);var i=ko(this._delegate,t,{applyLocally:n}).then(function(t){return new No(t.committed,new Do(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),Object(o.I)("Reference.setPriority","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(o.H)("Reference.push",0,2,arguments.length),Object(o.I)("Reference.push","onComplete",n,!0);var i=ji(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Ao(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Po),Ro=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e){!function(t,e,n){(t=Object(o.m)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized."),function(t,e,n){t.repoInfo_=new z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new q)}(t._repo,e,n)}(this._delegate,t,e)},t.prototype.ref=function(t){if(Object(o.H)("database.ref",0,1,arguments.length),t instanceof jo){var e=Di(this._delegate,t.toString());return new jo(this,e)}return e=Ni(this._delegate,t),new jo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.H)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new jo(this,n)},t.prototype.goOffline=function(){return Object(o.H)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return Object(o.H)("database.goOnline",0,0,arguments.length),To(this._delegate)},t.ServerValue={TIMESTAMP:Io,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Fo=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),J.forceAllow()},forceWebSockets:function(){J.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:new Ro(Eo(e,u,n,a),e),namespace:o}}}),Mo=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Lo=Object.freeze({__proto__:null,DataConnection:Mo,RealTimeConnection:st,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:z,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){wo=t}(t)}}),Vo=Ro.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Ro(Eo(r,i,n),r)},"PUBLIC").setServiceProps({Reference:jo,Query:Po,Database:Ro,DataSnapshot:Do,enableLogging:Oo,INTERNAL:Fo,ServerValue:Vo,TEST_ACCESS:Lo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.11"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var c=n("SpAZ");function l(t=Number.POSITIVE_INFINITY){return s(c.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Xa}),n.d(e,"b",function(){return $a}),n.d(e,"c",function(){return Za}),n.d(e,"d",function(){return Ku}),n.d(e,"e",function(){return qu}),n.d(e,"f",function(){return oa}),n.d(e,"g",function(){return ks}),n.d(e,"h",function(){return su}),n.d(e,"i",function(){return Ps}),n.d(e,"j",function(){return dr}),n.d(e,"k",function(){return Pa}),n.d(e,"l",function(){return Xi}),n.d(e,"m",function(){return Je}),n.d(e,"n",function(){return yo}),n.d(e,"o",function(){return Xs}),n.d(e,"p",function(){return ta}),n.d(e,"q",function(){return ou}),n.d(e,"r",function(){return ya}),n.d(e,"s",function(){return Ru}),n.d(e,"t",function(){return gu}),n.d(e,"u",function(){return wn}),n.d(e,"v",function(){return nu}),n.d(e,"w",function(){return eu}),n.d(e,"x",function(){return Ra}),n.d(e,"y",function(){return Fs}),n.d(e,"z",function(){return Rs}),n.d(e,"A",function(){return mr}),n.d(e,"B",function(){return Ls}),n.d(e,"C",function(){return ur}),n.d(e,"D",function(){return ha}),n.d(e,"E",function(){return Su}),n.d(e,"F",function(){return qs}),n.d(e,"G",function(){return Vs}),n.d(e,"H",function(){return ga}),n.d(e,"I",function(){return R}),n.d(e,"J",function(){return Fu}),n.d(e,"K",function(){return Pu}),n.d(e,"L",function(){return f}),n.d(e,"M",function(){return gn}),n.d(e,"N",function(){return Du}),n.d(e,"O",function(){return Hu}),n.d(e,"P",function(){return Iu}),n.d(e,"Q",function(){return iu}),n.d(e,"R",function(){return to}),n.d(e,"S",function(){return ys}),n.d(e,"T",function(){return sr}),n.d(e,"U",function(){return Hn}),n.d(e,"V",function(){return Dn}),n.d(e,"W",function(){return jn}),n.d(e,"X",function(){return Ln}),n.d(e,"Y",function(){return Fn}),n.d(e,"Z",function(){return Rn}),n.d(e,"ab",function(){return Mn}),n.d(e,"bb",function(){return hs}),n.d(e,"cb",function(){return Uu}),n.d(e,"db",function(){return ds}),n.d(e,"eb",function(){return fs}),n.d(e,"fb",function(){return Pn}),n.d(e,"gb",function(){return q}),n.d(e,"hb",function(){return So}),n.d(e,"ib",function(){return Bo}),n.d(e,"jb",function(){return Vo}),n.d(e,"kb",function(){return qo}),n.d(e,"lb",function(){return ls}),n.d(e,"mb",function(){return Tt}),n.d(e,"nb",function(){return l}),n.d(e,"ob",function(){return Nn}),n.d(e,"pb",function(){return go}),n.d(e,"qb",function(){return bt}),n.d(e,"rb",function(){return Os}),n.d(e,"sb",function(){return ri}),n.d(e,"tb",function(){return Io}),n.d(e,"ub",function(){return Xo}),n.d(e,"vb",function(){return X}),n.d(e,"wb",function(){return ot}),n.d(e,"xb",function(){return _}),n.d(e,"yb",function(){return w}),n.d(e,"zb",function(){return nt}),n.d(e,"Ab",function(){return st}),n.d(e,"Bb",function(){return Ao}),n.d(e,"Cb",function(){return Ro}),n.d(e,"Db",function(){return Mo}),n.d(e,"Eb",function(){return Fo}),n.d(e,"Fb",function(){return jo}),n.d(e,"Gb",function(){return Po}),n.d(e,"Hb",function(){return Lo}),n.d(e,"Ib",function(){return Qe}),n.d(e,"Jb",function(){return ss}),n.d(e,"Kb",function(){return mn}),n.d(e,"Lb",function(){return $e}),n.d(e,"Mb",function(){return Ya}),n.d(e,"Nb",function(){return Uo}),n.d(e,"Ob",function(){return Wa}),n.d(e,"Pb",function(){return Ko}),n.d(e,"Qb",function(){return Qo}),n.d(e,"Rb",function(){return Wo}),n.d(e,"Sb",function(){return No}),n.d(e,"Tb",function(){return Ka}),n.d(e,"Ub",function(){return ko}),n.d(e,"Vb",function(){return Ht}),n.d(e,"Wb",function(){return rt}),n.d(e,"Xb",function(){return Zo}),n.d(e,"Yb",function(){return xo}),n.d(e,"Zb",function(){return is}),n.d(e,"ac",function(){return os}),n.d(e,"bc",function(){return Ga});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function g(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():g(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return C(t,T)||C(t,I)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(O)||t.hasOwnProperty(x))?t[O]:null}const T=u({"\u0275prov":u}),O=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function N(t){const e=A;return A=t,e}function D(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function P(t){return{toString:t}.toString()}var j=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),R=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,L="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,q=F||V||M||L,B={},U=[],H=[],z=u({"\u0275cmp":u}),K=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),W=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),Y=u({"\u0275fac":u}),$=u({__NG_ELEMENT_ID__:u});let Z=0;function X(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===j.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||R.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function J(t){return at(t)||function(t){return t[K]||null}(t)}function tt(t){return function(t){return t[G]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{et[t.id]=t.type}),e}function rt(t,e){return P(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=X;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[z]||null}function ut(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function gt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Et),wt}function wt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Et(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===B),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}let St;function Tt(t){St=t}function Ot(t){return!!t.listen}bt.ngInherit=!0;const It={createRenderer:(t,e)=>void 0!==St?St:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return xt(e[t])}function At(t,e){return xt(e[t.index])}function Nt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return ht(n)?n:n[0]}function Pt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function jt(t){return 4==(4&t[2])}function Rt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Mt(t){t[18]=0}function Lt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Vt.bindingsEnabled}function Bt(){return Vt.lFrame.lView}function Ut(){return Vt.lFrame.tView}function Ht(t){Vt.lFrame.contextLView=t}function zt(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return Vt.lFrame.currentTNode}function Gt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Wt(){return Vt.lFrame.isParent}function Qt(){Vt.lFrame.isParent=!1}function Yt(){return Vt.isInCheckNoChangesMode}function $t(t){Vt.isInCheckNoChangesMode=t}function Zt(){return Vt.lFrame.bindingIndex++}function Xt(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){Vt.lFrame.currentDirectiveIndex=t}function te(){return Vt.lFrame.currentQueryIndex}function ee(t){Vt.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return Vt.lFrame.selectedIndex}function he(t){Vt.lFrame.selectedIndex=t}function de(){const t=Vt.lFrame;return Nt(t.tView,t.selectedIndex)}function fe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){ge(t,e,3,n)}function ye(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ve(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ve(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const be=-1;class _e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=Ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ce(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Ce(t){return 64===t.charCodeAt(0)}function Se(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Te(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Te(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Oe(t){return t!==be}function Ie(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ke=!0;function Ae(t){const e=ke;return ke=t,e}let Ne=0;function De(t,e){const n=je(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Oe(i)){const t=Ie(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function je(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return be;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return be}function Fe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty($)&&(r=n[$]),null==r&&(r=n[$]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Me(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Le(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&k.Optional):D(e,r,n&k.Optional)}finally{N(o)}}return Me(r,e,n)}function Ve(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty($)?t[$]:void 0;return"number"==typeof e?e>=0?255&e:Be:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&k.Host?Me(i,n,r):Le(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;b(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=je(t,e),a=be,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==be&&Ge(r,!1)?(i=e[1],s=Ie(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ke(o,s,t.data)){const t=Ue(s,e,n,i,r,u);if(t!==qe)return t}a=e[s+8],a!==be&&Ge(r,e[1].data[s+8]===u)&&Ke(o,s,e)?(i=t,s=Ie(a),e=xe(a,e)):s=-1}}}return Le(e,n,r,i)}const qe={};function Be(){return new We(zt(),Bt())}function Ue(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=He(a,s,n,null==r?pt(a)&&ke:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?ze(e,s,u,a):qe}function He(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof _e){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ae(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;re(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Ae(a),s.resolving=!1,ue()}}return i}function Ke(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ge(t,e){return!(t&k.Self||t&k.Host&&e)}class We{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function Qe(t){return P(()=>{const e=t.prototype.constructor,n=e[Y]||Ye(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||Ye(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ye(t){return y(t)?()=>{const e=Ye(p(t));return e&&e()}:gt(t)}function $e(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(zt(),t)}const Ze="__parameters__";function Xe(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ze)?t[Ze]:Object.defineProperty(t,Ze,{value:[]})[Ze];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function tn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),tn(r,e)):e!==t&&e.push(r)}return e}function en(t,e){t.forEach(t=>Array.isArray(t)?en(t,e):e(t))}function nn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function sn(t,e,n){let r=un(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function an(t,e){const n=un(t,e);if(n>=0)return t[1|n]}function un(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const cn={},ln=/\n/gm,hn="__source",dn=u({provide:String,useValue:u});let fn;function pn(t){const e=fn;return fn=t,e}function yn(t,e=k.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?D(t,void 0,e):fn.get(t,e&k.Optional?null:void 0,e)}function mn(t,e=k.Default){return(A||yn)(p(t),e)}const gn=mn;function vn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(mn(t,n))}else e.push(mn(r))}return e}function bn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=bn(Xe("Inject",t=>({token:t})),-1),wn=bn(Xe("Optional"),8),En=bn(Xe("SkipSelf"),4);let Cn;function Sn(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,q.trustedTypes))try{Cn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class On extends Tn{getTypeName(){return"HTML"}}class In extends Tn{getTypeName(){return"Style"}}class xn extends Tn{getTypeName(){return"Script"}}class kn extends Tn{getTypeName(){return"URL"}}class An extends Tn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Dn(t,e){const n=Pn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Pn(t){return t instanceof Tn&&t.getTypeName()||null}function jn(t){return new On(t)}function Rn(t){return new In(t)}function Fn(t){return new xn(t)}function Mn(t){return new kn(t)}function Ln(t){return new An(t)}class Vn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Sn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Sn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Sn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Bn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hn(t){return(t=String(t)).match(Bn)||t.match(Un)?t:"unsafe:"+t}function zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Gn=zn("area,br,col,hr,img,wbr"),Wn=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qn=zn("rp,rt"),Yn=Kn(Qn,Wn),$n=Kn(Gn,Kn(Wn,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn(Qn,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),Zn=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xn=zn("srcset"),Jn=Kn(Zn,Xn,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=zn("script,style,template");class er{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!$n.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Zn[o]&&(s=Hn(s)),Xn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Hn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ir(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();$n.hasOwnProperty(e)&&!Gn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ir(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(rr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function sr(t,e){let n=null;try{or=or||function(t){const e=new qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Sn(""),"text/html")}catch(t){return!1}}()?new Vn(e):e}(t);let r=e?String(e):"";n=or.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==o);return Sn((new er).sanitizeChildren(ar(n)||n))}finally{if(n){const t=ar(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ur=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function cr(t){return t.ngDebugContext}function lr(t){return t.ngOriginalError}function hr(t,...e){t.error(...e)}class dr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||hr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?cr(t)?cr(t):this._findContext(lr(t)):null}_findOriginalError(t){let e=lr(t);for(;e&&lr(e);)e=lr(e);return e}}function fr(t,e){t.__ngContext__=e}const pr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function yr(t){return t instanceof Function?t():t}var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function gr(t,e){return(void 0)(t,e)}function vr(t){const e=t[3];return dt(e)?e[3]:e}function br(t){return wr(t[13])}function _r(t){return wr(t[4])}function wr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Ar(e,n,a):kr(e,n,a,i||null,!0):1===t&&null!==n?kr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Dr(t,e);r&&function(t,e,n,r){Ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Er(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Cr(t,e,n){return Ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Sr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Lt(i,-1)),n.splice(r,1)}function Tr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Sr(o,r),e>0&&(t[n-1][4]=r[4]);const s=rn(t,lt+e);qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Or(t,e){if(!(256&e[2])){const n=e[11];Ot(n)&&n.destroyNode&&qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ir(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Ir(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Ir(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ir(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof _e)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Sr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===R.None||e===R.Emulated)return null}return At(r,n)}(t,e.parent,n)}function kr(t,e,n,r,i){Ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ar(t,e,n){Ot(t)?t.appendChild(e,n):e.appendChild(n)}function Nr(t,e,n,r,i){null!==r?kr(t,e,n,r,i):Ar(t,e,n)}function Dr(t,e){return Ot(t)?t.parentNode(e):e.parentNode}function Pr(t,e,n){return jr(t,e,n)}let jr=function(t,e,n){return 40&t.type?At(t,n):null};function Rr(t,e,n,r){const i=xr(t,r,e),o=e[11],s=Pr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Nr(o,i,n[a],s,!1);else Nr(o,i,n,s,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return Lr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return dt(n)?Lr(-1,n):xt(n)}}if(32&n)return gr(e,t)()||xt(t[e.index]);{const n=Mr(t,e);return null!==n?Array.isArray(n)?n[0]:Fr(vr(t[16]),n):Fr(t,e.next)}}return null}function Mr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Lr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Fr(t,r)}return e[7]}function Vr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&fr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vr(t,e,n.child,r,i,o,!1),Er(e,t,i,a,o);else if(32&u){const s=gr(n,r);let u;for(;u=s();)Er(e,t,i,u,o);Er(e,t,i,a,o)}else 16&u?Br(t,e,r,n,i,o):Er(e,t,i,a,o);n=s?n.projectionNext:n.next}}function qr(t,e,n,r,i,o){Vr(n,r,t.firstChild,e,i,o,!1)}function Br(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],o);else Vr(t,e,a,s[3],i,o,!0)}function Ur(t,e,n){Ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Hr(t,e,n){Ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function zr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==zr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Wr(t){return 4===t.type&&t.value!==Kr}function Qr(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function Yr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Qr(t,u,n)||""===u&&1===e.length){if($r(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if($r(r))return!1;s=!0}continue}const l=Zr(8&r?"class":u,i,Wr(t),n);if(-1===l){if($r(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==zr(e,c,0)||2&r&&c!==t){if($r(r))return!1;s=!0}}}}else{if(!s&&!$r(r)&&!$r(u))return!1;if(s&&$r(u))continue;s=!1,r=u|1&r}}return $r(r)||s}function $r(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Xr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Yr(t,e[r],n))return!0;return!1}function Jr(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ti(t,e){return t?":not("+e.trim()+")":e}function ei(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||$r(s)||(e+=ti(o,i),i=""),r=s,o=o||!$r(r);n++}return""!==i&&(e+=ti(o,i)),e}const ni={};function ri(t){ii(Ut(),Bt(),le()+t,Yt())}function ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ye(e,r,0,n)}he(n)}function oi(t,e){return t<<17|e<<2}function si(t){return t>>17&32767}function ai(t){return 2|t}function ui(t){return(131068&t)>>2}function ci(t,e){return-131069&t|e<<2}function li(t){return 1|t}function hi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function di(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Mt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function fi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Kt(),s=Wt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Gt(o,!0),o}function pi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yi(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&Ki(1,r,n);const i=t.template;null!==i&&vi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&hi(t,e),t.staticViewQueries&&Ki(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)qi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function mi(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=Yt();try{Mt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&vi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ye(e,n,0,null),me(e,0)}if(function(t){for(let e=br(t);null!==e;e=_r(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Lt(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=_r(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Rt(n)&&mi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&hi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ye(e,n,1),me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Xt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ki(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ye(e,n,2),me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Lt(e[3],-1))}finally{ce()}}function gi(t,e,n,r){const i=e[10],o=!Yt(),s=jt(e);try{o&&!s&&i.begin&&i.begin(),s&&yi(t,e,r),mi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function vi(t,e,n,r,i){const o=le(),s=2&r;try{he(-1),s&&e.length>ct&&ii(t,e,ct,Yt()),n(r,i)}finally{he(o)}}function bi(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function _i(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||De(n,e),fr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&ji(e,n,r);const u=ze(e,t,a,n);fr(u,e),null!==s&&Ri(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ki(r,i)}}finally{he(-1),Jt(s)}}(t,e,n))}function wi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ei(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ci(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ci(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ni);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Si(t,e,n,r){const i=Wi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Qi(t).push(r,i.length-1))}function Ti(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Oi(t,e,n,r,i,o,s,a){const u=At(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?($i(t,n,c,r,i),pt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ot(o)?o.setProperty(u,r,i):Ce(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ii(t,e,n,r){let i=!1;if(qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Xr(n,s.selectors,!1)&&(i||(i=[]),Fe(De(n,e),t,s.type),mt(s)?(Ai(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Di(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=pi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Se(n.mergedAttrs,c.hostAttrs),Pi(t,n,e,u,c),Ni(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Wr(e)?null:Fi(n,i);o.push(c),s=Ti(n,u,s),a=Ti(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Se(n.mergedAttrs,n.attrs),i}function xi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ai(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function Di(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Pi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=gt(i.type)),s=new _e(o,mt(i),null);t.blueprint[r]=s,n[r]=s,xi(t,e,0,r,pi(t,n,i.hostVars,ni),i)}function ji(t,e,n){const r=At(e,t),i=Ei(n),o=t[10],s=Bi(t,di(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ri(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Fi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Li(t,e){const n=Dt(e,t);if(Rt(n)){const t=n[1];80&n[2]?mi(t,n,t.template,n[8]):n[5]>0&&Vi(n)}}function Vi(t){for(let n=br(t);null!==n;n=_r(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];mi(t,e,t.template,e[8])}else e[5]>0&&Vi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Rt(r)&&r[5]>0&&Vi(r)}}function qi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),yi(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=vr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Hi(t,e,n){const r=e[10];r.begin&&r.begin();try{mi(t,e,t.template,n)}catch(i){throw Yi(e,i),i}finally{r.end&&r.end()}}function zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Pt(n),i=r[1];gi(i,r,i.template,n)}}(t[8])}function Ki(t,e,n){ee(0),e(t,n)}const Gi=(()=>Promise.resolve(null))();function Wi(t){return t[7]||(t[7]=[])}function Qi(t){return t.cleanup||(t.cleanup=[])}function Yi(t,e){const n=t[9],r=n?n.get(dr,null):null;r&&r.handleError(e)}function $i(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Zi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Xi=new Je("INJECTOR",-1);class Ji{get(t,e=cn){if(e===cn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const to=new Je("Set Injector scope."),eo={},no={},ro=[];let io;function oo(){return void 0===io&&(io=new Ji),io}function so(t,e=null,n=null,r){return new ao(t,n,e||oo(),r)}class ao{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&en(e,n=>this.processProvider(n,t,e)),en([t],t=>this.processInjectorType(t,[],i)),this.records.set(Xi,lo(void 0,this));const o=this.records.get(to);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=cn,n=k.Default){this.assertNotDestroyed();const r=pn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&E(t);e=n&&this.injectableDefInScope(n)?lo(uo(t),eo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?oo():this.parent).get(t,e=n&k.Optional&&e===cn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[hn]&&i.unshift(e[hn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ln,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{pn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{en(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];en(r,t=>this.processProvider(t,n,r||ro))}}this.injectorDefTypes.add(o);const a=gt(o)||(()=>new o);this.records.set(o,lo(a,eo));const u=r.providers;if(null!=u&&!s){const e=t;en(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=fo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return ho(t)?lo(void 0,t.useValue):lo(co(t),eo)}(t);if(fo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=lo(void 0,eo,!0),e.factory=()=>vn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===eo&&(e.value=no,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function uo(t){const e=E(t),n=null!==e?e.factory:gt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=on(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function co(t,e,n){let r;if(fo(t)){const e=p(t);return gt(e)||uo(e)}if(ho(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...vn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>mn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return gt(e)||uo(e);r=()=>new e(...vn(t.deps))}var i;return r}function lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ho(t){return null!==t&&"object"==typeof t&&dn in t}function fo(t){return"function"==typeof t}const po=function(t,e,n){return function(t,e=null,n=null,r){const i=so(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let yo=(()=>{class t{static create(t,e){return Array.isArray(t)?po(t,e,""):po(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=cn,t.NULL=new Ji,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>mn(Xi)}),t.__NG_ELEMENT_ID__=-1,t})();function mo(t,e){fe(Pt(t)[1],zt())}function go(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=vo(t.inputs),e.declaredInputs=vo(t.declaredInputs),e.outputs=vo(t.outputs);const n=i.hostBindings;n&&wo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&bo(t,o),s&&_o(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===go&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Se(i.hostAttrs,n=Se(n,i.hostAttrs))}}(r)}function vo(t){return t===B?{}:t===H?[]:t}function bo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function _o(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function wo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Eo=null;function Co(){if(!Eo){const t=q.Symbol;if(t&&t.iterator)Eo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Eo=n)}}}return Eo}function So(t){return!!To(t)&&(Array.isArray(t)||!(t instanceof Map)&&Co()in t)}function To(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Oo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Io(t,e,n,r){const i=Bt();return Oo(i,Zt(),e)&&(Ut(),function(t,e,n,r,i,o){const s=At(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ot(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?g(o):s(o,r||"",i);Ot(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(de(),i,t,e,n,r)),Io}function xo(t,e,n,r,i,o,s,a){const u=Bt(),c=Ut(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=fi(e,t,4,s||null,Ft(c,a));Ii(e,n,l,Ft(c,u)),fe(e,l);const h=l.tViews=Ci(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Gt(h,!1);const d=u[11].createComment("");Rr(c,u,d,h),fr(d,u),Bi(u,u[l]=Mi(d,u,d,h)),yt(h)&&_i(c,u,h),null!=s&&wi(u,h,a)}function ko(t){return function(t,e){return t[e]}(Vt.lFrame.contextLView,ct+t)}function Ao(t,e=k.Default){const n=Bt();return null===n?mn(t,e):Ve(zt(),n,p(t),e)}function No(t,e,n){const r=Bt();return Oo(r,Zt(),e)&&Oi(Ut(),de(),r,t,e,r[11],n,!1),No}function Do(t,e,n,r,i){const o=i?"class":"style";$i(t,n,e.inputs[o],o,r)}function Po(t,e,n,r){const i=Bt(),o=Ut(),s=ct+t,a=i[11],u=i[s]=Cr(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=fi(e,t,2,i,Ft(a,o));return Ii(e,n,u,Ft(a,s)),null!==u.attrs&&Zi(u,u.attrs,!1),null!==u.mergedAttrs&&Zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Gt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&Hr(a,u,h);const d=c.styles;null!==d&&Ur(a,u,d),64!=(64&c.flags)&&Rr(o,i,u,c),0===Vt.lFrame.elementDepthCount&&fr(u,i),Vt.lFrame.elementDepthCount++,yt(c)&&(_i(o,i,c),bi(o,c,i)),null!==r&&wi(i,c)}function jo(){let t=zt();Wt()?Qt():(t=t.parent,Gt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Ut();n.firstCreatePass&&(fe(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Do(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Do(n,e,Bt(),e.stylesWithoutHost,!1)}function Ro(t,e,n,r){Po(t,e,n,r),jo()}function Fo(t,e,n){const r=Bt(),i=Ut(),o=t+ct,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ft(o,r),a=fi(e,t,8,"ng-container",s);return null!==s&&Zi(a,s,!0),Ii(e,n,a,Ft(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Gt(s,!0);const a=r[o]=r[11].createComment("");Rr(i,r,a,s),fr(a,r),yt(s)&&(_i(i,r,s),bi(i,s,r)),null!=n&&wi(r,s)}function Mo(){let t=zt();const e=Ut();Wt()?Qt():(t=t.parent,Gt(t,!1)),e.firstCreatePass&&(fe(e,t),ft(t)&&e.queries.elementEnd(t))}function Lo(){return Bt()}function Vo(t){return!!t&&"function"==typeof t.then}function qo(t){return!!t&&"function"==typeof t.subscribe}const Bo=qo;function Uo(t,e,n=!1,r){const i=Bt(),o=Ut(),s=zt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&Qi(t),l=Wi(e);let h=!0;if(3&r.type){const d=At(r,e),f=a?a(d):B,p=f.target||d,y=l.length,m=a?t=>a(xt(t[r.index])).target:r.index;if(Ot(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=zo(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,y,y+1)}}else o=zo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,y,s)}else o=zo(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Uo}function Ho(t,e,n,r){try{return!1!==n(r)}catch(i){return Yi(t,i),!1}}function zo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Ui(s);let a=Ho(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Ho(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ko(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function Go(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Xr(t,o,!0):Jr(r,o))return i}else n=i}return n}function Wo(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=on(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Go(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Qo(t,e=0,n){const r=Bt(),i=Ut(),o=fi(i,ct+t,16,null,n||null);null===o.projection&&(o.projection=e),Qt(),64!=(64&o.flags)&&function(t,e,n){Br(e[11],0,e,n,xr(t,n,e),Pr(n.parent||e[6],n,e))}(i,r,o)}function Yo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?si(o):ui(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];$o(t[a],e)&&(u=!0,t[a+1]=r?li(n):ai(n)),a=r?si(n):ui(n)}u&&(t[n+1]=r?ai(o):li(o))}function $o(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&un(t,e)>=0}function Zo(t,e,n){return Jo(t,e,n,!1),Zo}function Xo(t,e){return Jo(t,e,null,!0),Xo}function Jo(t,e,n,r){const i=Bt(),o=Ut(),s=function(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=es(n=ts(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ts(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ui(r))return t[si(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ts(null,t,e,n[1],r),n=es(n,e.attrs,r),function(t,e,n,r){t[si(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=es(r,t[o].hostAttrs,n);return es(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=si(s),u=ui(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||un(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=si(t[a+1]);t[r+1]=oi(e,a),0!==e&&(t[e+1]=ci(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=oi(a,0),0!==a&&(t[a+1]=ci(t[a+1],r)),a=r;else t[r+1]=oi(u,0),0===a?a=r:t[u+1]=ci(t[u+1],r),u=r;l&&(t[r+1]=ai(t[r+1])),Yo(t,c,r,!0),Yo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&un(o,e)>=0&&(n[r+1]=li(n[r+1]))}(e,c,t,r,o),s=oi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==ni&&Oo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];rs(1==(1&c)?ns(u,e,n,i,ui(c),s):void 0)||(rs(o)||function(t){return 2==(2&t)}(c)&&(o=ns(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Ot(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:mr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=mr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(le(),n),i,o))}(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Nn(t)))),t}(e,n),r,s)}function ts(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=es(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function es(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ns(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ni&&(l=c?U:void 0);let h=c?an(l,r):u===r?l:void 0;if(o&&!rs(h)&&(h=an(e,r)),rs(h)&&(a=h,s))return a;const d=t[i+1];i=s?si(d):ui(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=an(t,r))}return a}function rs(t){return void 0!==t}function is(t,e=""){const n=Bt(),r=Ut(),i=t+ct,o=r.firstCreatePass?fi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ot(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Rr(r,n,s,o),Gt(o,!1)}function os(t,e,n){const r=Bt(),i=function(t,e,n,r){return Oo(t,Zt(),n)?e+g(n)+r:ni}(r,t,e,n);return i!==ni&&function(t,e,n){const r=kt(e,t);!function(t,e,n){Ot(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,le(),i),os}function ss(t,e,n){const r=Bt();return Oo(r,Zt(),e)&&Oi(Ut(),de(),r,t,e,r[11],n,!0),ss}const as=void 0;var us=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let cs={};function ls(t,e,n){"string"!=typeof e&&(n=e,e=t[ys.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),cs[e]=t,n&&(cs[e][ys.ExtraData]=n)}function hs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ps(e);if(n)return n;const r=e.split("-")[0];if(n=ps(r),n)return n;if("en"===r)return us;throw new Error(`Missing locale data for the locale "${t}".`)}function ds(t){return hs(t)[ys.CurrencyCode]||null}function fs(t){return hs(t)[ys.PluralCase]}function ps(t){return t in cs||(cs[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),cs[t]}var ys=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ms="en-US";let gs=ms;function vs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(gs=t.toLowerCase().replace(/_/g,"-"))}function bs(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)bs(t[o],e,n,r,i);else{const o=Ut(),s=Bt();let a=fo(t)?t:p(t.provide),u=co(t);const c=zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(fo(t)||!t.multi){const r=new _e(u,i,Ao),f=Es(a,e,i?l:l+d,h);-1===f?(Fe(De(c,s),o,a),_s(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Es(a,e,l+d,h),p=Es(a,e,l,l+d),y=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!y){Fe(De(c,s),o,a);const l=function(t,e,n,r,i){const o=new _e(t,n,Ao);return o.multi=[],o.index=e,o.componentProviders=0,ws(o,i,r&&!n),o}(i?Ss:Cs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),_s(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else _s(o,t,f>-1?f:p,ws(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function _s(t,e,n,r){const i=fo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ws(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Es(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Cs(t,e,n,r){return Ts(this.multi,[])}function Ss(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ts(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ts(i,o);return o}function Ts(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Os(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ut();if(r.firstCreatePass){const i=mt(t);bs(n,r.data,r.blueprint,i,!0),bs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Is{}class xs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ks=(()=>{class t{}return t.NULL=new xs,t})();function As(...t){}function Ns(t,e){return new Ps(At(t,e))}const Ds=function(){return Ns(zt(),Bt())};let Ps=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ds,t})();function js(t){return t instanceof Ps?t.nativeElement:t}class Rs{}let Fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ms(),t})();const Ms=function(){const t=Bt(),e=Dt(zt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Ls=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Vs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const qs=new Vs("11.2.12");class Bs{constructor(){}supports(t){return So(t)}create(t){return new Hs(t)}}const Us=(t,e)=>e;class Hs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Us}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ws(n,r,i)?e:n,s=Ws(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!So(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Co()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new zs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Gs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class zs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ks{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Gs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ks,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ws(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Qs{constructor(){}supports(t){return t instanceof Map||To(t)}create(){return new Ys}}class Ys{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||To(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new $s(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class $s{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zs(){return new Xs([new Bs])}let Xs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Zs()),deps:[[t,new En,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Zs}),t})();function Js(){return new ta([new Qs])}let ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Js()),deps:[[t,new En,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Js}),t})();function ea(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ea(e[1],e,n,r)}const s=n.type;if(8&s)ea(t,e,n.child,r);else if(32&s){const t=gr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Mr(e,n);if(Array.isArray(t))r.push(...t);else{const n=vr(e[16]);ea(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class na{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ea(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Tr(t,n),rn(e,n))}this._attachedToViewContainer=!1}Or(this._lView[1],this._lView)}onDestroy(t){Si(this._lView[1],this._lView,null,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{Hi(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ra extends na{constructor(t){super(t),this._view=t}detectChanges(){zi(this._view)}checkNoChanges(){!function(t){$t(!0);try{zi(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const ia=sa;let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t.__ChangeDetectorRef__=!0,t})();function sa(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Dt(t.index,e);return new na(n,n)}return 47&t.type?new na(e[16],e):null}(zt(),Bt(),t)}const aa=[new Qs],ua=new Xs([new Bs]),ca=new ta(aa),la=function(){return pa(zt(),Bt())};let ha=(()=>{class t{}return t.__NG_ELEMENT_ID__=la,t})();const da=ha,fa=class extends da{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=di(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),yi(e,n,t),new na(n)}};function pa(t,e){return 4&t.type?new fa(e,t,Ns(t,e)):null}class ya{}const ma=function(){return Ea(zt(),Bt())};let ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=ma,t})();const va=ga,ba=class extends va{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ns(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Oe(t)){const e=xe(t,this._hostLView),n=Ie(t);return new We(e[1].data[n+8],e)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=_a(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ya,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ba(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],nn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Lr(i,o),a=n[11],u=Dr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),nn(wa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=_a(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Tr(this._lContainer,e);n&&(rn(wa(this._lContainer),e),Or(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Tr(this._lContainer,e);return n&&null!=rn(wa(this._lContainer),e)?new na(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function _a(t){return t[8]}function wa(t){return t[8]||(t[8]=[])}function Ea(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);kr(n,Dr(n,r),i,function(t,e){return Ot(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),Bi(e,n)}return new ba(n,t,e)}const Ca={};class Sa extends ks{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new Ia(e,this.ngModule)}}function Ta(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Oa=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pr});class Ia extends Is{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ta(this.componentDef.inputs)}get outputs(){return Ta(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ca,i);return o!==Ca||r===Ca?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Rs,It),s=i.get(Ls,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ot(t))return t.selectRootElement(e,n===R.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:pr,clean:Gi,playerHandler:null,flags:0},d=Ci(0,null,null,1,0,null,null,null,null,null),f=di(null,d,h,l,null,null,o,a,s,i);let p,y;ie(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=fi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Zi(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&Hr(i,t,a.classes),null!==a.styles&&Ur(i,t,a.styles)));const c=r.createRenderer(t,e),l=di(n,Ei(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Fe(De(a,n),s,e.type),Ai(s,a),Di(a,n.length,1)),Bi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)we(a,c,["ng-version",qs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!$r(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&Hr(a,c,e.join(" "))}if(y=Nt(d,ct),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Pi(t,r,e,pi(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);fr(i,e);const o=At(r,e);return o&&fr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=zt();e.contentQueries(1,s,t.directiveStart)}const a=zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),xi(n[1],a,0,a.directiveStart,a.directiveEnd,e),ki(e,s)),s}(t,this.componentDef,f,h,[mo]),yi(d,f,null)}finally{ce()}return new xa(this.componentType,p,Ns(y,f),f,y)}}class xa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ra(r),this.componentType=t}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ka=new Map;class Aa extends ya{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sa(this);const n=ut(t),r=t[Q]||null;r&&vs(r),this._bootstrapComponents=yr(n.bootstrap),this._r3Injector=so(t,e,[{provide:ya,useValue:this},{provide:ks,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=yo.THROW_IF_NOT_FOUND,n=k.Default){return t===yo||t===ya||t===Xi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Na extends class{}{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,ka.get(i),n),ka.set(i,n));const o=yr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Aa(this.moduleType,t)}}function Da(t){return e=>{setTimeout(t,void 0,e)}}const Pa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Da(u),a&&(a=Da(a)),c&&(c=Da(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function ja(){return this._results[Co()]()}class Ra{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Co(),n=Ra.prototype;n[e]||(n[e]=ja)}get changes(){return this._changes||(this._changes=new Pa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=tn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Fa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Fa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ma{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ma(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Qa(t,e).matches&&this.queries[e].setDirty()}}class La{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Va{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Va(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class qa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new qa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ba(e,i)),this.matchTNodeWithReadOption(t,e,He(e,t,i,!1,!1))}else n===ha?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,He(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ps||r===ga||r===ha&&4&e.type)this.addMatch(e.index,-2);else{const n=He(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ba(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ua(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ns(t,e):4&t.type?pa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ps?Ns(e,t):n===ha?pa(e,t):n===ga?Ea(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function Ha(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ua(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function za(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ha(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&za(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];za(n[1],n,i,r)}}}}}return r}function Ka(t){const e=Bt(),n=Ut(),r=te();ee(r+1);const i=Qa(n,r);if(t.dirty&&jt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?za(n,e,r,[]):Ha(n,e,i,r);t.reset(o,js),t.notifyOnChanges()}return!0}return!1}function Ga(t,e,n){const r=Ut();r.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Va),t.queries.track(new qa(e,-1))}(r,new La(t,e,n)),2==(2&e)&&(r.staticViewQueries=!0)),function(t,e,n){const r=new Ra(4==(4&n));Si(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ma),e[19].queries.push(new Fa(r))}(r,Bt(),e)}function Wa(){return t=Bt(),e=te(),t[19].queries[e].queryList;var t,e}function Qa(t,e){return t.queries.getByIndex(e)}function Ya(t=k.Default){const e=sa(!0);if(null!=e||t&k.Optional)return e;b("ChangeDetectorRef")}const $a=new Je("Application Initializer");let Za=(()=>{class t{constructor(t){this.appInits=t,this.resolve=As,this.reject=As,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Vo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(mn($a,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Xa=new Je("AppId"),Ja={provide:Xa,useFactory:function(){return`${tu()}${tu()}${tu()}`},deps:[]};function tu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eu=new Je("Platform Initializer"),nu=new Je("Platform ID"),ru=new Je("appBootstrapListener");let iu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ou=new Je("LocaleId"),su=new Je("DefaultCurrencyCode");class au{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const uu=function(t){return new Na(t)},cu=uu,lu=function(t){return Promise.resolve(uu(t))},hu=function(t){const e=uu(t),n=yr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new Ia(n)),t},[]);return new au(e,n)},du=hu,fu=function(t){return Promise.resolve(hu(t))};let pu=(()=>{class t{constructor(){this.compileModuleSync=cu,this.compileModuleAsync=lu,this.compileModuleAndAllComponentsSync=du,this.compileModuleAndAllComponentsAsync=fu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const yu=(()=>Promise.resolve(0))();function mu(t){"undefined"==typeof Zone?yu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class gu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pa(!1),this.onMicrotaskEmpty=new Pa(!1),this.onStable=new Pa(!1),this.onError=new Pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_u(t),bu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_u(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return wu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Eu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return wu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Eu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,_u(t),bu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,vu,As,As);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const vu={};function bu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _u(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function wu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Eu(t){t._nesting--,bu(t)}class Cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pa,this.onMicrotaskEmpty=new Pa,this.onStable=new Pa,this.onError=new Pa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Su=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gu.assertNotInAngularZone(),mu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(mn(gu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Tu=(()=>{class t{constructor(){this._applications=new Map,ku.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ku.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Ou{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Iu(t){ku=t}let xu,ku=new Ou,Au=!0,Nu=!1;function Du(){return Nu=!0,Au}function Pu(){if(Nu)throw new Error("Cannot enable prod mode after platform setup.");Au=!1}const ju=new Je("AllowMultipleToken");class Ru{constructor(t,e){this.name=t,this.token=e}}function Fu(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=Mu();if(!o||o.injector.get(ju,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:to,useValue:"platform"});!function(t){if(xu&&!xu.destroyed&&!xu.injector.get(ju,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");xu=t.get(Lu);const e=t.get(eu,null);e&&e.forEach(t=>t())}(yo.create({providers:t,name:r}))}return function(t){const e=Mu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Mu(){return xu&&!xu.destroyed?xu:null}let Lu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Cu:("zone.js"===t?void 0:t)||new gu({enableLongStackTrace:Du(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:gu,useValue:n}];return n.run(()=>{const e=yo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Bu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Vo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Za);return t.runInitializers(),t.donePromise.then(()=>(vs(i.injector.get(ou,ms)||ms),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Vu({},e);return function(t,e,n){const r=new Na(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(mn(yo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Vu(t,e){return Array.isArray(e)?e.reduce(Vu,t):Object.assign(Object.assign({},t),e)}let qu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{gu.assertNotInAngularZone(),mu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{gu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Is?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ya),i=n.create(yo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Su,null),a=s&&i.injector.get(Tu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Bu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Bu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ru,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(mn(gu),mn(yo),mn(dr),mn(ks),mn(Za))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Bu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Uu=function(t){return null},Hu=Fu(null,"core",[{provide:nu,useValue:"unknown"},{provide:Lu,deps:[yo]},{provide:Tu,deps:[]},{provide:iu,deps:[]}]),zu=[{provide:qu,useClass:qu,deps:[gu,yo,dr,ks,Za]},{provide:Oa,deps:[gu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Za,useClass:Za,deps:[[new wn,$a]]},{provide:pu,useClass:pu,deps:[]},Ja,{provide:Xs,useFactory:function(){return ua},deps:[]},{provide:ta,useFactory:function(){return ca},deps:[]},{provide:ou,useFactory:function(t){return vs(t=t||"undefined"!=typeof $localize&&$localize.locale||ms),t},deps:[[new _n(ou),new wn,new En]]},{provide:su,useValue:"USD"}];let Ku=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(mn(qu))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:zu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.a)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return S}),n.d(e,"c",function(){return M}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return D}),n.d(e,"i",function(){return L}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return U}),n.d(e,"m",function(){return W}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return N}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return g}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return j}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return y}),n.d(e,"w",function(){return E}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return A}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return R}),n.d(e,"C",function(){return F}),n.d(e,"D",function(){return P}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return K}),n.d(e,"G",function(){return x}),n.d(e,"H",function(){return B}),n.d(e,"I",function(){return H}),n.d(e,"J",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(O,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var O=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function j(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function R(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function F(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function L(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function q(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function U(t,e){return t+" failed: "+e+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(U(t,e)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(U(t,e)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function W(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return O}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),g=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.m("angularfire2.app.options"),b=new u.m("angularfire2.app.nameOrConfig"),_=new u.G("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.N)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[v,u.t,[new u.u,b]]};let O=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Kb(u.v))},t.\u0275mod=u.zb({type:t}),t.\u0275inj=u.yb({providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class y extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new g(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.m("DocumentToken");var a=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const u=r.eb;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.q))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();class h{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let d=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Rv){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new h(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new f(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new f(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(r.H),r.Bb(r.D),r.Bb(r.o))},t.\u0275dir=r.wb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class f{constructor(t,e){this.record=t,this.view=e}}class p{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let y=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),m=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new p(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(r.H),r.Bb(r.D),r.Bb(y,1))},t.\u0275dir=r.wb({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),g=(()=>{class t{constructor(t,e,n){n._addDefault(new p(t,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(r.H),r.Bb(r.D),r.Bb(y,1))},t.\u0275dir=r.wb({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({providers:[{provide:c,useClass:l}]}),t})();function b(t){return"server"===t}class _ extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new _,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=E||(E=document.querySelector("base"),E)?E.getAttribute("href"):null;return null==e?null:(n=e,w||(w=document.createElement("a")),w.setAttribute("href",n),"/"===w.pathname.charAt(0)?w.pathname:"/"+w.pathname);var n}resetBaseElement(){E=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let w,E=null;const C=new r.m("TRANSITION_ID"),S=[{provide:r.b,useFactory:function(t,e,n){return()=>{n.get(r.c).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[C,s,r.n],multi:!0}];class T{static init(){Object(r.P)(new T)}addToWindow(t){r.gb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.gb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.gb.getAllAngularRootElements=()=>t.getAllRootElements(),r.gb.frameworkStabilizers||(r.gb.frameworkStabilizers=[]),r.gb.frameworkStabilizers.push(t=>{const e=r.gb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const O=new r.m("EventManagerPlugins");let I=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(O),r.Kb(r.t))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();class x{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let k=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})(),A=(()=>{class t extends k{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(s))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();const N={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},D=/%COMP%/g;function P(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?P(t,i,n):(i=i.replace(D,t),n.push(i))}return n}function j(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let R=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new F(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.I.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new M(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.I.ShadowDom:return new L(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=P(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(I),r.Kb(A),r.Kb(r.a))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();class F{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(N[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=N[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=N[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.A.DashCase|r.A.Important)?t.style.setProperty(e,n,i&r.A.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.A.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,j(n)):this.eventManager.addEventListener(t,e,j(n))}}class M extends F{constructor(t,e,n,r){super(t),this.component=n;const i=P(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(D,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(D,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class L extends F{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=P(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let V=(()=>{class t extends x{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(s))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();const q=["alt","control","meta","shift"],B={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},H={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let z=(()=>{class t extends x{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(q.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&U.hasOwnProperty(e)&&(e=U[e]))}return B[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),q.forEach(r=>{r!=n&&(0,H[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(s))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();const K=[{provide:r.v,useValue:"browser"},{provide:r.w,useValue:function(){_.makeCurrent(),T.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.mb)(document),document},deps:[]}],G=Object(r.J)(r.O,"browser",K),W=[[],{provide:r.R,useValue:"root"},{provide:r.j,useFactory:function(){return new r.j},deps:[]},{provide:O,useClass:V,multi:!0,deps:[s,r.t,r.v]},{provide:O,useClass:z,multi:!0,deps:[s]},[],{provide:R,useClass:R,deps:[I,A,r.a]},{provide:r.z,useExisting:R},{provide:k,useExisting:A},{provide:A,useClass:A,deps:[s]},{provide:r.E,useClass:r.E,deps:[r.t]},{provide:I,useClass:I,deps:[O,r.t]},[]];let Q=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:C,useExisting:r.a},S]}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(t,12))},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({providers:W,imports:[v,r.d]}),t})();"undefined"!=typeof window&&window;var Y=n("Cfvw"),$=n("HDdC"),Z=n("DH7j"),X=n("lJxs"),J=n("XoHu");function tt(t,e){return new $.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Y.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const et=new r.m("NgValueAccessor"),nt={provide:et,useExisting:Object(r.L)(()=>it),multi:!0},rt=new r.m("CompositionEventMode");let it=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(r.y),r.Bb(r.i),r.Bb(rt,8))},t.\u0275dir=r.wb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Nb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.rb([nt])]}),t})();function ot(t){return null==t||0===t.length}function st(t){return null!=t&&"number"==typeof t.length}const at=new r.m("NgValidators"),ut=new r.m("NgAsyncValidators"),ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class lt{static min(t){return function(t){return e=>{if(ot(e.value)||ot(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(ot(e.value)||ot(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return ht(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return ot(t.value)||ct.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>ot(e.value)||!st(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>st(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return dt;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(ot(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return vt(t)}static composeAsync(t){return _t(t)}}function ht(t){return ot(t.value)?{required:!0}:null}function dt(t){return null}function ft(t){return null!=t}function pt(t){const e=Object(r.jb)(t)?Object(Y.a)(t):t;return Object(r.ib)(e),e}function yt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function mt(t,e){return e.map(e=>e(t))}function gt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function vt(t){if(!t)return null;const e=t.filter(ft);return 0==e.length?null:function(t){return yt(mt(t,e))}}function bt(t){return null!=t?vt(gt(t)):null}function _t(t){if(!t)return null;const e=t.filter(ft);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Z.a)(e))return tt(e,null);if(Object(J.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return tt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return tt(t=1===t.length&&Object(Z.a)(t[0])?t[0]:t,null).pipe(Object(X.a)(t=>e(...t)))}return tt(t,null)}(mt(t,e).map(pt)).pipe(Object(X.a)(yt))}}function wt(t){return null!=t?_t(gt(t)):null}function Et(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ct(t){return t._rawValidators}function St(t){return t._rawAsyncValidators}let Tt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=bt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=wt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t}),t})(),Ot=(()=>{class t extends Tt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return It(e||t)},t.\u0275dir=r.wb({type:t,features:[r.pb]}),t})();const It=r.Ib(Ot);class xt extends Tt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kt{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let At=(()=>{class t extends kt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(xt,2))},t.\u0275dir=r.wb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ub("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.pb]}),t})(),Nt=(()=>{class t extends kt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(Ot,10))},t.\u0275dir=r.wb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ub("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.pb]}),t})();function Dt(t,e){Rt(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Mt(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Mt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Pt(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ft(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function jt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Rt(t,e,n){const r=Ct(t);null!==e.validator?t.setValidators(Et(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=St(t);if(null!==e.asyncValidator?t.setAsyncValidators(Et(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();jt(e._rawValidators,n),jt(e._rawAsyncValidators,n)}}function Ft(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Ct(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=St(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};jt(e._rawValidators,t),jt(e._rawAsyncValidators,t)}return r}function Mt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Lt(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vt="VALID",qt="INVALID",Bt="PENDING",Ut="DISABLED";function Ht(t){return(Wt(t)?t.validators:t)||null}function zt(t){return Array.isArray(t)?bt(t):t||null}function Kt(t,e){return(Wt(e)?e.asyncValidators:t)||null}function Gt(t){return Array.isArray(t)?wt(t):t||null}function Wt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Qt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=zt(this._rawValidators),this._composedAsyncValidatorFn=Gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Vt}get invalid(){return this.status===qt}get pending(){return this.status==Bt}get disabled(){return this.status===Ut}get enabled(){return this.status!==Ut}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=zt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Gt(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Bt,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ut,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vt,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Vt&&this.status!==Bt||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ut:Vt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Bt,this._hasOwnPendingAsyncValidator=!0;const e=pt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof $t?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Zt&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.k,this.statusChanges=new r.k}_calculateStatus(){return this._allControlsDisabled()?Ut:this.errors?qt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bt)?Bt:this._anyControlsHaveStatus(qt)?qt:Vt}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Wt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Yt extends Qt{constructor(t=null,e,n){super(Ht(e),Kt(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Lt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Lt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class $t extends Qt{constructor(t,e,n){super(Ht(e),Kt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Yt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Zt extends Qt{constructor(t,e,n){super(Ht(e),Kt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Yt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Xt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Jt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({}),t})();const te=new r.m("NgModelWithFormControlWarning"),ee={provide:Ot,useExisting:Object(r.L)(()=>ne)};let ne=(()=>{class t extends Ot{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.k,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ft(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Dt(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Pt(t.control||null,t,!1),Lt(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Pt(e||null,t),n instanceof Yt&&(Dt(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){Rt(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Ft(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rt(this.form,this,!1),this._oldForm&&Ft(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(at,10),r.Bb(ut,10))},t.\u0275dir=r.wb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Nb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.rb([ee]),r.pb,r.qb]}),t})();const re={provide:xt,useExisting:Object(r.L)(()=>ie)};let ie=(()=>{class t extends xt{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.k,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===it?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(Ot,13),r.Bb(at,10),r.Bb(ut,10),r.Bb(et,10),r.Bb(te,8))},t.\u0275dir=r.wb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.rb([re]),r.pb,r.qb]}),t._ngModelWarningSentOnce=!1,t})();const oe={provide:at,useExisting:Object(r.L)(()=>se),multi:!0};let se=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?ht(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.tb("required",e.required?"":null)},inputs:{required:"required"},features:[r.rb([oe])]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[[Jt]]}),t})(),ue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[ae]}),t})(),ce=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:te,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[ae]}),t})(),le=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new $t(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new Yt(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Zt(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Yt||t instanceof $t||t instanceof Zt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.xb)({factory:function(){return new t},token:t,providedIn:ce}),t})();var he=n("XNiG");const de=["videoWrapper"],fe=["qrCanvas"];function pe(t,e){if(1&t&&(r.Eb(0),r.Cb(1,"canvas",3,4),r.Cb(3,"div",null,5),r.Db()),2&t){const t=r.Pb();r.sb(1),r.Sb("hidden",t.canvasHidden)("width",t.canvasWidth)("height",t.canvasHeight),r.sb(2),r.Xb("width",t.canvasWidth)("height",t.canvasHeight)}}function ye(t,e){1&t&&(r.Eb(0),r.Gb(1,"p"),r.Zb(2," You are using an "),r.Gb(3,"strong"),r.Zb(4,"outdated"),r.Fb(),r.Zb(5," browser. Please "),r.Gb(6,"a",6),r.Zb(7,"upgrade your browser"),r.Fb(),r.Zb(8," to improve your experience. "),r.Fb(),r.Db())}class me{constructor(t,e,n){this.count=1,this.incrementCount=function(){this.count++},this.aboutEquals=function(t,e,n){if(Math.abs(e-this.y)<=t&&Math.abs(n-this.x)<=t){var r=Math.abs(t-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1},this.x=t,this.y=e,this.estimatedModuleSize=n}get EstimatedModuleSize(){return this.estimatedModuleSize}get Count(){return this.count}get X(){return Math.floor(this.x)}get Y(){return Math.floor(this.y)}}class ge{constructor(t,e,n,r,i,o,s,a,u){this.possibleCenters=new Array,this.crossCheckStateCount=new Array(0,0,0),this.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},this.foundPatternCross=function(t){for(var e=this.moduleSize,n=e/2,r=0;r<3;r++)if(Math.abs(e-t[r])>=n)return!1;return!0},this.crossCheckVertical=function(t,e,n,r){var i=this.image,o=this.imageHeight,s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var a=t;a>=0&&i[e+a*this.imageWidth]&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&!i[e+a*this.imageWidth]&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=t+1;a<o&&i[e+a*this.imageWidth]&&s[1]<=n;)s[1]++,a++;if(a==o||s[1]>n)return NaN;for(;a<o&&!i[e+a*this.imageWidth]&&s[2]<=n;)s[2]++,a++;return s[2]>n||5*Math.abs(s[0]+s[1]+s[2]-r)>=2*r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,a):NaN},this.handlePossibleCenter=function(t,e,n){var r=t[0]+t[1]+t[2],i=this.centerFromEnd(t,n),o=this.crossCheckVertical(e,Math.floor(i),2*t[1],r);if(!isNaN(o)){for(var s=(t[0]+t[1]+t[2])/3,a=this.possibleCenters.length,u=0;u<a;u++)if(this.possibleCenters[u].aboutEquals(s,o,i))return new me(i,o,s);var c=new me(i,o,s);this.possibleCenters.push(c),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(c)}return null},this.find=function(){for(var t=this.startX,e=this.height,n=t+this.width,r=this.startY+(e>>1),i=new Array(0,0,0),o=0;o<e;o++){var s=r+(0==(1&o)?o+1>>1:-(o+1>>1));i[0]=0,i[1]=0,i[2]=0;for(var a=t;a<n&&!this.image[a+this.imageWidth*s];)a++;for(var u=0;a<n;){if(this.image[a+s*this.imageWidth])if(1==u)i[u]++;else if(2==u){var c;if(this.foundPatternCross(i)&&null!=(c=this.handlePossibleCenter(i,s,a)))return c;i[0]=i[2],i[1]=1,i[2]=0,u=1}else i[++u]++;else 1==u&&u++,i[u]++;a++}if(this.foundPatternCross(i)&&null!=(c=this.handlePossibleCenter(i,s,n)))return c}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"},this.image=t,this.startX=e,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=u,this.imageWidth=s,this.imageHeight=a}}class ve{constructor(t,e,n,r,i,o,s,a,u){this.transformPoints1=function(t){for(var e=t.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,u=this.a31,c=this.a32,l=this.a33,h=0;h<e;h+=2){var d=t[h],f=t[h+1],p=i*d+a*f+l;t[h]=(n*d+o*f+u)/p,t[h+1]=(r*d+s*f+c)/p}},this.transformPoints2=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r],o=e[r],s=this.a13*i+this.a23*o+this.a33;t[r]=(this.a11*i+this.a21*o+this.a31)/s,e[r]=(this.a12*i+this.a22*o+this.a32)/s}},this.buildAdjoint=function(){return new ve(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(t){return new ve(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},this.a11=t,this.a12=r,this.a13=s,this.a21=e,this.a22=i,this.a23=a,this.a31=n,this.a32=o,this.a33=u}static quadrilateralToQuadrilateral(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,y){var m=this.quadrilateralToSquare(t,e,n,r,i,o,s,a);return this.squareToQuadrilateral(u,c,l,h,d,f,p,y).times(m)}static squareToQuadrilateral(t,e,n,r,i,o,s,a){var u=a-o,c=e-r+o-a;if(0==u&&0==c)return new ve(n-t,i-n,t,r-e,o-r,e,0,0,1);var l=n-i,h=s-i,d=t-n+i-s,f=r-o,p=l*u-h*f,y=(d*u-h*c)/p,m=(l*c-d*f)/p;return new ve(n-t+y*n,s-t+m*s,t,r-e+y*r,a-e+m*a,e,y,m,1)}static quadrilateralToSquare(t,e,n,r,i,o,s,a){return this.squareToQuadrilateral(t,e,n,r,i,o,s,a).buildAdjoint()}}class be{constructor(t,e){if(e||(e=t),t<1||e<1)throw"Both dimensions must be greater than 0";this.width=t,this.height=e,this.rowSize=t>>5,0!=(31&t)&&this.rowSize++,this.bits=new Array(this.rowSize*e);for(var n=0;n<this.bits.length;n++)this.bits[n]=0}get Width(){return this.width}get Height(){return this.height}get Dimension(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}URShift(t,e){return t>=0?t>>e:(t>>e)+(2<<~e)}get_Renamed(t,e){return 0!=(1&this.URShift(this.bits[e*this.rowSize+(t>>5)],31&t))}set_Renamed(t,e){this.bits[e*this.rowSize+(t>>5)]|=1<<(31&t)}flip(t,e){this.bits[e*this.rowSize+(t>>5)]^=1<<(31&t)}clear(){for(var t=this.bits.length,e=0;e<t;e++)this.bits[e]=0}setRegion(t,e,n,r){if(e<0||t<0)throw"Left and top must be nonnegative";if(r<1||n<1)throw"Height and width must be at least 1";var i=t+n,o=e+r;if(o>this.height||i>this.width)throw"The region must fit inside the matrix";for(var s=e;s<o;s++)for(var a=s*this.rowSize,u=t;u<i;u++)this.bits[a+(u>>5)]|=1<<(31&u)}}class _e{constructor(t,e){this.width=t,this.height=e}checkAndNudgePoints(t,e){for(var n=this.width,r=this.height,i=!0,o=0;o<e.length&&i;o+=2){var s=Math.floor(e[o]),a=Math.floor(e[o+1]);if(s<-1||s>n||a<-1||a>r)throw"Error.checkAndNudgePoints ";i=!1,-1==s?(e[o]=0,i=!0):s==n&&(e[o]=n-1,i=!0),-1==a?(e[o+1]=0,i=!0):a==r&&(e[o+1]=r-1,i=!0)}for(i=!0,o=e.length-2;o>=0&&i;o-=2){if(s=Math.floor(e[o]),a=Math.floor(e[o+1]),s<-1||s>n||a<-1||a>r)throw"Error.checkAndNudgePoints ";i=!1,-1==s?(e[o]=0,i=!0):s==n&&(e[o]=n-1,i=!0),-1==a?(e[o+1]=0,i=!0):a==r&&(e[o+1]=r-1,i=!0)}}sampleGrid3(t,e,n,r){for(var i=new be(n,n),o=new Array(n<<1),s=0;s<n;s++){for(var a=o.length,u=s+.5,c=0;c<a;c+=2)o[c]=.5+(c>>1),o[c+1]=u;r.transformPoints1(o),this.checkAndNudgePoints(t,o);try{for(c=0;c<a;c+=2){var l=4*Math.floor(o[c])+Math.floor(o[c+1])*this.width*4,h=t[Math.floor(o[c])+this.width*Math.floor(o[c+1])];e.data[l]=h?255:0,e.data[l+1]=h?255:0,e.data[l+2]=0,e.data[l+3]=255,h&&i.set_Renamed(c>>1,s)}}catch(d){throw"Error.checkAndNudgePoints"}}return i}sampleGridx(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,y,m,g){var v=ve.quadrilateralToQuadrilateral(n,r,i,o,s,a,u,c,l,h,d,f,p,y,m,g);return this.sampleGrid3(t,{},e,v)}}let we=(()=>{class t{constructor(t,e,n){this.ordinal_Renamed_Field=t,this.bits=e,this.name=n}static forBits(t){if(t<0||t>=this.FOR_BITS.length)throw"ArgumentException";return this.FOR_BITS[t]}get Bits(){return this.bits}get Name(){return this.name}ordinal(){return this.ordinal_Renamed_Field}}return t.L=new t(0,1,"L"),t.M=new t(1,0,"M"),t.Q=new t(2,3,"Q"),t.H=new t(3,2,"H"),t.FOR_BITS=new Array(t.M,t.L,t.H,t.Q),t})(),Ee=(()=>{class t{constructor(t){this.Equals=function(t){return this.errorCorrectionLevel==t.errorCorrectionLevel&&this.dataMask==t.dataMask},this.errorCorrectionLevel=we.forBits(t>>3&3),this.dataMask=7&t}get ErrorCorrectionLevel(){return this.errorCorrectionLevel}get DataMask(){return this.dataMask}GetHashCode(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask}static URShift(t,e){return t>=0?t>>e:(t>>e)+(2<<~e)}static numBitsDiffering(e,n){return t.BITS_SET_IN_HALF_BYTE[15&(e^=n)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,4)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,8)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,12)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,16)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,20)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,24)]+t.BITS_SET_IN_HALF_BYTE[15&this.URShift(e,28)]}static decodeFormatInformation(e){var n=this.doDecodeFormatInformation(e);return null!=n?n:this.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e){for(var n=4294967295,r=0,i=0;i<t.FORMAT_INFO_DECODE_LOOKUP.length;i++){var o=t.FORMAT_INFO_DECODE_LOOKUP[i],s=o[0];if(s==e)return new t(o[1]);var a=t.numBitsDiffering(e,s);a<n&&(r=o[1],n=a)}return n<=3?new t(r):null}static forBits(e){if(e<0||e>=t.FOR_BITS.length)throw"ArgumentException";return t.FOR_BITS[e]}}return t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),t.BITS_SET_IN_HALF_BYTE=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4),t.L=new we(0,1,"L"),t.M=new we(1,0,"M"),t.Q=new we(2,3,"Q"),t.H=new we(3,2,"H"),t.FOR_BITS=new Array(t.M,t.L,t.H,t.Q),t})();class Ce{constructor(t,e){this.count=t,this.dataCodewords=e}get Count(){return this.count}get DataCodewords(){return this.dataCodewords}}class Se{constructor(t,e,n){this.getECBlocks=function(){return this.ecBlocks},this.ecCodewordsPerBlock=t,this.ecBlocks=n?new Array(e,n):new Array(e)}get ECCodewordsPerBlock(){return this.ecCodewordsPerBlock}get TotalECCodewords(){return this.ecCodewordsPerBlock*this.NumBlocks}get NumBlocks(){for(var t=0,e=0;e<this.ecBlocks.length;e++)t+=this.ecBlocks[e].length;return t}}let Te=(()=>{class t{constructor(t,e,n,r,i,o){this.buildFunctionPattern=function(){var t=this.DimensionForVersion,e=new be(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var i=this.alignmentPatternCenters[r]-2,o=0;o<n;o++)0==r&&(0==o||o==n-1)||r==n-1&&0==o||e.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},this.getECBlocksForLevel=function(t){return this.ecBlocks[t.ordinal()]},this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=new Array(n,r,i,o);for(var s=0,a=n.ECCodewordsPerBlock,u=n.getECBlocks(),c=0;c<u.length;c++){var l=u[c];s+=l.Count*(l.DataCodewords+a)}this.totalCodewords=s}get VersionNumber(){return this.versionNumber}get AlignmentPatternCenters(){return this.alignmentPatternCenters}get TotalCodewords(){return this.totalCodewords}get DimensionForVersion(){return 17+4*this.versionNumber}static getVersionForNumber(e){if(e<1||e>40)throw"ArgumentException";return t.VERSIONS[e-1]}static getProvisionalVersionForDimension(e){if(e%4!=1)throw"Error getProvisionalVersionForDimension";try{return t.getVersionForNumber(e-17>>2)}catch(n){throw"Error getVersionForNumber"}}static decodeVersionInformation(e){for(var n=4294967295,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o==e)return this.getVersionForNumber(i+7);var s=Ee.numBitsDiffering(e,o);s<n&&(r=i+7,n=s)}return n<=3?this.getVersionForNumber(r):null}static buildVersions(){return new Array(new t(1,new Array,new Se(7,new Ce(1,19)),new Se(10,new Ce(1,16)),new Se(13,new Ce(1,13)),new Se(17,new Ce(1,9))),new t(2,new Array(6,18),new Se(10,new Ce(1,34)),new Se(16,new Ce(1,28)),new Se(22,new Ce(1,22)),new Se(28,new Ce(1,16))),new t(3,new Array(6,22),new Se(15,new Ce(1,55)),new Se(26,new Ce(1,44)),new Se(18,new Ce(2,17)),new Se(22,new Ce(2,13))),new t(4,new Array(6,26),new Se(20,new Ce(1,80)),new Se(18,new Ce(2,32)),new Se(26,new Ce(2,24)),new Se(16,new Ce(4,9))),new t(5,new Array(6,30),new Se(26,new Ce(1,108)),new Se(24,new Ce(2,43)),new Se(18,new Ce(2,15),new Ce(2,16)),new Se(22,new Ce(2,11),new Ce(2,12))),new t(6,new Array(6,34),new Se(18,new Ce(2,68)),new Se(16,new Ce(4,27)),new Se(24,new Ce(4,19)),new Se(28,new Ce(4,15))),new t(7,new Array(6,22,38),new Se(20,new Ce(2,78)),new Se(18,new Ce(4,31)),new Se(18,new Ce(2,14),new Ce(4,15)),new Se(26,new Ce(4,13),new Ce(1,14))),new t(8,new Array(6,24,42),new Se(24,new Ce(2,97)),new Se(22,new Ce(2,38),new Ce(2,39)),new Se(22,new Ce(4,18),new Ce(2,19)),new Se(26,new Ce(4,14),new Ce(2,15))),new t(9,new Array(6,26,46),new Se(30,new Ce(2,116)),new Se(22,new Ce(3,36),new Ce(2,37)),new Se(20,new Ce(4,16),new Ce(4,17)),new Se(24,new Ce(4,12),new Ce(4,13))),new t(10,new Array(6,28,50),new Se(18,new Ce(2,68),new Ce(2,69)),new Se(26,new Ce(4,43),new Ce(1,44)),new Se(24,new Ce(6,19),new Ce(2,20)),new Se(28,new Ce(6,15),new Ce(2,16))),new t(11,new Array(6,30,54),new Se(20,new Ce(4,81)),new Se(30,new Ce(1,50),new Ce(4,51)),new Se(28,new Ce(4,22),new Ce(4,23)),new Se(24,new Ce(3,12),new Ce(8,13))),new t(12,new Array(6,32,58),new Se(24,new Ce(2,92),new Ce(2,93)),new Se(22,new Ce(6,36),new Ce(2,37)),new Se(26,new Ce(4,20),new Ce(6,21)),new Se(28,new Ce(7,14),new Ce(4,15))),new t(13,new Array(6,34,62),new Se(26,new Ce(4,107)),new Se(22,new Ce(8,37),new Ce(1,38)),new Se(24,new Ce(8,20),new Ce(4,21)),new Se(22,new Ce(12,11),new Ce(4,12))),new t(14,new Array(6,26,46,66),new Se(30,new Ce(3,115),new Ce(1,116)),new Se(24,new Ce(4,40),new Ce(5,41)),new Se(20,new Ce(11,16),new Ce(5,17)),new Se(24,new Ce(11,12),new Ce(5,13))),new t(15,new Array(6,26,48,70),new Se(22,new Ce(5,87),new Ce(1,88)),new Se(24,new Ce(5,41),new Ce(5,42)),new Se(30,new Ce(5,24),new Ce(7,25)),new Se(24,new Ce(11,12),new Ce(7,13))),new t(16,new Array(6,26,50,74),new Se(24,new Ce(5,98),new Ce(1,99)),new Se(28,new Ce(7,45),new Ce(3,46)),new Se(24,new Ce(15,19),new Ce(2,20)),new Se(30,new Ce(3,15),new Ce(13,16))),new t(17,new Array(6,30,54,78),new Se(28,new Ce(1,107),new Ce(5,108)),new Se(28,new Ce(10,46),new Ce(1,47)),new Se(28,new Ce(1,22),new Ce(15,23)),new Se(28,new Ce(2,14),new Ce(17,15))),new t(18,new Array(6,30,56,82),new Se(30,new Ce(5,120),new Ce(1,121)),new Se(26,new Ce(9,43),new Ce(4,44)),new Se(28,new Ce(17,22),new Ce(1,23)),new Se(28,new Ce(2,14),new Ce(19,15))),new t(19,new Array(6,30,58,86),new Se(28,new Ce(3,113),new Ce(4,114)),new Se(26,new Ce(3,44),new Ce(11,45)),new Se(26,new Ce(17,21),new Ce(4,22)),new Se(26,new Ce(9,13),new Ce(16,14))),new t(20,new Array(6,34,62,90),new Se(28,new Ce(3,107),new Ce(5,108)),new Se(26,new Ce(3,41),new Ce(13,42)),new Se(30,new Ce(15,24),new Ce(5,25)),new Se(28,new Ce(15,15),new Ce(10,16))),new t(21,new Array(6,28,50,72,94),new Se(28,new Ce(4,116),new Ce(4,117)),new Se(26,new Ce(17,42)),new Se(28,new Ce(17,22),new Ce(6,23)),new Se(30,new Ce(19,16),new Ce(6,17))),new t(22,new Array(6,26,50,74,98),new Se(28,new Ce(2,111),new Ce(7,112)),new Se(28,new Ce(17,46)),new Se(30,new Ce(7,24),new Ce(16,25)),new Se(24,new Ce(34,13))),new t(23,new Array(6,30,54,74,102),new Se(30,new Ce(4,121),new Ce(5,122)),new Se(28,new Ce(4,47),new Ce(14,48)),new Se(30,new Ce(11,24),new Ce(14,25)),new Se(30,new Ce(16,15),new Ce(14,16))),new t(24,new Array(6,28,54,80,106),new Se(30,new Ce(6,117),new Ce(4,118)),new Se(28,new Ce(6,45),new Ce(14,46)),new Se(30,new Ce(11,24),new Ce(16,25)),new Se(30,new Ce(30,16),new Ce(2,17))),new t(25,new Array(6,32,58,84,110),new Se(26,new Ce(8,106),new Ce(4,107)),new Se(28,new Ce(8,47),new Ce(13,48)),new Se(30,new Ce(7,24),new Ce(22,25)),new Se(30,new Ce(22,15),new Ce(13,16))),new t(26,new Array(6,30,58,86,114),new Se(28,new Ce(10,114),new Ce(2,115)),new Se(28,new Ce(19,46),new Ce(4,47)),new Se(28,new Ce(28,22),new Ce(6,23)),new Se(30,new Ce(33,16),new Ce(4,17))),new t(27,new Array(6,34,62,90,118),new Se(30,new Ce(8,122),new Ce(4,123)),new Se(28,new Ce(22,45),new Ce(3,46)),new Se(30,new Ce(8,23),new Ce(26,24)),new Se(30,new Ce(12,15),new Ce(28,16))),new t(28,new Array(6,26,50,74,98,122),new Se(30,new Ce(3,117),new Ce(10,118)),new Se(28,new Ce(3,45),new Ce(23,46)),new Se(30,new Ce(4,24),new Ce(31,25)),new Se(30,new Ce(11,15),new Ce(31,16))),new t(29,new Array(6,30,54,78,102,126),new Se(30,new Ce(7,116),new Ce(7,117)),new Se(28,new Ce(21,45),new Ce(7,46)),new Se(30,new Ce(1,23),new Ce(37,24)),new Se(30,new Ce(19,15),new Ce(26,16))),new t(30,new Array(6,26,52,78,104,130),new Se(30,new Ce(5,115),new Ce(10,116)),new Se(28,new Ce(19,47),new Ce(10,48)),new Se(30,new Ce(15,24),new Ce(25,25)),new Se(30,new Ce(23,15),new Ce(25,16))),new t(31,new Array(6,30,56,82,108,134),new Se(30,new Ce(13,115),new Ce(3,116)),new Se(28,new Ce(2,46),new Ce(29,47)),new Se(30,new Ce(42,24),new Ce(1,25)),new Se(30,new Ce(23,15),new Ce(28,16))),new t(32,new Array(6,34,60,86,112,138),new Se(30,new Ce(17,115)),new Se(28,new Ce(10,46),new Ce(23,47)),new Se(30,new Ce(10,24),new Ce(35,25)),new Se(30,new Ce(19,15),new Ce(35,16))),new t(33,new Array(6,30,58,86,114,142),new Se(30,new Ce(17,115),new Ce(1,116)),new Se(28,new Ce(14,46),new Ce(21,47)),new Se(30,new Ce(29,24),new Ce(19,25)),new Se(30,new Ce(11,15),new Ce(46,16))),new t(34,new Array(6,34,62,90,118,146),new Se(30,new Ce(13,115),new Ce(6,116)),new Se(28,new Ce(14,46),new Ce(23,47)),new Se(30,new Ce(44,24),new Ce(7,25)),new Se(30,new Ce(59,16),new Ce(1,17))),new t(35,new Array(6,30,54,78,102,126,150),new Se(30,new Ce(12,121),new Ce(7,122)),new Se(28,new Ce(12,47),new Ce(26,48)),new Se(30,new Ce(39,24),new Ce(14,25)),new Se(30,new Ce(22,15),new Ce(41,16))),new t(36,new Array(6,24,50,76,102,128,154),new Se(30,new Ce(6,121),new Ce(14,122)),new Se(28,new Ce(6,47),new Ce(34,48)),new Se(30,new Ce(46,24),new Ce(10,25)),new Se(30,new Ce(2,15),new Ce(64,16))),new t(37,new Array(6,28,54,80,106,132,158),new Se(30,new Ce(17,122),new Ce(4,123)),new Se(28,new Ce(29,46),new Ce(14,47)),new Se(30,new Ce(49,24),new Ce(10,25)),new Se(30,new Ce(24,15),new Ce(46,16))),new t(38,new Array(6,32,58,84,110,136,162),new Se(30,new Ce(4,122),new Ce(18,123)),new Se(28,new Ce(13,46),new Ce(32,47)),new Se(30,new Ce(48,24),new Ce(14,25)),new Se(30,new Ce(42,15),new Ce(32,16))),new t(39,new Array(6,26,54,82,110,138,166),new Se(30,new Ce(20,117),new Ce(4,118)),new Se(28,new Ce(40,47),new Ce(7,48)),new Se(30,new Ce(43,24),new Ce(22,25)),new Se(30,new Ce(10,15),new Ce(67,16))),new t(40,new Array(6,30,58,86,114,142,170),new Se(30,new Ce(19,118),new Ce(6,119)),new Se(28,new Ce(18,47),new Ce(31,48)),new Se(30,new Ce(34,24),new Ce(34,25)),new Se(30,new Ce(20,15),new Ce(61,16))))}}return t.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),t.VERSIONS=t.buildVersions(),t})();Array.prototype.remove||(Array.prototype.remove=function(t){var e=this.slice(t+1||this.length);return this.length=t<0?this.length+t:t,this.push.apply(this,e)});let Oe=(()=>{class t{constructor(t,e,n){this.incrementCount=function(){this.count++},this.aboutEquals=function(t,e,n){if(Math.abs(e-this.y)<=t&&Math.abs(n-this.x)<=t){var r=Math.abs(t-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1},this.x=t,this.y=e,this.count=1,this.estimatedModuleSize=n}get EstimatedModuleSize(){return this.estimatedModuleSize}get Count(){return this.count}get X(){return this.x}get Y(){return this.y}}return t.MIN_SKIP=3,t.MAX_MODULES=57,t.INTEGER_MATH_SHIFT=8,t.CENTER_QUORUM=2,t})();class Ie{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}get BottomLeft(){return this.bottomLeft}get TopLeft(){return this.topLeft}get TopRight(){return this.topRight}}class xe{constructor(t,e){this.possibleCenters=new Array,this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.orderBestPatterns=function(t){function e(t,e){let n=t.X-e.X,r=t.Y-e.Y;return Math.sqrt(n*n+r*r)}var n,r,i,o=e(t[0],t[1]),s=e(t[1],t[2]),a=e(t[0],t[2]);if(s>=o&&s>=a?(r=t[0],n=t[1],i=t[2]):a>=s&&a>=o?(r=t[1],n=t[0],i=t[2]):(r=t[2],n=t[0],i=t[1]),function(t,e,n){var r=e.x,i=e.y;return(n.x-r)*(t.y-i)-(n.y-i)*(t.x-r)}(n,r,i)<0){var u=n;n=i,i=u}t[0]=n,t[1]=r,t[2]=i},this.foundPatternCross=function(t){for(var e=0,n=0;n<5;n++){var r=t[n];if(0==r)return!1;e+=r}if(e<7)return!1;var i=Math.floor((e<<Oe.INTEGER_MATH_SHIFT)/7),o=Math.floor(i/2);return Math.abs(i-(t[0]<<Oe.INTEGER_MATH_SHIFT))<o&&Math.abs(i-(t[1]<<Oe.INTEGER_MATH_SHIFT))<o&&Math.abs(3*i-(t[2]<<Oe.INTEGER_MATH_SHIFT))<3*o&&Math.abs(i-(t[3]<<Oe.INTEGER_MATH_SHIFT))<o&&Math.abs(i-(t[4]<<Oe.INTEGER_MATH_SHIFT))<o},this.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},this.crossCheckVertical=function(t,e,n,r){for(var i=this.image,o=this.height,s=this.CrossCheckStateCount,a=t;a>=0&&i[e+a*this.width];)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i[e+a*this.width]&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&i[e+a*this.width]&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=t+1;a<o&&i[e+a*this.width];)s[2]++,a++;if(a==o)return NaN;for(;a<o&&!i[e+a*this.width]&&s[3]<n;)s[3]++,a++;if(a==o||s[3]>=n)return NaN;for(;a<o&&i[e+a*this.width]&&s[4]<n;)s[4]++,a++;return s[4]>=n||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-r)>=2*r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,a):NaN},this.crossCheckHorizontal=function(t,e,n,r){for(var i=this.image,o=this.width,s=this.CrossCheckStateCount,a=t;a>=0&&i[a+e*this.width];)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i[a+e*this.width]&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&i[a+e*this.width]&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=t+1;a<o&&i[a+e*this.width];)s[2]++,a++;if(a==o)return NaN;for(;a<o&&!i[a+e*this.width]&&s[3]<n;)s[3]++,a++;if(a==o||s[3]>=n)return NaN;for(;a<o&&i[a+e*this.width]&&s[4]<n;)s[4]++,a++;return s[4]>=n||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-r)>=r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,a):NaN},this.handlePossibleCenter=function(t,e,n){var r=t[0]+t[1]+t[2]+t[3]+t[4],i=this.centerFromEnd(t,n),o=this.crossCheckVertical(e,Math.floor(i),t[2],r);if(!isNaN(o)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(o),t[2],r),!isNaN(i))){for(var s=r/7,a=!1,u=this.possibleCenters.length,c=0;c<u;c++){var l=this.possibleCenters[c];if(l.aboutEquals(s,o,i)){l.incrementCount(),a=!0;break}}if(!a){var h=new Oe(i,o,s);this.possibleCenters.push(h),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(h)}return!0}return!1},this.selectBestPatterns=function(){var t=this.possibleCenters.length;if(t<3)throw`Couldn't find enough finder patterns (found: ${t})`;if(t>3){for(var e=0,n=0,r=0;r<t;r++){var i=this.possibleCenters[r].EstimatedModuleSize;e+=i,n+=i*i}var o=e/t;this.possibleCenters.sort(function(t,e){var n=Math.abs(e.EstimatedModuleSize-o),r=Math.abs(t.EstimatedModuleSize-o);return n<r?-1:n==r?0:1});var s=Math.sqrt(n/t-o*o),a=Math.max(.2*o,s);for(r=this.possibleCenters.length-1;r>=0;r--)Math.abs(this.possibleCenters[r].EstimatedModuleSize-o)>a&&this.possibleCenters.remove(r)}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(t,e){return t.count>e.count?-1:t.count<e.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var t=this.possibleCenters.length;if(t<=1)return 0;for(var e=null,n=0;n<t;n++){var r=this.possibleCenters[n];if(r.Count>=Oe.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.X-r.X)-Math.abs(e.Y-r.Y))/2);e=r}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var t=0,e=0,n=this.possibleCenters.length,r=0;r<n;r++){var i=this.possibleCenters[r];i.Count>=Oe.CENTER_QUORUM&&(t++,e+=i.EstimatedModuleSize)}if(t<3)return!1;var o=e/n,s=0;for(r=0;r<n;r++)i=this.possibleCenters[r],s+=Math.abs(i.EstimatedModuleSize-o);return s<=.05*e},this.findFinderPattern=function(t){this.image=t;var e=this.height,n=this.width,r=Math.floor(3*e/(4*Oe.MAX_MODULES));r<Oe.MIN_SKIP&&(r=Oe.MIN_SKIP);for(var i=!1,o=new Array(5),s=r-1;s<e&&!i;s+=r){o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0;for(var a=0,u=0;u<n;u++)if(t[u+s*this.width])1==(1&a)&&a++,o[a]++;else if(0==(1&a))if(4==a)if(this.foundPatternCross(o)){if(this.handlePossibleCenter(o,s,u))if(r=2,this.hasSkipped)i=this.haveMultiplyConfirmedCenters();else{var c=this.findRowSkip();c>o[2]&&(s+=c-o[2]-r,u=n-1)}else{do{u++}while(u<n&&!t[u+s*this.width]);u--}a=0,o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0}else o[0]=o[2],o[1]=o[3],o[2]=o[4],o[3]=1,o[4]=0,a=3;else o[++a]++;else o[a]++;this.foundPatternCross(o)&&this.handlePossibleCenter(o,s,n)&&(r=o[0],this.hasSkipped&&(i=this.haveMultiplyConfirmedCenters()))}var l=this.selectBestPatterns();return this.orderBestPatterns(l),new Ie(l)},this.width=t,this.height=e}get CrossCheckStateCount(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}}class ke{constructor(t,e){this.bits=t,this.points=e}}class Ae{constructor(t,e,n,r){this.calculateModuleSizeOneWay=function(t,e){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y)),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},this.calculateModuleSize=function(t,e,n){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,n))/2},this.distance=function(t,e){let n=t.X-e.X,r=t.Y-e.Y;return Math.sqrt(n*n+r*r)},this.computeDimension=function(t,e,n,r){var i=7+(Math.round(this.distance(t,e)/r)+Math.round(this.distance(t,n)/r)>>1);switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw"Error"}return i},this.findAlignmentInRegion=function(t,e,n,r){var i=Math.floor(r*t),o=Math.max(0,e-i),s=Math.min(this.width-1,e+i);if(s-o<3*t)throw"Error";var a=Math.max(0,n-i),u=Math.min(this.height-1,n+i);return new ge(this.image,o,a,s-o,u-a,t,this.width,this.height,this.resultPointCallback).find()},this.createTransform=function(t,e,n,r,i){var o,s,a,u,c=i-3.5;return null!=r?(o=r.X,s=r.Y,a=u=c-3):(o=e.X-t.X+n.X,s=e.Y-t.Y+n.Y,a=u=c),ve.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,a,u,3.5,c,t.X,t.Y,e.X,e.Y,o,s,n.X,n.Y)},this.sampleGrid=function(t,e,n){return new _e(this.width,this.height).sampleGrid3(t,this.rawImage,n,e)},this.detect=function(){var t=new xe(this.width,this.height).findFinderPattern(this.image);return this.processFinderPatternInfo(t)},this.image=t,this.rawImage=e,this.height=r,this.width=n}sizeOfBlackWhiteBlackRun(t,e,n,r){var i=Math.abs(r-e)>Math.abs(n-t);if(i){var o=t;t=e,e=o,o=n,n=r,r=o}for(var s=Math.abs(n-t),a=Math.abs(r-e),u=-s>>1,c=e<r?1:-1,l=t<n?1:-1,h=0,d=t,f=e;d!=n;d+=l){var p=i?f:d,y=i?d:f;if(1==h?this.image[p+y*this.width]&&h++:this.image[p+y*this.width]||h++,3==h){var m=d-t,g=f-e;return Math.sqrt(m*m+g*g)}if((u+=a)>0){if(f==r)break;f+=c,u-=s}}var v=n-t,b=r-e;return Math.sqrt(v*v+b*b)}sizeOfBlackWhiteBlackRunBothWays(t,e,n,r){var i=this.sizeOfBlackWhiteBlackRun(t,e,n,r),o=1,s=t-(n-t);s<0?(o=t/(t-s),s=0):s>=this.width&&(o=(this.width-1-t)/(s-t),s=this.width-1);var a=Math.floor(e-(r-e)*o);return o=1,a<0?(o=e/(e-a),a=0):a>=this.height&&(o=(this.height-1-e)/(a-e),a=this.height-1),s=Math.floor(t+(s-t)*o),(i+=this.sizeOfBlackWhiteBlackRun(t,e,s,a))-1}processFinderPatternInfo(t){var e=t.TopLeft,n=t.TopRight,r=t.BottomLeft,i=this.calculateModuleSize(e,n,r);if(i<1)throw"Error";var o=this.computeDimension(e,n,r,i),s=Te.getProvisionalVersionForDimension(o),a=null;if(s.AlignmentPatternCenters.length>0)for(var u=n.Y-e.Y+r.Y,c=1-3/(s.DimensionForVersion-7),l=Math.floor(e.X+c*(n.X-e.X+r.X-e.X)),h=Math.floor(e.Y+c*(u-e.Y)),d=4;d<=16;d<<=1){a=this.findAlignmentInRegion(i,l,h,d);break}var f,p=this.createTransform(e,n,r,a,o),y=this.sampleGrid(this.image,p,o);return f=null==a?new Array(r,e,n):new Array(r,e,n,a),new ke(y,f)}}class Ne{constructor(t,e){if(this.divide=function(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(t.Zero)throw"Divide by 0";for(var e=this.field.Zero,n=this,r=t.getCoefficient(t.Degree),i=this.field.inverse(r);n.Degree>=t.Degree&&!n.Zero;){var o=n.Degree-t.Degree,s=this.field.multiply(n.getCoefficient(n.Degree),i),a=t.multiplyByMonomial(o,s),u=this.field.buildMonomial(o,s);e=e.addOrSubtract(u),n=n.addOrSubtract(a)}return new Array(e,n)},null==e||0==e.length)throw"System.ArgumentException";this.field=t;var n=e.length;if(n>1&&0==e[0]){for(var r=1;r<n&&0==e[r];)r++;if(r==n)this.coefficients=t.Zero.coefficients;else{this.coefficients=new Array(n-r);for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=0;for(var o=0;o<this.coefficients.length;o++)this.coefficients[o]=e[r+o]}}else this.coefficients=e}get Zero(){return 0==this.coefficients[0]}get Degree(){return this.coefficients.length-1}get Coefficients(){return this.coefficients}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0==t)return this.getCoefficient(0);var e=this.coefficients.length;if(1==t){for(var n=0,r=0;r<e;r++)n=De.addOrSubtract(n,this.coefficients[r]);return n}var i=this.coefficients[0];for(r=1;r<e;r++)i=De.addOrSubtract(this.field.multiply(t,i),this.coefficients[r]);return i}addOrSubtract(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return t;if(t.Zero)return this;var e=this.coefficients,n=t.coefficients;if(e.length>n.length){var r=e;e=n,n=r}for(var i=new Array(n.length),o=n.length-e.length,s=0;s<o;s++)i[s]=n[s];for(var a=o;a<n.length;a++)i[a]=De.addOrSubtract(e[a-o],n[a]);return new Ne(this.field,i)}multiply1(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||t.Zero)return this.field.Zero;for(var e=this.coefficients,n=e.length,r=t.coefficients,i=r.length,o=new Array(n+i-1),s=0;s<n;s++)for(var a=e[s],u=0;u<i;u++)o[s+u]=De.addOrSubtract(o[s+u],this.field.multiply(a,r[u]));return new Ne(this.field,o)}multiply2(t){if(0==t)return this.field.Zero;if(1==t)return this;for(var e=this.coefficients.length,n=new Array(e),r=0;r<e;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new Ne(this.field,n)}multiplyByMonomial(t,e){if(t<0)throw"System.ArgumentException";if(0==e)return this.field.Zero;for(var n=this.coefficients.length,r=new Array(n+t),i=0;i<r.length;i++)r[i]=0;for(i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new Ne(this.field,r)}}let De=(()=>{class t{constructor(t){this.expTable=new Array(256),this.logTable=new Array(256);for(var e=1,n=0;n<256;n++)this.expTable[n]=e,(e<<=1)>=256&&(e^=t);for(n=0;n<255;n++)this.logTable[this.expTable[n]]=n;var r=new Array(1);r[0]=0,this.zero=new Ne(this,new Array(r));var i=new Array(1);i[0]=1,this.one=new Ne(this,new Array(i))}get Zero(){return this.zero}get One(){return this.one}buildMonomial(t,e){if(t<0)throw"System.ArgumentException";if(0==e)return this.zero;for(var n=new Array(t+1),r=0;r<n.length;r++)n[r]=0;return n[0]=e,new Ne(this,n)}exp(t){return this.expTable[t]}log(t){if(0==t)throw"System.ArgumentException";return this.logTable[t]}inverse(t){if(0==t)throw"System.ArithmeticException";return this.expTable[255-this.logTable[t]]}multiply(t,e){return 0==t||0==e?0:1==t?e:1==e?t:this.expTable[(this.logTable[t]+this.logTable[e])%255]}static addOrSubtract(t,e){return t^e}}return t.QR_CODE_FIELD=new t(285),t.DATA_MATRIX_FIELD=new t(301),t})();class Pe{constructor(t){this.field=t}decode(t,e){for(var n=new Ne(this.field,t),r=new Array(e),i=0;i<r.length;i++)r[i]=0;var o=!0;for(i=0;i<e;i++){var s=n.evaluateAt(this.field.exp(i));r[r.length-1-i]=s,0!=s&&(o=!1)}if(!o){var a=new Ne(this.field,r),u=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),c=u[1],l=this.findErrorLocations(u[0]),h=this.findErrorMagnitudes(c,l,!1);for(i=0;i<l.length;i++){var d=t.length-1-this.field.log(l[i]);if(d<0)throw"ReedSolomonException Bad error location";t[d]=De.addOrSubtract(t[d],h[i])}}}runEuclideanAlgorithm(t,e,n){if(t.Degree<e.Degree){var r=t;t=e,e=r}for(var i=t,o=e,s=this.field.One,a=this.field.Zero,u=this.field.Zero,c=this.field.One;o.Degree>=Math.floor(n/2);){var l=i,h=s,d=u;if(s=a,u=c,(i=o).Zero)throw"r_{i-1} was zero";o=l;for(var f=this.field.Zero,p=i.getCoefficient(i.Degree),y=this.field.inverse(p);o.Degree>=i.Degree&&!o.Zero;){var m=o.Degree-i.Degree,g=this.field.multiply(o.getCoefficient(o.Degree),y);f=f.addOrSubtract(this.field.buildMonomial(m,g)),o=o.addOrSubtract(i.multiplyByMonomial(m,g))}a=f.multiply1(s).addOrSubtract(h),c=f.multiply1(u).addOrSubtract(d)}var v=c.getCoefficient(0);if(0==v)throw"ReedSolomonException sigmaTilde(0) was zero";var b=this.field.inverse(v),_=c.multiply2(b),w=o.multiply2(b);return new Array(_,w)}findErrorLocations(t){var e=t.Degree;if(1==e)return new Array(t.getCoefficient(1));for(var n=new Array(e),r=0,i=1;i<256&&r<e;i++)0==t.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!=e)throw"Error locator degree does not match number of roots";return n}findErrorMagnitudes(t,e,n){for(var r=e.length,i=new Array(r),o=0;o<r;o++){for(var s=this.field.inverse(e[o]),a=1,u=0;u<r;u++)o!=u&&(a=this.field.multiply(a,De.addOrSubtract(1,this.field.multiply(e[u],s))));i[o]=this.field.multiply(t.evaluateAt(s),this.field.inverse(a)),n&&(i[o]=this.field.multiply(i[o],s))}return i}}class je{constructor(){this.isMasked=function(t,e){return 0==(t+e&1)}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}class Re{constructor(){this.isMasked=function(t,e){return 0==(1&t)}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}class Fe{constructor(){this.isMasked=function(t,e){return e%3==0}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}class Me{constructor(){this.isMasked=function(t,e){return(t+e)%3==0}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}class Le{constructor(){this.isMasked=function(t,e){return 0==(this.URShift(t,1)+e/3&1)}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}URShift(t,e){return t>=0?t>>e:(t>>e)+(2<<~e)}}class Ve{constructor(){this.isMasked=function(t,e){var n=t*e;return(1&n)+n%3==0}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}class qe{constructor(){this.isMasked=function(t,e){var n=t*e;return 0==((1&n)+n%3&1)}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}class Be{constructor(){this.isMasked=function(t,e){return 0==((t+e&1)+t*e%3&1)}}unmaskBitMatrix(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}let Ue=(()=>{class t{static forReference(e){if(e<0||e>7)throw"System.ArgumentException";return t.DATA_MASKS[e]}}return t.DATA_MASKS=new Array(new je,new Re,new Fe,new Me,new Le,new Ve,new qe,new Be),t})();class He{constructor(t){var e=t.Dimension;if(e<21||1!=(3&e))throw"Error BitMatrixParser";this.bitMatrix=t}copyBit(t,e,n){return this.bitMatrix.get_Renamed(t,e)?n<<1|1:n<<1}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var n=5;n>=0;n--)t=this.copyBit(8,n,t);if(this.parsedFormatInfo=Ee.decodeFormatInformation(t),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var r=this.bitMatrix.Dimension;t=0;var i=r-8;for(e=r-1;e>=i;e--)t=this.copyBit(e,8,t);for(n=r-7;n<r;n++)t=this.copyBit(8,n,t);if(this.parsedFormatInfo=Ee.decodeFormatInformation(t),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;var t=this.bitMatrix.Dimension,e=t-17>>2;if(e<=6)return Te.getVersionForNumber(e);for(var n=0,r=t-11,i=5;i>=0;i--)for(var o=t-9;o>=r;o--)n=this.copyBit(o,i,n);if(this.parsedVersion=Te.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==t)return this.parsedVersion;for(n=0,o=5;o>=0;o--)for(i=t-9;i>=r;i--)n=this.copyBit(o,i,n);if(this.parsedVersion=Te.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==t)return this.parsedVersion;throw"Error readVersion"}readCodewords(){var t=this.readFormatInformation(),e=this.readVersion(),n=Ue.forReference(t.DataMask),r=this.bitMatrix.Dimension;n.unmaskBitMatrix(this.bitMatrix,r);for(var i=e.buildFunctionPattern(),o=!0,s=new Array(e.TotalCodewords),a=0,u=0,c=0,l=r-1;l>0;l-=2){6==l&&l--;for(var h=0;h<r;h++)for(var d=o?r-1-h:h,f=0;f<2;f++)i.get_Renamed(l-f,d)||(c++,u<<=1,this.bitMatrix.get_Renamed(l-f,d)&&(u|=1),8==c&&(s[a++]=u,c=0,u=0));o=!o}if(a!=e.TotalCodewords)throw"Error readCodewords";return s}}class ze{constructor(t,e){this.numDataCodewords=t,this.codewords=e}get NumDataCodewords(){return this.numDataCodewords}get Codewords(){return this.codewords}static getDataBlocks(t,e,n){if(t.length!=e.TotalCodewords)throw"ArgumentException";for(var r=e.getECBlocksForLevel(n),i=0,o=r.getECBlocks(),s=0;s<o.length;s++)i+=o[s].Count;for(var a=new Array(i),u=0,c=0;c<o.length;c++){var l=o[c];for(s=0;s<l.Count;s++){var h=l.DataCodewords;a[u++]=new ze(h,new Array(r.ECCodewordsPerBlock+h))}}for(var d=a[0].codewords.length,f=a.length-1;f>=0&&a[f].codewords.length!=d;)f--;f++;var p=d-r.ECCodewordsPerBlock,y=0;for(s=0;s<p;s++)for(c=0;c<u;c++)a[c].codewords[s]=t[y++];for(c=f;c<u;c++)a[c].codewords[p]=t[y++];var m=a[0].codewords.length;for(s=p;s<m;s++)for(c=0;c<u;c++)a[c].codewords[c<f?s:s+1]=t[y++];return a}}let Ke=(()=>{class t{constructor(t,e,n){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=t,this.numErrorCorrectionCode=n,e<=9?this.dataLengthMode=0:e>=10&&e<=26?this.dataLengthMode=1:e>=27&&e<=40&&(this.dataLengthMode=2)}getNextBits(t){var e=0;if(t<this.bitPointer+1){for(var n=0,r=0;r<t;r++)n+=1<<r;return e=(this.blocks[this.blockPointer]&(n<<=this.bitPointer-t+1))>>this.bitPointer-t+1,this.bitPointer-=t,e}if(t<this.bitPointer+1+8){var i=0;for(r=0;r<this.bitPointer+1;r++)i+=1<<r;return e=(this.blocks[this.blockPointer]&i)<<t-(this.bitPointer+1),this.blockPointer++,e+=this.blocks[this.blockPointer]>>8-(t-(this.bitPointer+1)),this.bitPointer=this.bitPointer-t%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),e}if(t<this.bitPointer+1+16){i=0;var o=0;for(r=0;r<this.bitPointer+1;r++)i+=1<<r;var s=(this.blocks[this.blockPointer]&i)<<t-(this.bitPointer+1);this.blockPointer++;var a=this.blocks[this.blockPointer]<<t-(this.bitPointer+1+8);for(this.blockPointer++,r=0;r<t-(this.bitPointer+1+8);r++)o+=1<<r;return e=s+a+((this.blocks[this.blockPointer]&(o<<=8-(t-(this.bitPointer+1+8))))>>8-(t-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(t-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),e}return 0}NextMode(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)}getDataLength(e){for(var n=0;e>>n!=1;)n++;return this.getNextBits(t.sizeOfDataLengthInfo[this.dataLengthMode][n])}getRomanAndFigureString(t){var e=t,n=0,r="",i=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{e>1?(n=this.getNextBits(11),r+=i[Math.floor(n/45)],r+=i[n%45],e-=2):1==e&&(r+=i[n=this.getNextBits(6)],e-=1)}while(e>0);return r}getFigureString(t){var e=t,n=0,r="";do{e>=3?((n=this.getNextBits(10))<100&&(r+="0"),n<10&&(r+="0"),e-=3):2==e?((n=this.getNextBits(7))<10&&(r+="0"),e-=2):1==e&&(n=this.getNextBits(4),e-=1),r+=n}while(e>0);return r}get8bitByteArray(t){var e=t,n=0,r=new Array;do{n=this.getNextBits(8),r.push(n),e--}while(e>0);return r}getKanjiString(t){var e=t,n=0,r="";do{var i=((n=this.getNextBits(13))/192<<8)+n%192;r+=String.fromCharCode(i+33088<=40956?i+33088:i+49472),e--}while(e>0);return r}get DataByte(){for(var t=new Array;;){var e=this.NextMode();if(0==e){if(t.length>0)break;throw"Empty data block"}if(1!=e&&2!=e&&4!=e&&8!=e)throw"Invalid mode: "+e+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";let s=this.getDataLength(e);if(s<1)throw"Invalid data length: "+s;switch(e){case 1:for(var n=this.getFigureString(s),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);t.push(r);break;case 2:for(n=this.getRomanAndFigureString(s),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);t.push(r);break;case 4:var o=this.get8bitByteArray(s);t.push(o);break;case 8:n=this.getKanjiString(s),t.push(n)}}return t}}return t.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],t})();class Ge{constructor(){this.rsDecoder=new Pe(De.QR_CODE_FIELD),this.decode=function(t){for(var e=new He(t),n=e.readVersion(),r=e.readFormatInformation().ErrorCorrectionLevel,i=e.readCodewords(),o=ze.getDataBlocks(i,n,r),s=0,a=0;a<o.length;a++)s+=o[a].NumDataCodewords;for(var u=new Array(s),c=0,l=0;l<o.length;l++){var h=o[l],d=h.Codewords,f=h.NumDataCodewords;for(this.correctErrors(d,f),a=0;a<f;a++)u[c++]=d[a]}return new Ke(u,n.VersionNumber,r.Bits)}}correctErrors(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=255&t[i];var o=t.length-e;try{this.rsDecoder.decode(r,o)}catch(s){throw s}for(i=0;i<e;i++)t[i]=r[i]}}class We{constructor(){this.debug=!1,this.maxImgSize=1048576,this.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]]}decode(t){let e=t.getContext("2d");return this.width=t.width,this.height=t.height,this.imagedata=e.getImageData(0,0,this.width,this.height),this.result=this.process(e),null!=this.myCallback&&this.myCallback(this.result),this.result}process(t){var e=(new Date).getTime(),n=this.grayScaleToBitmap(this.grayscale());if(this.debug){for(var r=0;r<this.height;r++)for(var i=0;i<this.width;i++){var o=4*i+r*this.width*4;this.imagedata.data[o]=0,this.imagedata.data[o+1]=0,this.imagedata.data[o+2]=n[i+r*this.width]?255:0}t.putImageData(this.imagedata,0,0)}var s=new Ae(n,this.imagedata,this.width,this.height).detect();this.debug&&t.putImageData(this.imagedata,0,0);for(var a=(new Ge).decode(s.bits).DataByte,u="",c=0;c<a.length;c++)for(var l=0;l<a[c].length;l++)u+=String.fromCharCode(a[c][l]);var h=(new Date).getTime();return console.log(h-e),u}grayScaleToBitmap(t){for(var e=this.getMiddleBrightnessPerArea(t),n=e.length,r=Math.floor(this.width/n),i=Math.floor(this.height/n),o=new Array(this.height*this.width),s=0;s<n;s++)for(var a=0;a<n;a++)for(var u=0;u<i;u++)for(var c=0;c<r;c++)o[r*a+c+(i*s+u)*this.width]=t[r*a+c+(i*s+u)*this.width]<e[a][s];return o}grayscale(){for(var t=new Array(this.width*this.height),e=0;e<this.height;e++)for(var n=0;n<this.width;n++){var r=this.getPixel(n,e);t[n+e*this.width]=r}return t}getPixel(t,e){if(this.width<t)throw"point error";if(this.height<e)throw"point error";let n=4*t+e*this.width*4;return(33*this.imagedata.data[n]+34*this.imagedata.data[n+1]+33*this.imagedata.data[n+2])/100}getMiddleBrightnessPerArea(t){for(var e=Math.floor(this.width/4),n=Math.floor(this.height/4),r=new Array(4),i=0;i<4;i++){r[i]=new Array(4);for(var o=0;o<4;o++)r[i][o]=new Array(0,0)}for(var s=0;s<4;s++)for(var a=0;a<4;a++){r[a][s][0]=255;for(var u=0;u<n;u++)for(var c=0;c<e;c++){var l=t[e*a+c+(n*s+u)*this.width];l<r[a][s][0]&&(r[a][s][0]=l),l>r[a][s][1]&&(r[a][s][1]=l)}}for(var h=new Array(4),d=0;d<4;d++)h[d]=new Array(4);for(s=0;s<4;s++)for(a=0;a<4;a++)h[a][s]=Math.floor((r[a][s][0]+r[a][s][1])/2);return h}}let Qe=(()=>{class t{constructor(t){this.renderer=t,this.canvasWidth=640,this.canvasHeight=480,this.debug=!1,this.stopAfterScan=!0,this.updateTime=500,this.capturedQr=new r.k,this.foundCameras=new r.k,this.chooseCamera=new he.a,this.canvasHidden=!0}get isCanvasSupported(){const t=this.renderer.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}ngOnInit(){}ngOnDestroy(){this.chooseCamera$.unsubscribe(),this.stopScanning()}ngAfterViewInit(){this.debug&&console.log("[QrScanner] ViewInit, isSupported: ",this.isCanvasSupported),this.isCanvasSupported&&(this.gCtx=this.qrCanvas.nativeElement.getContext("2d"),this.gCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.qrCode=new We,this.debug&&(this.qrCode.debug=!0),this.qrCode.myCallback=t=>this.QrDecodeCallback(t)),this.chooseCamera$=this.chooseCamera.subscribe(t=>this.useDevice(t)),this.getMediaDevices().then(t=>this.foundCameras.next(t))}startScanning(t){this.useDevice(t)}stopScanning(){this.captureTimeout&&(clearTimeout(this.captureTimeout),this.captureTimeout=0),this.canvasHidden=!1;const t=this.stream&&this.stream.getTracks().length&&this.stream;t&&(t.getTracks().forEach(t=>t.enabled&&t.stop()),this.stream=null)}getMediaDevices(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(t=>t).catch(t=>(this.debug&&console.warn("Error",t),[])):Promise.resolve([])}QrDecodeCallback(t){this.stopAfterScan?(this.stopScanning(),this.capturedQr.next(t)):(this.capturedQr.next(t),this.captureTimeout=setTimeout(()=>this.captureToCanvas(),this.updateTime))}captureToCanvas(){try{this.gCtx.drawImage(this.videoElement,0,0,this.canvasWidth,this.canvasHeight),this.qrCode.decode(this.qrCanvas.nativeElement)}catch(Qb){if(this.debug&&console.log("[QrScanner] Thrown",Qb),!this.stream)return;this.captureTimeout=setTimeout(()=>this.captureToCanvas(),this.updateTime)}}setStream(t){this.canvasHidden=!0,this.gCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.stream=t,this.videoElement.srcObject=t,this.captureTimeout=setTimeout(()=>this.captureToCanvas(),this.updateTime)}useDevice(t){const e=navigator;this.captureTimeout&&this.stopScanning(),this.videoElement||(this.videoElement=this.renderer.createElement("video"),this.videoElement.setAttribute("autoplay","true"),this.videoElement.setAttribute("muted","true"),this.renderer.appendChild(this.videoWrapper.nativeElement,this.videoElement));const n=this;let r;r=t?{audio:!1,video:{deviceId:t.deviceId}}:{audio:!1,video:!0},e.mediaDevices.getUserMedia(r).then(function(t){n.setStream(t)}).catch(function(t){return n.debug&&console.warn("Error",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(r.y))},t.\u0275cmp=r.vb({type:t,selectors:[["qr-scanner"]],viewQuery:function(t,e){if(1&t&&(r.bc(de,1),r.bc(fe,1)),2&t){let t;r.Tb(t=r.Ob())&&(e.videoWrapper=t.first),r.Tb(t=r.Ob())&&(e.qrCanvas=t.first)}},inputs:{canvasWidth:"canvasWidth",canvasHeight:"canvasHeight",debug:"debug",stopAfterScan:"stopAfterScan",updateTime:"updateTime",chooseCamera:"chooseCamera"},outputs:{capturedQr:"capturedQr",foundCameras:"foundCameras"},decls:3,vars:2,consts:[[3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[3,"hidden","width","height"],["qrCanvas",""],["videoWrapper",""],["href","http://browsehappy.com/"]],template:function(t,e){1&t&&(r.Eb(0,0),r.Yb(1,pe,5,7,"ng-container",1),r.Yb(2,ye,9,0,"ng-container",2),r.Db()),2&t&&(r.Sb("ngSwitch",e.isCanvasSupported),r.sb(2),r.Sb("ngSwitchCase",!1))},directives:[y,g,m],styles:["[_nghost-%COMP%]   video[_ngcontent-%COMP%] {height: auto; width: 100%;}","[_nghost-%COMP%]   .mirrored[_ngcontent-%COMP%] { transform: rotateY(180deg); -webkit-transform:rotateY(180deg); -moz-transform:rotateY(180deg); }","[_nghost-%COMP%] {}"]}),t})(),Ye=(()=>{class t{static forRoot(){return{ngModule:t}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[[v]]}),t})(),$e=(()=>{class t{constructor(){this.tasks=[]}getInfoPersonal(){return null===localStorage.getItem("MyArray")||(this.tasks=JSON.parse(localStorage.getItem("MyArray")||"{}")),this.tasks}addInforPersonal(t){this.tasks.push(t);let e=[];null===localStorage.getItem("MyArray")?(e.push(t),localStorage.setItem("MyArray",JSON.stringify(e))):(e=JSON.parse(localStorage.getItem("MyArray")),e.push(t),localStorage.setItem("MyArray",JSON.stringify(e)))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Ze{}const Xe="*";function Je(t,e=null){return{type:2,steps:t,options:e}}function tn(t){return{type:6,styles:t,offset:null}}function en(t){Promise.resolve(null).then(t)}class nn{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){en(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class rn{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?en(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function on(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function sn(t){switch(t.length){case 0:return new nn;case 1:return t[0];default:return new rn(t)}}function an(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case Xe:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function un(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&cn(n,"start",t)));break;case"done":t.onDone(()=>r(n&&cn(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&cn(n,"destroy",t)))}}function cn(t,e,n){const r=n.totalTime,i=ln(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function ln(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function hn(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function dn(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let fn=(t,e)=>!1,pn=(t,e)=>!1,yn=(t,e,n)=>[];const mn=on();(mn||"undefined"!=typeof Element)&&(fn=(t,e)=>t.contains(e),pn=(()=>{if(mn||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):pn}})(),yn=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let gn=null,vn=!1;function bn(t){gn||(gn=("undefined"!=typeof document?document.body:null)||{},vn=!!gn.style&&"WebkitAppearance"in gn.style);let e=!0;return gn.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in gn.style,!e&&vn)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in gn.style),e}const _n=pn,wn=fn,En=yn;function Cn(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Sn=(()=>{class t{validateStyleProperty(t){return bn(t)}matchesElement(t,e){return _n(t,e)}containsElement(t,e){return wn(t,e)}query(t,e,n){return En(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new nn(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})(),Tn=(()=>{class t{}return t.NOOP=new Sn,t})();const On="ng-enter",In="ng-leave",xn="ng-trigger",kn=".ng-trigger",An="ng-animating",Nn=".ng-animating";function Dn(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Pn(parseFloat(e[1]),e[2])}function Pn(t,e){switch(e){case"s":return 1e3*t;default:return t}}function jn(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Pn(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Pn(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Rn(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Fn(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Rn(t,n);return n}function Mn(t,e,n){return n?e+":"+n+";":""}function Ln(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Mn(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Mn(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Vn(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Wn(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),on()&&Ln(t))}function qn(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Wn(e);t.style[n]=""}),on()&&Ln(t))}function Bn(t){return Array.isArray(t)?1==t.length?t[0]:Je(t):t}const Un=new RegExp("{{\\s*(.+?)\\s*}}","g");function Hn(t){let e=[];if("string"==typeof t){let n;for(;n=Un.exec(t);)e.push(n[1]);Un.lastIndex=0}return e}function zn(t,e,n){const r=t.toString(),i=r.replace(Un,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Kn(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Gn=/-+([a-z0-9])/g;function Wn(t){return t.replace(Gn,(...t)=>t[1].toUpperCase())}function Qn(t,e){return 0===t||0===e}function Yn(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=Zn(t,e)})}}return e}function $n(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Zn(t,e){return window.getComputedStyle(t)[e]}const Xn="*";function Jn(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(nr(i,s)),"<"!=o[0]||i==Xn&&s==Xn||e.push(nr(s,i))}(t,n,e)):n.push(t),n}const tr=new Set(["true","1"]),er=new Set(["false","0"]);function nr(t,e){const n=tr.has(t)||er.has(t),r=tr.has(e)||er.has(e);return(i,o)=>{let s=t==Xn||t==i,a=e==Xn||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?tr.has(t):er.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?tr.has(e):er.has(e)),s&&a}}const rr=new RegExp("s*:selfs*,?","g");function ir(t,e,n){return new or(t).build(e,n)}class or{constructor(t){this._driver=t}build(t,e){const n=new sr(e);return this._resetContextStyleTimingState(n),$n(this,Bn(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(ar(t)){const e=t;Object.keys(e).forEach(t=>{Hn(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Kn(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=$n(this,Bn(t.animation),e);return{type:1,matchers:Jn(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ur(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>$n(this,t,e)),options:ur(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=$n(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:ur(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return cr(jn(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=cr(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||jn(r,e),cr(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:tn({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=tn(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Xe?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(ar(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Hn(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(ar(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(ar(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:$n(this,Bn(t.animation),e),options:ur(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ur(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ur(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(rr,"")),[t=t.replace(/@\*/g,kn).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Nn),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,hn(e.collectedStyles,e.currentQuerySelector,{});const s=$n(this,Bn(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:ur(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:jn(t.timings,e.errors,!0);return{type:12,animation:$n(this,Bn(t.animation),e),timings:n,options:null}}}class sr{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ar(t){return!Array.isArray(t)&&"object"==typeof t}function ur(t){var e;return t?(t=Rn(t)).params&&(t.params=(e=t.params)?Rn(e):null):t={},t}function cr(t,e,n){return{duration:t,delay:e,easing:n}}function lr(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class hr{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const dr=new RegExp(":enter","g"),fr=new RegExp(":leave","g");function pr(t,e,n,r,i,o={},s={},a,u,c=[]){return(new yr).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class yr{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new hr;const l=new gr(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),$n(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[lr(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Dn(n.duration):null,o=null!=n.delay?Dn(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),$n(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=mr);const t=Dn(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>$n(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Dn(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),$n(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return jn(e.params?zn(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Dn(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=mr);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),$n(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;$n(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const mr={};class gr{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new vr(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Dn(n.duration)),null!=n.delay&&(r.delay=Dn(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=zn(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new gr(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=mr,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new br(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(dr,"."+this._enterClassName)).replace(fr,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class vr{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vr(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Xe,this._currentKeyframe[t]=Xe}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Xe})):Fn(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=zn(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Xe),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Fn(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==Xe&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Kn(t.values()):[],o=e.size?Kn(e.values()):[];if(n){const t=r[0],e=Rn(t);t.offset=0,e.offset=1,r=[t,e]}return lr(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class br extends vr{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Fn(t[0],!1);a.offset=0,i.push(a);const u=Fn(t[0],!1);u.offset=_r(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=Fn(t[r],!1);s.offset=_r((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return lr(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function _r(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class wr{}class Er extends wr{normalizePropertyName(t,e){return Wn(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Cr[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Cr=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Sr(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const Tr={};class Or{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Tr,d=this.buildStyles(n,s&&s.params||Tr,l),f=a&&a.params||Tr,p=this.buildStyles(r,f,l),y=new Set,m=new Map,g=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:pr(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Sr(e,this._triggerName,n,r,v,d,p,[],[],m,g,w,l);_.forEach(t=>{const n=t.element,r=hn(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=hn(g,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&y.add(n)});const E=Kn(y.values());return Sr(e,this._triggerName,n,r,v,d,p,_,E,m,g,w)}}class Ir{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Rn(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=zn(o,r,e)),n[t]=o})}}),n}}class xr{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Ir(t.style,t.options&&t.options.params||{})}),kr(this.states,"true","1"),kr(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Or(t,e,this.states))}),this.fallbackTransition=new Or(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function kr(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Ar=new hr;class Nr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=ir(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=an(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=pr(this._driver,e,i,On,In,{},{},n,Ar,r),o.forEach(t=>{const e=hn(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Xe)})});const a=sn(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=ln(e,"","","");return un(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Dr="ng-animate-queued",Pr="ng-animate-disabled",jr=".ng-animate-disabled",Rr=[],Fr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Mr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Lr{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Rn(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Vr="void",qr=new Lr(Vr);class Br{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Qr(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=hn(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=hn(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Qr(t,xn),Qr(t,"ng-trigger-"+e),a[e]=qr),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Hr(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Qr(t,xn),Qr(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new Lr(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=qr),u.value!==Vr&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{qn(t,n),Vn(t,r)})}return}const c=hn(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(Qr(t,Dr),o.onStart(()=>{Yr(t,Dr)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,kn,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Vr,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&sn(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||qr,a=new Lr(Vr),u=new Hr(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Fr||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Qr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=ln(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,un(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Ur{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Br(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(zr(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!zr(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Qr(t,Pr)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yr(t,Pr))}removeNode(t,e,n,r){if(zr(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return zr(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,kn,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Nn,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return sn(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Fr,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,jr)&&this.markElementAsDisabled(t,!1),this.driver.query(t,jr,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Qr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?sn(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new hr,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Wr(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=On+p++;f.set(e,n),t.forEach(t=>Qr(t,n))});const y=[],m=new Set,g=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(y.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):g.add(t))}const v=new Map,b=Wr(h,Array.from(m));b.forEach((t,e)=>{const n=In+p++;v.set(e,n),t.forEach(t=>Qr(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Yr(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Yr(t,n))}),y.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>qn(i,p.fromStyles)),e.onDestroy(()=>Vn(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>qn(i,p.fromStyles)),e.onDestroy(()=>Vn(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>hn(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{hn(E,e,[]).push(t),t.destroy()})});const S=y.filter(t=>Xr(t,a,u)),T=new Map;Gr(T,this.driver,g,u,Xe).forEach(t=>{Xr(t,a,u)&&S.push(t)});const O=new Map;d.forEach((t,e)=>{Gr(O,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=T.get(t),n=O.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>Vn(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,O,T);if(o.setRealPlayer(n),t===k)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=sn(e)),r.push(o)}}else qn(e,s.fromStyles),o.onDestroy(()=>Vn(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=sn(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<y.length;A++){const t=y[A],e=t.__ng_removed;if(Yr(t,In),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Nn,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?$r(this,t,r):this.processLeaveNode(t)}return y.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Vr;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=hn(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}qn(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new nn(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return Zr(t,e),e}((n.get(h)||Rr).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),y=i.get(h),m=o.get(h),g=an(0,this._normalizer,0,e.keyframes,y,m),v=this._buildPlayer(e,g,p);if(e.subTimeline&&r&&l.add(h),f){const e=new Hr(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{hn(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Qr(t,An));const d=sn(h);return d.onDestroy(()=>{c.forEach(t=>Yr(t,An)),Vn(a,e.toStyles)}),l.forEach(t=>{hn(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new nn(t.duration,t.delay)}}class Hr{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new nn,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>un(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){hn(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function zr(t){return t&&1===t.nodeType}function Kr(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Gr(t,e,n,r,i){const o=[];n.forEach(t=>o.push(Kr(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Mr,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>Kr(t,o[a++])),s}function Wr(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function Qr(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Yr(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function $r(t,e,n){sn(n).onDone(()=>t.processLeaveNode(e))}function Zr(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof rn?Zr(r.players,e):e.push(r)}}function Xr(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Jr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ur(t,e,n),this._timelineEngine=new Nr(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=ir(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new xr(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=dn(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=dn(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ti(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=ni(e[0]),e.length>1&&(r=ni(e[e.length-1]))):e&&(n=ni(e)),n||r?new ei(t,n,r):null}let ei=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Vn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Vn(this._element,this._initialStyles),this._endStyles&&(Vn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(qn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qn(this._element,this._endStyles),this._endStyles=null),Vn(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function ni(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];ri(i)&&(e=e||{},e[i]=t[i])}return e}function ri(t){return"display"===t||"position"===t}const ii="animation",oi="animationend";class si{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=di(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),hi(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),li(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ai(this._element,this._name,"paused")}resume(){ai(this._element,this._name,"running")}setPosition(t){const e=ui(this._element,this._name);this._position=t*this._duration,hi(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),li(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=di(t,"").split(","),r=ci(n,e);r>=0&&(n.splice(r,1),hi(t,"",n.join(",")))}(this._element,this._name))}}function ai(t,e,n){hi(t,"PlayState",n,ui(t,e))}function ui(t,e){const n=di(t,"");return n.indexOf(",")>0?ci(n.split(","),e):ci([n],e)}function ci(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function li(t,e,n){n?t.removeEventListener(oi,e):t.addEventListener(oi,e)}function hi(t,e,n,r){const i=ii+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function di(t,e){return t.style[ii+e]||""}class fi{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new si(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Zn(this.element,n))})}this.currentSnapshot=t}}class pi extends nn{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Cn(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class yi{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return bn(t)}matchesElement(t,e){return _n(t,e)}containsElement(t,e){return wn(t,e)}query(t,e,n){return En(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Cn(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof fi),u={};Qn(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Yn(t,e,u));if(0==n)return new pi(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=ti(t,e),f=new fi(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class mi{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Zn(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class gi{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(vi().toString()),this._cssKeyframesDriver=new yi}validateStyleProperty(t){return bn(t)}matchesElement(t,e){return _n(t,e)}containsElement(t,e){return wn(t,e)}query(t,e,n){return En(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof mi);Qn(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=ti(t,e=Yn(t,e=e.map(t=>Fn(t,!1)),u));return new mi(t,e,a,l)}}function vi(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let bi=(()=>{class t extends Ze{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.I.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Je(t):t;return Ei(this._renderer,null,e,"register",[n]),new _i(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.z),r.Kb(s))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();class _i extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new wi(this._id,t,e||{},this._renderer)}}class wi{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Ei(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Ei(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Ci="@",Si="@.disabled";let Ti=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Oi("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Ii(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.z),r.Kb(Jr),r.Kb(r.t))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();class Oi{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Ci&&e==Si?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Ii extends Oi{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Ci?"."==e.charAt(1)&&e==Si?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Ci){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=Ci&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let xi=(()=>{class t extends Jr{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(s),r.Kb(Tn),r.Kb(wr))},t.\u0275prov=r.xb({token:t,factory:t.\u0275fac}),t})();const ki=new r.m("AnimationModuleType"),Ai=[{provide:Tn,useFactory:function(){return"function"==typeof vi()?new gi:new yi}},{provide:ki,useValue:"BrowserAnimations"},{provide:Ze,useClass:bi},{provide:wr,useFactory:function(){return new Er}},{provide:Jr,useClass:xi},{provide:r.z,useFactory:function(t,e,n){return new Ti(t,e,n)},deps:[R,Jr,r.t]}];let Ni=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({providers:Ai,imports:[Q]}),t})();var Di=n("quSY"),Pi=n("LRne");n("vkgz");var ji=n("7o/Q"),Ri=n("D0XW");function Fi(t,e){return function(n){return n.lift(new Mi(t,e))}}class Mi{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Li(t,this.predicate,this.thisArg))}}class Li extends ji.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Vi=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var qi=n("EY2u");function Bi(t){return e=>0===t?Object(qi.a)():e.lift(new Ui(t))}class Ui{constructor(t){if(this.total=t,this.total<0)throw new Vi}call(t,e){return e.subscribe(new Hi(t,this.total))}}class Hi extends ji.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}let zi;try{zi="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Rv){zi=!1}let Ki=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zi)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.v))},t.\u0275prov=Object(r.xb)({factory:function(){return new t(Object(r.Kb)(r.v))},token:t,providedIn:"root"}),t})(),Gi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({}),t})();"undefined"!=typeof Element&&Element;const Wi="cdk-high-contrast-black-on-white",Qi="cdk-high-contrast-white-on-black",Yi="cdk-high-contrast-active";let $i=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Yi),t.remove(Wi),t.remove(Qi);const e=this.getHighContrastMode();1===e?(t.add(Yi),t.add(Wi)):2===e&&(t.add(Yi),t.add(Qi))}}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ki),r.Kb(s))},t.\u0275prov=Object(r.xb)({factory:function(){return new t(Object(r.Kb)(Ki),Object(r.Kb)(s))},token:t,providedIn:"root"}),t})(),Zi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({}),t})();const Xi=new r.G("11.2.11");var Ji=n("bHdf");function to(...t){return Object(Ji.a)(1)(Object(Pi.a)(...t))}var eo=n("z+Ro");function no(...t){const e=t[t.length-1];return Object(eo.a)(e)?(t.pop(),n=>to(t,n,e)):e=>to(t,e)}const ro=new r.G("11.2.11"),io=new r.m("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let oo,so=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(r.N)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ro.full!==Xi.full&&console.warn("The Angular Material version ("+ro.full+") does not match the Angular CDK version ("+Xi.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.Kb($i),r.Kb(io,8),r.Kb(s))},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[[Zi],Zi]}),t})();try{oo="undefined"!=typeof Intl}catch(Rv){oo=!1}let ao=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[[so,Gi],so]}),t})();const uo=["*",[["mat-card-footer"]]],co=["*","mat-card-footer"];let lo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),ho=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),fo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.wb({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),t})(),po=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(ki,8))},t.\u0275cmp=r.vb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&r.ub("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:co,decls:2,vars:0,template:function(t,e){1&t&&(r.Rb(uo),r.Qb(0),r.Qb(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),yo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[[so],so]}),t})(),mo=(()=>{class t{constructor(t){this.instancePersonalDataService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Bb($e))},t.\u0275cmp=r.vb({type:t,selectors:[["app-profile"]],inputs:{task:"task"},decls:30,vars:7,consts:[["href","https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6","crossorigin","anonymous"]],template:function(t,e){1&t&&(r.Cb(0,"link",0),r.Gb(1,"mat-card"),r.Gb(2,"mat-card-title"),r.Zb(3),r.Fb(),r.Gb(4,"mat-card-subtitle"),r.Gb(5,"label"),r.Zb(6,"Cedula: "),r.Fb(),r.Zb(7),r.Fb(),r.Cb(8,"hr"),r.Gb(9,"mat-card-content"),r.Gb(10,"label"),r.Zb(11,"Nacionalidad: "),r.Fb(),r.Zb(12),r.Fb(),r.Gb(13,"mat-card-content"),r.Gb(14,"label"),r.Zb(15,"Direcci\xf3n: "),r.Fb(),r.Zb(16),r.Fb(),r.Gb(17,"mat-card-content"),r.Gb(18,"label"),r.Zb(19,"Fecha de nacimiento: "),r.Fb(),r.Zb(20),r.Fb(),r.Gb(21,"mat-card-content"),r.Gb(22,"label"),r.Zb(23,"Fecha de expedici\xf3n: "),r.Fb(),r.Zb(24),r.Fb(),r.Gb(25,"mat-card-content"),r.Gb(26,"label"),r.Zb(27,"Fecha de caducaci\xf3n: "),r.Fb(),r.Zb(28),r.Fb(),r.Fb(),r.Cb(29,"br")),2&t&&(r.sb(3),r.ac(" ",e.task.name," "),r.sb(4),r.ac(" ",e.task.id,""),r.sb(5),r.ac(" ",e.task.Nacionality," "),r.sb(4),r.ac(" ",e.task.direction," "),r.sb(4),r.ac(" ",e.task.dateNac," "),r.sb(4),r.ac(" ",e.task.dateExpd," "),r.sb(4),r.ac(" ",e.task.dateCadu," "))},directives:[po,ho,fo,lo],styles:["","#fila[_ngcontent-%COMP%]{\n    text-align: center;\n    align-items: center;\n  }\n\nlabel[_ngcontent-%COMP%]{\n  font-weight: bold;\n}"]}),t})();function go(t,e){1&t&&r.Cb(0,"app-profile",1),2&t&&r.Sb("task",e.$implicit)}let vo=(()=>{class t{constructor(t){this.instancePersonalDataService=t}ngOnInit(){this.tasks=this.instancePersonalDataService.getInfoPersonal(),console.log(this.tasks)}}return t.\u0275fac=function(e){return new(e||t)(r.Bb($e))},t.\u0275cmp=r.vb({type:t,selectors:[["app-list-data"]],decls:1,vars:1,consts:[[3,"task",4,"ngFor","ngForOf"],[3,"task"]],template:function(t,e){1&t&&r.Yb(0,go,1,1,"app-profile",0),2&t&&r.Sb("ngForOf",e.tasks)},directives:[d,mo],styles:[""]}),t})();function bo(t,e){1&t&&(r.Gb(0,"pre"),r.Zb(1,"                  "),r.Gb(2,"div"),r.Zb(3,"\n                    "),r.Gb(4,"qr-scanner",43),r.Zb(5,"\n                    "),r.Fb(),r.Zb(6,"\n                  "),r.Fb(),r.Zb(7,"\n                "),r.Fb()),2&t&&(r.sb(4),r.Sb("debug",!1)("canvasWidth",1080)("canvasHeight",720)("stopAfterScan",!1)("updateTime",500))}function _o(t,e){1&t&&(r.Gb(0,"pre"),r.Zb(1,"ng add @angular/material"),r.Fb())}function wo(t,e){1&t&&(r.Gb(0,"pre"),r.Zb(1,"ng add @angular/pwa"),r.Fb())}function Eo(t,e){1&t&&(r.Gb(0,"pre"),r.Zb(1,"ng add _____"),r.Fb())}function Co(t,e){1&t&&(r.Gb(0,"pre"),r.Zb(1,"ng test"),r.Fb())}function So(t,e){1&t&&(r.Gb(0,"pre"),r.Zb(1,"ng build --prod"),r.Fb())}let To=(()=>{class t{constructor(t,e){this.fb=t,this.instancePersonalDataService=e,this.title="formdataqrs"}ngOnInit(){this.dataForm=this.fb.group({fctId:new Yt("",[lt.required]),fctName:new Yt("",[lt.required]),fctLastN:new Yt("",[lt.required]),fctSex:new Yt("",[lt.required]),fctDirection:new Yt("",[lt.required]),fctDateB:new Yt("",[lt.required]),fctNact:new Yt("",[lt.required]),fctDateExpd:new Yt("",[lt.required]),fctDateCad:new Yt("",[lt.required])})}addData(t,e,n,r,i,o,s,a,u){return this.instancePersonalDataService.addInforPersonal({id:t.value,name:e.value,lastname:n.value,sex:r.value,direction:i.value,dateNac:o.value,Nacionality:s.value,dateExpd:a.value,dateCadu:u.value}),t.value="",e.value="",n.value="",r.value="",i.value="",o.value="",s.value="",a.value="",u.value="",!1}ngAfterViewInit(){this.qrScannerComponent.getMediaDevices().then(t=>{const e=[];for(const n of t)"videoinput"===n.kind.toString()&&e.push(n);if(e.length>0){let t;for(const n of e)if(n.label.includes("front")){t=n;break}this.qrScannerComponent.chooseCamera.next(t||e[0])}});var t=[];this.qrScannerComponent.capturedQr.subscribe(e=>{let n=e.split("|");t=n.filter(Boolean),this.dataForm=this.fb.group({fctId:new Yt(t[0],[lt.required]),fctName:new Yt(t[1],[lt.required]),fctLastN:new Yt(t[2],[lt.required]),fctSex:new Yt(t[3],[lt.required]),fctDirection:new Yt(t[4],[lt.required]),fctDateB:new Yt(t[5],[lt.required]),fctNact:new Yt(t[6],[lt.required]),fctDateExpd:new Yt(t[7],[lt.required]),fctDateCad:new Yt(t[8],[lt.required])})})}}return t.\u0275fac=function(e){return new(e||t)(r.Bb(le),r.Bb($e))},t.\u0275cmp=r.vb({type:t,selectors:[["app-root"]],viewQuery:function(t,e){if(1&t&&r.bc(Qe,1),2&t){let t;r.Tb(t=r.Ob())&&(e.qrScannerComponent=t.first)}},decls:87,vars:7,consts:[["href","https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6","crossorigin","anonymous"],["role","main",1,"content"],[1,"title-span"],[1,"title-span-QR"],["type","hidden"],["selection",""],[1,"row","row-no-gutters"],[1,"col-lg-6"],[1,"terminal",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["id","formDataPerson",1,"content-form"],[1,"title-form"],[3,"formGroup","submit"],[1,"col-4"],[1,"form-label"],["type","text","id","cedula","formControlName","fctId",1,"form-control"],["fctId",""],[1,"col-md-6"],["type","text","id","nombre","formControlName","fctName","required","",1,"form-control"],["fctName",""],["type","text","id","apellido","formControlName","fctLastN","required","",1,"form-control"],["fctLastN",""],[1,"row"],[1,"col-3"],["type","text","id","sexo","formControlName","fctSex","required","",1,"form-control"],["fctSex",""],[1,"col-6"],["type","text","id","direccion","formControlName","fctDirection","required","",1,"form-control"],["fctDirection",""],["type","text","id","fechaNac","formControlName","fctDateB","required","",1,"form-control"],["fctDateB",""],[1,"col-md-12"],["type","text","id","nacionalidad","formControlName","fctNact","required","",1,"form-control"],["fctNact",""],[1,"col-md-5"],["type","text","id","fechaExp","formControlName","fctDateExpd","required","",1,"form-control"],["fctDateExpd",""],["type","text","id","fechaCad","formControlName","fctDateCad","required","",1,"form-control"],["fctDateCad",""],[1,"d-grid","gap-2","col-6","mx-auto"],["type","submit",1,"btn","btn-success","btn-lg"],[1,"container"],[3,"debug","canvasWidth","canvasHeight","stopAfterScan","updateTime"]],template:function(t,e){if(1&t){const t=r.Hb();r.Cb(0,"link",0),r.Cb(1,"link",0),r.Gb(2,"div",1),r.Gb(3,"h1",2),r.Zb(4,"Escanear Codigo "),r.Gb(5,"span",3),r.Zb(6,"QR"),r.Fb(),r.Fb(),r.Gb(7,"p"),r.Zb(8,"Escanea aqui tu documento"),r.Fb(),r.Cb(9,"hr"),r.Cb(10,"input",4,5),r.Gb(12,"div",6),r.Gb(13,"div",7),r.Gb(14,"div",8),r.Yb(15,bo,8,5,"pre",9),r.Yb(16,_o,2,0,"pre",10),r.Yb(17,wo,2,0,"pre",10),r.Yb(18,Eo,2,0,"pre",10),r.Yb(19,Co,2,0,"pre",10),r.Yb(20,So,2,0,"pre",10),r.Fb(),r.Fb(),r.Gb(21,"div",7),r.Gb(22,"div",11),r.Gb(23,"h1",12),r.Zb(24,"Datos Personales"),r.Fb(),r.Cb(25,"hr"),r.Gb(26,"form",13),r.Nb("submit",function(){r.Vb(t);const n=r.Ub(31),i=r.Ub(37),o=r.Ub(43),s=r.Ub(50),a=r.Ub(55),u=r.Ub(61),c=r.Ub(67),l=r.Ub(74),h=r.Ub(79);return e.addData(n,i,o,s,a,u,c,l,h)}),r.Gb(27,"div",14),r.Gb(28,"h4",15),r.Zb(29,"Cedula"),r.Fb(),r.Cb(30,"input",16,17),r.Fb(),r.Cb(32,"br"),r.Gb(33,"div",18),r.Gb(34,"h5",15),r.Zb(35,"Nombre"),r.Fb(),r.Cb(36,"input",19,20),r.Fb(),r.Cb(38,"br"),r.Gb(39,"div",18),r.Gb(40,"h5",15),r.Zb(41,"Apellido"),r.Fb(),r.Cb(42,"input",21,22),r.Fb(),r.Cb(44,"br"),r.Gb(45,"div",23),r.Gb(46,"div",24),r.Gb(47,"h5",15),r.Zb(48,"Sexo"),r.Fb(),r.Cb(49,"input",25,26),r.Fb(),r.Gb(51,"div",27),r.Gb(52,"h5",15),r.Zb(53,"Direccion"),r.Fb(),r.Cb(54,"input",28,29),r.Fb(),r.Fb(),r.Cb(56,"br"),r.Gb(57,"div",18),r.Gb(58,"h5",15),r.Zb(59,"Fecha de Nacimiento"),r.Fb(),r.Cb(60,"input",30,31),r.Fb(),r.Cb(62,"br"),r.Gb(63,"div",32),r.Gb(64,"h5",15),r.Zb(65,"Nacionalidad"),r.Fb(),r.Cb(66,"input",33,34),r.Fb(),r.Cb(68,"br"),r.Gb(69,"div",23),r.Gb(70,"div",35),r.Gb(71,"h5",15),r.Zb(72,"Fecha de expedicion"),r.Fb(),r.Cb(73,"input",36,37),r.Fb(),r.Gb(75,"div",35),r.Gb(76,"h5",15),r.Zb(77,"Fecha de caducacion"),r.Fb(),r.Cb(78,"input",38,39),r.Fb(),r.Fb(),r.Cb(80,"hr"),r.Gb(81,"div",40),r.Gb(82,"button",41),r.Zb(83,"Guardar"),r.Fb(),r.Fb(),r.Fb(),r.Fb(),r.Fb(),r.Fb(),r.Fb(),r.Gb(84,"ul",42),r.Cb(85,"app-list-data"),r.Fb(),r.Cb(86,"br")}if(2&t){const t=r.Ub(11);r.sb(14),r.Sb("ngSwitch",t.value),r.sb(2),r.Sb("ngSwitchCase","material"),r.sb(1),r.Sb("ngSwitchCase","pwa"),r.sb(1),r.Sb("ngSwitchCase","dependency"),r.sb(1),r.Sb("ngSwitchCase","test"),r.sb(1),r.Sb("ngSwitchCase","build"),r.sb(6),r.Sb("formGroup",e.dataForm)}},directives:[y,g,m,Xt,Nt,ne,it,At,ie,se,vo,Qe],styles:["",'\n  body{\n    background: rgb(238,174,202);\nbackground: radial-gradient(circle, rgba(238,174,202,1) 0%, rgba(148,197,233,1) 100%);\n  }\n  :host {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    margin: 8px 0;\n    color: white;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .spacer {\n    flex: 1;\n  }\n\n  .toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar img {\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar #youtube-logo {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar #twitter-logo:hover,\n  .toolbar #youtube-logo:hover {\n    opacity: 0.8;\n  }\n\n  .content {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n\n  svg.material-icons {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card svg.material-icons path {\n    fill: #888;\n  }\n\n  .card-container {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card {\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container .card:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container .card:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container .card:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container .card:not(.highlight-card):hover .material-icons path {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card span {\n    margin-left: 60px;\n  }\n\n  svg#rocket {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a,\n  a:visited,\n  a:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a:hover {\n    color: #125699;\n  }\n\n  .terminal {\n    position: relative;\n\n\n    max-width: 800px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n  #formDataPerson{\n    position: relative;\n    width: 100%;\n\n  }\n\n  .terminal::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal pre {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer a {\n    display: flex;\n    align-items: center;\n  }\n\n\n\n\n  svg#clouds {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n\n  /* Responsive Styles */\n  @media screen and (max-width: 767px) {\n\n    .card-container > *:not(.circle-link) ,\n    .terminal {\n      width: 100%;\n    }\n\n    .card:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card span {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke {\n      display: none;\n      visibility: hidden;\n    }\n  }\n  .title-span{\n    color: #333;\n    font-family: "Montserrat",Sans-serif;\n    font-size: 44px;\n    font-weight: 700;\n  }\n  .title-span-QR{\n    color:#3698e6;\n    font-family: "Montserrat",Sans-serif;\n    font-size: 44px;\n    font-weight: 700;\n  }\n\n  .content-form {\n    background-color: #0304508a;\n    border-radius: 1em;\n    display: flex;\n    margin: 32px auto 50px;\n    padding: 20px 16px;\n    max-width:  860px;\n    flex-direction: column;\n    align-items: left;\n  }\n  .form-control{\n    max-width: 20rem;\n    display: inline;\n  }\n  .title-form{\n    text-align: center;\n    font-weight: bold;\n  }\n  .input-group-text{\n    font-weight: bold;\n  }\n  .container{\n    height: 70vh;\n    overflow: scroll;\n    overflow-x: hidden;\n  }\n\n\n\n\n'],encapsulation:2}),t})();function Oo(){return t=>t.lift(new Io)}class Io{call(t,e){return e.subscribe(new xo(t))}}class xo extends ji.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function ko(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ao(t,e,n))}}class Ao{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new No(t,this.accumulator,this.seed,this.hasSeed))}}class No extends ji.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Do(t,e){return n=>n.lift(new Po(t,e))}class Po{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new jo(t,this.compare,this.keySelector))}}class jo extends ji.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ro=n("pxpQ"),Fo=n("spgP"),Mo=n("Jgta"),Lo=n("zIRd"),Vo=n("qOnz"),qo=n("q/0M"),Bo=function(t,e){return(Bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Uo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ho,zo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ko=Ko||{},Go=zo||self;function Wo(){}function Qo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Yo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var $o="closure_uid_"+(1e9*Math.random()>>>0),Zo=0;function Xo(t,e,n){return t.call.apply(t.bind,arguments)}function Jo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ts(t,e,n){return(ts=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xo:Jo).apply(null,arguments)}function es(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ns(){return Date.now()}function rs(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function is(){this.j=this.j,this.i=this.i}is.prototype.j=!1,is.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,$o)&&t[$o]||(t[$o]=++Zo)}(this)},is.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var os=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ss=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function as(t){return Array.prototype.concat.apply([],arguments)}function us(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function cs(t){return/^[\s\xa0]*$/.test(t)}var ls,hs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ds(t,e){return-1!=t.indexOf(e)}function fs(t,e){return t<e?-1:t>e?1:0}t:{var ps=Go.navigator;if(ps){var ys=ps.userAgent;if(ys){ls=ys;break t}}ls=""}function ms(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function gs(t){var e={};for(var n in t)e[n]=t[n];return e}var vs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vs.length;o++)n=vs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _s(t){return _s[" "](t),t}_s[" "]=Wo;var ws,Es,Cs=ds(ls,"Opera"),Ss=ds(ls,"Trident")||ds(ls,"MSIE"),Ts=ds(ls,"Edge"),Os=Ts||Ss,Is=ds(ls,"Gecko")&&!(ds(ls.toLowerCase(),"webkit")&&!ds(ls,"Edge"))&&!(ds(ls,"Trident")||ds(ls,"MSIE"))&&!ds(ls,"Edge"),xs=ds(ls.toLowerCase(),"webkit")&&!ds(ls,"Edge");function ks(){var t=Go.document;return t?t.documentMode:void 0}t:{var As="",Ns=(Es=ls,Is?/rv:([^\);]+)(\)|;)/.exec(Es):Ts?/Edge\/([\d\.]+)/.exec(Es):Ss?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Es):xs?/WebKit\/(\S+)/.exec(Es):Cs?/(?:Version)[ \/]?(\S+)/.exec(Es):void 0);if(Ns&&(As=Ns?Ns[1]:""),Ss){var Ds=ks();if(null!=Ds&&Ds>parseFloat(As)){ws=String(Ds);break t}}ws=As}var Ps={};function js(t){return function(t,e){var n=Ps;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=hs(String(ws)).split("."),r=hs(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=fs(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||fs(0==s[2].length,0==a[2].length)||fs(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Rs=Go.document&&Ss&&(ks()||parseInt(ws,10))||void 0,Fs=!Ss||9<=Number(Rs),Ms=Ss&&!js("9"),Ls=function(){if(!Go.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Go.addEventListener("test",Wo,e),Go.removeEventListener("test",Wo,e)}catch(n){}return t}();function Vs(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function qs(t,e){if(Vs.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Is){t:{try{_s(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Bs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Vs.prototype.b=function(){this.defaultPrevented=!0},rs(qs,Vs);var Bs={2:"touch",3:"pen",4:"mouse"};qs.prototype.b=function(){qs.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ms)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Us="closure_listenable_"+(1e6*Math.random()|0),Hs=0;function zs(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Hs,this.Y=this.Z=!1}function Ks(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Gs(t){this.src=t,this.a={},this.b=0}function Ws(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=os(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ks(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Qs(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Gs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Qs(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new zs(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ys="closure_lm_"+(1e6*Math.random()|0),$s={};function Zs(t,e,n,r,i){if(r&&r.once)return Js(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zs(t,e[o],n,r,i);return null}return n=aa(n),t&&t[Us]?t.va(e,n,Yo(r)?!!r.capture:!!r,i):Xs(t,e,n,!1,r,i)}function Xs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Yo(i)?!!i.capture:!!i;if(s&&!Fs)return null;var a=oa(t);if(a||(t[Ys]=a=new Gs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ia,e=Fs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ls||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(na(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Js(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Js(t,e[o],n,r,i);return null}return n=aa(n),t&&t[Us]?t.wa(e,n,Yo(r)?!!r.capture:!!r,i):Xs(t,e,n,!0,r,i)}function ta(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ta(t,e[o],n,r,i);else r=Yo(r)?!!r.capture:!!r,n=aa(n),t&&t[Us]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Qs(o=t.a[e],n,r,i))&&(Ks(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=oa(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Qs(e,n,r,i)),(n=-1<t?e[t]:null)&&ea(n))}function ea(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Us])Ws(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(na(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=oa(e))?(Ws(n,t),0==n.b&&(n.src=null,e[Ys]=null)):Ks(t)}}}function na(t){return t in $s?$s[t]:$s[t]="on"+t}function ra(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ea(t),n.call(r,e)}function ia(t,e){if(t.Y)return!0;if(!Fs){if(!e)t:{e=["window","event"];for(var n=Go,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ra(t,e=new qs(e,this))}return ra(t,new qs(e,this))}function oa(t){return(t=t[Ys])instanceof Gs?t:null}var sa="__closure_events_fn_"+(1e9*Math.random()>>>0);function aa(t){return"function"==typeof t?t:(t[sa]||(t[sa]=function(e){return t.handleEvent(e)}),t[sa])}function ua(){is.call(this),this.c=new Gs(this),this.J=this,this.C=null}function ca(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Vs(e,t);else if(e instanceof Vs)e.target=e.target||t;else{var i=e;bs(e=new Vs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=la(s,r,!0,e)&&i}if(i=la(s=e.a=t,r,!0,e)&&i,i=la(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=la(s=e.a=n[o],r,!1,e)&&i}function la(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ws(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}rs(ua,is),ua.prototype[Us]=!0,(Ho=ua.prototype).addEventListener=function(t,e,n,r){Zs(this,t,e,n,r)},Ho.removeEventListener=function(t,e,n,r){ta(this,t,e,n,r)},Ho.G=function(){if(ua.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ks(n[r]);delete e.a[t],e.b--}}this.C=null},Ho.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ho.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ha=Go.JSON.stringify;function da(){this.b=this.a=null}var fa,pa=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ma},function(t){t.reset()});function ya(){var t=_a,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ma(){this.next=this.b=this.a=null}function ga(t){Go.setTimeout(function(){throw t},0)}function va(t,e){fa||function(){var t=Go.Promise.resolve(void 0);fa=function(){t.then(wa)}}(),ba||(fa(),ba=!0),_a.add(t,e)}da.prototype.add=function(t,e){var n=pa.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ma.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ma.prototype.reset=function(){this.next=this.b=this.a=null};var ba=!1,_a=new da;function wa(){for(var t;t=ya();){try{t.a.call(t.b)}catch(n){ga(n)}var e=pa;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ba=!1}function Ea(t,e){ua.call(this),this.b=t||1,this.a=e||Go,this.f=ts(this.Za,this),this.g=ns()}function Ca(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Sa(t,e,n){if("function"==typeof t)n&&(t=ts(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ts(t.handleEvent,t)}return 2147483647<Number(e)?-1:Go.setTimeout(t,e||0)}function Ta(t){t.a=Sa(function(){t.a=null,t.c&&(t.c=!1,Ta(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}rs(Ea,ua),(Ho=Ea.prototype).aa=!1,Ho.M=null,Ho.Za=function(){if(this.aa){var t=ns()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ca(this,"tick"),this.aa&&(Ca(this),this.start()))}},Ho.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ns())},Ho.G=function(){Ea.X.G.call(this),Ca(this),delete this.a};var Oa=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Bo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ta(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Go.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(is);function Ia(t){is.call(this),this.b=t,this.a={}}rs(Ia,is);var xa=[];function ka(t,e,n,r){Array.isArray(n)||(n&&(xa[0]=n.toString()),n=xa);for(var i=0;i<n.length;i++){var o=Zs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Aa(t){ms(t.a,function(t,e){this.a.hasOwnProperty(e)&&ea(t)},t),t.a={}}function Na(){this.a=!0}function Da(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ha(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ia.prototype.G=function(){Ia.X.G.call(this),Aa(this)},Ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Na.prototype.info=function(){};var Pa={},ja=null;function Ra(){return ja=ja||new ua}function Fa(t){Vs.call(this,Pa.Fa,t)}function Ma(t){var e=Ra();ca(e,new Fa(e,t))}function La(t,e){Vs.call(this,Pa.STAT_EVENT,t),this.stat=e}function Va(t){var e=Ra();ca(e,new La(e,t))}function qa(t){Vs.call(this,Pa.Ga,t)}function Ba(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Go.setTimeout(function(){t()},e)}Pa.Fa="serverreachability",rs(Fa,Vs),Pa.STAT_EVENT="statevent",rs(La,Vs),Pa.Ga="timingevent",rs(qa,Vs);var Ua={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ha={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function za(){}function Ka(){}za.prototype.a=null;var Ga,Wa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Qa(){Vs.call(this,"d")}function Ya(){Vs.call(this,"c")}function $a(){}function Za(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ia(this),this.P=Xa,this.R=new Ea(t=Os?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}rs(Qa,Vs),rs(Ya,Vs),rs($a,za),Ga=new $a;var Xa=45e3,Ja={},tu={};function eu(t,e,n){t.H=1,t.i=Cu(gu(e)),t.j=n,t.I=!0,nu(t,null)}function nu(t,e){t.u=ns(),ou(t),t.l=gu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Fu(n.b,"t",r),t.D=0,t.a=Ac(t.g,t.g.C?e:null),0<t.O&&(t.F=new Oa(ts(t.Ca,t,t.a),t.O)),ka(t.J,t.a,"readystatechange",t.Xa),e=t.B?gs(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ma(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ru(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=iu(t,n);if(i==tu){4==e&&(t.h=4,Va(14),r=!1),Da(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ja){t.h=4,Va(15),Da(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Da(t.c,t.f,i,null),lu(t,i)}4==e&&0==n.length&&(t.h=1,Va(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ec(e),e.F=!0,Va(11))):(Da(t.c,t.f,n,"[Invalid Chunked Response]"),cu(t),uu(t))}function iu(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?tu:(n=Number(e.substring(n,r)),isNaN(n)?Ja:(r+=1)+n>e.length?tu:(e=e.substr(r,n),t.D=r+n,e))}function ou(t){t.T=ns()+t.P,su(t,t.P)}function su(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ba(ts(t.Va,t),e)}function au(t){t.o&&(Go.clearTimeout(t.o),t.o=null)}function uu(t){0==t.g.v||t.A||Tc(t.g,t)}function cu(t){au(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ca(t.R),Aa(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function lu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Hu(n.b,t)))if(n.I=t.N,!t.C&&Hu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(fb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Sc(n),fc(n)}wc(n),Va(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ba(ts(n.Sa,n),6e3));if(1>=Uu(n.b)&&n.ea){try{n.ea()}catch(fb){}n.ea=void 0}}else Ic(n,11)}else if((t.C||n.a==t)&&Sc(n),!cs(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ds(l,"spdy")||ds(l,"quic")||ds(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(zu(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Eu(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ns()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=kc(u,u.C?u.ga:null,u.fa),f.C){Ku(u.b,f);var p=f,y=u.D;y&&p.setTimeout(y),p.o&&(au(p),ou(p)),u.a=f}else _c(u);0<n.g.length&&mc(n)}else"stop"!=i[0]&&"close"!=i[0]||Ic(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ic(n,7):dc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ma(4)}catch(fb){}}function hu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qo(t)||"string"==typeof t)ss(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Qo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Qo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function du(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof du)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function fu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];pu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)pu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function pu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ho=Za.prototype).setTimeout=function(t){this.P=t},Ho.Xa=function(t){t=t.target;var e=this.F;e&&3==uc(t)?e.f():this.Ca(t)},Ho.Ca=function(t){try{if(t==this.a)t:{var e=uc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Os&&!this.a.$())){this.A||4!=e||7==n||Ma(8==n||0>=r?3:2),au(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cs(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Va(12),cu(this),uu(this);break t}Da(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,lu(this,u)}this.I?(ru(this,e,o),Os&&this.b&&3==e&&(ka(this.J,this.R,"tick",this.Wa),this.R.start())):(Da(this.c,this.f,o,null),lu(this,o)),4==e&&cu(this),this.b&&!this.A&&(4==e?Tc(this.g,this):(this.b=!1,ou(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Va(12)):(this.h=0,Va(13)),cu(this),uu(this)}}}catch(c){}},Ho.Wa=function(){if(this.a){var t=uc(this.a),e=this.a.$();this.D<e.length&&(au(this),ru(this,t,e),this.b&&4!=t&&ou(this))}},Ho.cancel=function(){this.A=!0,cu(this)},Ho.Va=function(){this.o=null;var t=ns();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ma(3),Va(17)),cu(this),this.h=2,uu(this)):su(this,this.T-t)},(Ho=du.prototype).K=function(){fu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ho.L=function(){return fu(this),this.a.concat()},Ho.get=function(t,e){return pu(this.b,t)?this.b[t]:e},Ho.set=function(t,e){pu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ho.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof mu){this.a=void 0!==e?e:t.a,vu(this,t.f),this.j=t.j,bu(this,t.c),_u(this,t.h),this.g=t.g,e=t.b;var n=new Du;n.c=e.c,e.a&&(n.a=new du(e.a),n.b=e.b),wu(this,n),this.i=t.i}else t&&(n=String(t).match(yu))?(this.a=!!e,vu(this,n[1]||"",!0),this.j=Su(n[2]||""),bu(this,n[3]||"",!0),_u(this,n[4]),this.g=Su(n[5]||"",!0),wu(this,n[6]||"",!0),this.i=Su(n[7]||"")):(this.a=!!e,this.b=new Du(null,this.a))}function gu(t){return new mu(t)}function vu(t,e,n){t.f=n?Su(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function bu(t,e,n){t.c=n?Su(e,!0):e}function _u(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function wu(t,e,n){e instanceof Du?(t.b=e,function(t,e){e&&!t.f&&(Pu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ju(this,e),Fu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Tu(e,Au)),t.b=new Du(e,t.a))}function Eu(t,e,n){t.b.set(e,n)}function Cu(t){return Eu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ns()).toString(36)),t}function Su(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Tu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ou),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ou(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Tu(e,Iu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Tu(e,Iu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Tu(n,"/"==n.charAt(0)?ku:xu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Tu(n,Nu)),t.join("")};var Iu=/[#\/\?@]/g,xu=/[#\?:]/g,ku=/[#\?]/g,Au=/[#\?@]/g,Nu=/#/g;function Du(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Pu(t){t.a||(t.a=new du,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ju(t,e){Pu(t),e=Mu(t,e),pu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&fu(t)))}function Ru(t,e){return Pu(t),e=Mu(t,e),pu(t.a.b,e)}function Fu(t,e,n){ju(t,e),0<n.length&&(t.c=null,t.a.set(Mu(t,e),us(n)),t.b+=n.length)}function Mu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ho=Du.prototype).add=function(t,e){Pu(this),this.c=null,t=Mu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ho.forEach=function(t,e){Pu(this),this.a.forEach(function(n,r){ss(n,function(n){t.call(e,n,r,this)},this)},this)},Ho.L=function(){Pu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ho.K=function(t){Pu(this);var e=[];if("string"==typeof t)Ru(this,t)&&(e=as(e,this.a.get(Mu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=as(e,t[n])}return e},Ho.set=function(t,e){return Pu(this),this.c=null,Ru(this,t=Mu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ho.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ho.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Lu=function(){return function(t,e){this.b=t,this.a=e}}();function Vu(t){this.g=t||qu,t=Go.PerformanceNavigationTiming?0<(t=Go.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Go.ia&&Go.ia.ya&&Go.ia.ya()&&Go.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var qu=10;function Bu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Uu(t){return t.b?1:t.a?t.a.size:0}function Hu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function zu(t,e){t.a?t.a.add(e):t.b=e}function Ku(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Gu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Uo(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return us(t.c)}function Wu(){}function Qu(){this.a=new Wu}function Yu(t,e,n){var r=n||"";try{hu(t,function(t,n){var i=t;Yo(t)&&(i=ha(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Qb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Qb}}function $u(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Vu.prototype.cancel=function(){var t,e;if(this.c=Gu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Uo(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Wu.prototype.stringify=function(t){return Go.JSON.stringify(t,void 0)},Wu.prototype.parse=function(t){return Go.JSON.parse(t,void 0)};var Zu=Go.JSON.parse;function Xu(t){ua.call(this),this.headers=new du,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ju,this.D=this.F=!1}rs(Xu,ua);var Ju="",tc=/^https?$/i,ec=["POST","PUT"];function nc(t){return"content-type"==t.toLowerCase()}function rc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ic(t),sc(t)}function ic(t){t.u||(t.u=!0,ca(t,"complete"),ca(t,"error"))}function oc(t){if(t.b&&void 0!==Ko&&(!t.s[1]||4!=uc(t)||2!=t.W()))if(t.l&&4==uc(t))Sa(t.za,0,t);else if(ca(t,"readystatechange"),4==uc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(yu)[1]||null;if(!o&&Go.self&&Go.self.location){var s=Go.self.location.protocol;o=s.substr(0,s.length-1)}i=!tc.test(o?o.toLowerCase():"")}e=i}if(e)ca(t,"complete"),ca(t,"success");else{t.h=6;try{var a=2<uc(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ic(t)}}finally{sc(t)}}}function sc(t,e){if(t.a){ac(t);var n=t.a,r=t.s[0]?Wo:null;t.a=null,t.s=null,e||ca(t,"ready");try{n.onreadystatechange=r}catch(Qb){}}}function ac(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Go.clearTimeout(t.m),t.m=null)}function uc(t){return t.a?t.a.readyState:0}function cc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ms(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Eu(t,e,n))}function lc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hc(t){this.pa=0,this.g=[],this.c=new Na,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=lc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=lc("baseRetryDelayMs",5e3,t),this.Ra=lc("retryDelaySeedMs",1e4,t),this.Ma=lc("forwardChannelMaxRetries",2,t),this.ma=lc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Vu(t&&t.concurrentRequestLimit),this.ka=new Qu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function dc(t){if(pc(t),3==t.v){var e=t.R++,n=gu(t.B);Eu(n,"SID",t.J),Eu(n,"RID",e),Eu(n,"TYPE","terminate"),vc(t,n),(e=new Za(t,t.c,e,void 0)).H=2,e.i=Cu(gu(n)),n=!1,Go.navigator&&Go.navigator.sendBeacon&&(n=Go.navigator.sendBeacon(e.i.toString(),"")),!n&&Go.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ac(e.g,null),e.a.ba(e.i)),e.u=ns(),ou(e)}xc(t)}function fc(t){t.a&&(Ec(t),t.a.cancel(),t.a=null)}function pc(t){fc(t),t.j&&(Go.clearTimeout(t.j),t.j=null),Sc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Go.clearTimeout(t.h),t.h=null)}function yc(t,e){t.g.push(new Lu(t.Oa++,e)),3==t.v&&mc(t)}function mc(t){Bu(t.b)||t.h||(t.h=!0,va(t.Ba,t),t.u=0)}function gc(t,e){var n;n=e?e.f:t.R++;var r=gu(t.B);Eu(r,"SID",t.J),Eu(r,"RID",n),Eu(r,"AID",t.P),vc(t,r),t.i&&t.l&&cc(r,t.i,t.l),n=new Za(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=bc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),zu(t.b,n),eu(n,r,e)}function vc(t,e){t.f&&hu({},function(t,n){Eu(e,n,t)})}function bc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ts(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Yu(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function _c(t){t.a||t.j||(t.T=1,va(t.Aa,t),t.o=0)}function wc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ba(ts(t.Aa,t),Oc(t,t.o)),t.o++,0))}function Ec(t){null!=t.s&&(Go.clearTimeout(t.s),t.s=null)}function Cc(t){t.a=new Za(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=gu(t.la);Eu(e,"RID","rpc"),Eu(e,"SID",t.J),Eu(e,"CI",t.H?"0":"1"),Eu(e,"AID",t.P),vc(t,e),Eu(e,"TYPE","xmlhttp"),t.i&&t.l&&cc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Cu(gu(e)),n.j=null,n.I=!0,nu(n,t)}function Sc(t){null!=t.m&&(Go.clearTimeout(t.m),t.m=null)}function Tc(t,e){var n=null;if(t.a==e){Sc(t),Ec(t),t.a=null;var r=2}else{if(!Hu(t.b,e))return;n=e.s,Ku(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ns()-e.u;var i=t.u;ca(r=Ra(),new qa(r,n,e,i)),mc(t)}else _c(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Uu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ba(ts(t.Ba,t,e),Oc(t,t.u)),t.u++,0)))}(t,e)||2==r&&wc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ic(t,5);break;case 4:Ic(t,10);break;case 3:Ic(t,6);break;default:Ic(t,2)}}function Oc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ic(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ts(t.Ya,t);n||(n=new mu("//www.google.com/images/cleardot.gif"),Go.location&&"http"==Go.location.protocol||vu(n,"https"),Cu(n)),function(t,e){var n=new Na;if(Go.Image){var r=new Image;r.onload=es($u,n,r,"TestLoadImage: loaded",!0,e),r.onerror=es($u,n,r,"TestLoadImage: error",!1,e),r.onabort=es($u,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=es($u,n,r,"TestLoadImage: timeout",!1,e),Go.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Va(2);t.v=0,t.f&&t.f.ra(e),xc(t),pc(t)}function xc(t){t.v=0,t.I=-1,t.f&&(0==Gu(t.b).length&&0==t.g.length||(t.b.c.length=0,us(t.g),t.g.length=0),t.f.qa())}function kc(t,e,n){var r=function(t){return t instanceof mu?gu(t):new mu(t,void 0)}(n);if(""!=r.c)e&&bu(r,e+"."+r.c),_u(r,r.h);else{var i=Go.location;r=function(t,e,n,r){var i=new mu(null,void 0);return t&&vu(i,t),e&&bu(i,e),n&&_u(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ms(t.V,function(t,e){Eu(r,e,t)}),n=t.na,(e=t.A)&&n&&Eu(r,e,n),Eu(r,"VER",t.ha),vc(t,r),r}function Ac(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xu(t.Na)).F=t.C,e}function Nc(){}function Dc(){if(Ss&&!(10<=Number(Rs)))throw Error("Environmental error: no available transport.")}function Pc(t,e){ua.call(this),this.a=new hc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!cs(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cs(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Fc(this)}function jc(t){Qa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Rc(){Ya.call(this),this.status=1}function Fc(t){this.a=t}(Ho=Xu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ga),this.a.onreadystatechange=ts(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void rc(this,o)}t=n||"";var i=new du(this.headers);r&&hu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=nc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Go.FormData&&t instanceof Go.FormData,!(0<=os(ec,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ac(this),0<this.o&&((this.D=function(t){return Ss&&js(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ts(this.xa,this)):this.m=Sa(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){rc(this,o)}},Ho.xa=function(){void 0!==Ko&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ca(this,"timeout"),this.abort(8))},Ho.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ca(this,"complete"),ca(this,"abort"),sc(this))},Ho.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),sc(this,!0)),Xu.X.G.call(this)},Ho.za=function(){this.j||(this.A||this.l||this.g?oc(this):this.Ua())},Ho.Ua=function(){oc(this)},Ho.W=function(){try{return 2<uc(this)?this.a.status:-1}catch(Es){return-1}},Ho.$=function(){try{return this.a?this.a.responseText:""}catch(Es){return""}},Ho.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Zu(e)}},Ho.ua=function(){return this.h},Ho.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ho=hc.prototype).ha=8,Ho.v=1,Ho.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Za(this,this.c,t,void 0),r=this.l;if(this.O&&(r?bs(r=gs(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=bc(this,n,e),Eu(i=gu(this.B),"RID",t),Eu(i,"CVER",22),this.A&&Eu(i,"X-HTTP-Session-Id",this.A),vc(this,i),this.i&&r&&cc(i,this.i,r),zu(this.b,n),this.Ia&&Eu(i,"TYPE","init"),this.da?(Eu(i,"$req",e),Eu(i,"SID","null"),n.U=!0,eu(n,i,null)):eu(n,i,e),this.v=2}}else 3==this.v&&(t?gc(this,t):0==this.g.length||Bu(this.b)||gc(this))},Ho.Aa=function(){if(this.j=null,Cc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ba(ts(this.Ta,this),t)}},Ho.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Va(10),fc(this),Cc(this))},Ho.Sa=function(){null!=this.m&&(this.m=null,fc(this),wc(this),Va(19))},Ho.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Va(2)):(this.c.info("Failed to ping google.com"),Va(1))},(Ho=Nc.prototype).ta=function(){},Ho.sa=function(){},Ho.ra=function(){},Ho.qa=function(){},Ho.Ja=function(){},Dc.prototype.a=function(t,e){return new Pc(t,e)},rs(Pc,ua),Pc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Va(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=kc(t,null,t.fa),mc(t)},Pc.prototype.close=function(){dc(this.a)},Pc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,yc(this.a,e)}else this.l?((e={}).__data__=ha(t),yc(this.a,e)):yc(this.a,t)},Pc.prototype.G=function(){this.a.f=null,delete this.f,dc(this.a),delete this.a,Pc.X.G.call(this)},rs(jc,Qa),rs(Rc,Ya),rs(Fc,Nc),Fc.prototype.ta=function(){ca(this.a,"a")},Fc.prototype.sa=function(t){ca(this.a,new jc(t))},Fc.prototype.ra=function(t){ca(this.a,new Rc(t))},Fc.prototype.qa=function(){ca(this.a,"b")},Dc.prototype.createWebChannel=Dc.prototype.a,Pc.prototype.send=Pc.prototype.h,Pc.prototype.open=Pc.prototype.g,Pc.prototype.close=Pc.prototype.close,Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,Ha.COMPLETE="complete",Ka.EventType=Wa,Wa.OPEN="a",Wa.CLOSE="b",Wa.ERROR="c",Wa.MESSAGE="d",ua.prototype.listen=ua.prototype.va,Xu.prototype.listenOnce=Xu.prototype.wa,Xu.prototype.getLastError=Xu.prototype.Qa,Xu.prototype.getLastErrorCode=Xu.prototype.ua,Xu.prototype.getStatus=Xu.prototype.W,Xu.prototype.getResponseJson=Xu.prototype.Pa,Xu.prototype.getResponseText=Xu.prototype.$,Xu.prototype.send=Xu.prototype.ba;var Mc=Ua,Lc=Ha,Vc=Pa,qc=Ka,Bc=Xu,Uc=n("mrSG"),Hc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Hc.o=-1;var zc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Kc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Uc.c)(e,t),e}(Error),Gc=new qo.b("@firebase/firestore");function Wc(){return Gc.logLevel}function Qc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gc.logLevel<=qo.a.DEBUG){var r=e.map(Zc);Gc.debug.apply(Gc,Object(Uc.f)(["Firestore (8.4.2): "+t],r))}}function Yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gc.logLevel<=qo.a.ERROR){var r=e.map(Zc);Gc.error.apply(Gc,Object(Uc.f)(["Firestore (8.4.2): "+t],r))}}function $c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gc.logLevel<=qo.a.WARN){var r=e.map(Zc);Gc.warn.apply(Gc,Object(Uc.f)(["Firestore (8.4.2): "+t],r))}}function Zc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Qb){return t}}function Xc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw Yc(e),new Error(e)}function Jc(t,e){t||Xc()}function tl(t,e){return t}function el(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var nl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=el(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function rl(t,e){return t<e?-1:t>e?1:0}function il(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ol(t){return t+"\0"}var sl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Kc(zc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Kc(zc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Kc(zc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Kc(zc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?rl(this.nanoseconds,t.nanoseconds):rl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),al=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new sl(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ul(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ll(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var hl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Xc(),void 0===n?n=t.length-e:n>t.length-e&&Xc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Kc(zc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(hl),fl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return fl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Kc(zc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Kc(zc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Kc(zc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Kc(zc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(hl),yl=function(){function t(t){this.fields=t,t.sort(pl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return il(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ml=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return rl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ml.EMPTY_BYTE_STRING=new ml("");var gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(t){if(Jc(!!t),"string"==typeof t){var e=0,n=gl.exec(t);if(Jc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bl(t.seconds),nanos:bl(t.nanos)}}function bl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function _l(t){return"string"==typeof t?ml.fromBase64String(t):ml.fromUint8Array(t)}function wl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function El(t){var e=t.mapValue.fields.__previous_value__;return wl(e)?El(e):e}function Cl(t){var e=vl(t.mapValue.fields.__local_write_time__.timestampValue);return new sl(e.seconds,e.nanos)}function Sl(t){return null==t}function Tl(t){return 0===t&&1/t==-1/0}function Ol(t){return"number"==typeof t&&Number.isInteger(t)&&!Tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Il=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(dl.fromString(e))},t.fromName=function(e){return new t(dl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===dl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return dl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new dl(e.slice()))},t}();function xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wl(t)?4:10:Xc()}function kl(t,e){var n=xl(t);if(n!==xl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cl(t).isEqual(Cl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=vl(t.timestampValue),r=vl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return _l(t.bytesValue).isEqual(_l(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bl(t.geoPointValue.latitude)===bl(e.geoPointValue.latitude)&&bl(t.geoPointValue.longitude)===bl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bl(t.integerValue)===bl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bl(t.doubleValue),r=bl(e.doubleValue);return n===r?Tl(n)===Tl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return il(t.arrayValue.values||[],e.arrayValue.values||[],kl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ul(n)!==ul(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kl(n[i],r[i])))return!1;return!0}(t,e);default:return Xc()}}function Al(t,e){return void 0!==(t.values||[]).find(function(t){return kl(t,e)})}function Nl(t,e){var n=xl(t),r=xl(e);if(n!==r)return rl(n,r);switch(n){case 0:return 0;case 1:return rl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=bl(t.integerValue||t.doubleValue),r=bl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Dl(t.timestampValue,e.timestampValue);case 4:return Dl(Cl(t),Cl(e));case 5:return rl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=_l(t),r=_l(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=rl(n[i],r[i]);if(0!==o)return o}return rl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=rl(bl(t.latitude),bl(e.latitude));return 0!==n?n:rl(bl(t.longitude),bl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Nl(n[i],r[i]);if(o)return o}return rl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=rl(r[s],o[s]);if(0!==a)return a;var u=Nl(n[r[s]],i[o[s]]);if(0!==u)return u}return rl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Xc()}}function Dl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rl(t,e);var n=vl(t),r=vl(e),i=rl(n.seconds,r.seconds);return 0!==i?i:rl(n.nanos,r.nanos)}function Pl(t){return jl(t)}function jl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=vl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?_l(t.bytesValue).toBase64():"referenceValue"in t?Il.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=jl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+jl(t.fields[o])}return e+"}"}(t.mapValue):Xc();var e}function Rl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Fl(t){return!!t&&"integerValue"in t}function Ml(t){return!!t&&"arrayValue"in t}function Ll(t){return!!t&&"nullValue"in t}function Vl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ql(t){return!!t&&"mapValue"in t}var Bl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(pl.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return kl(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===xl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=ql(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(pl.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ql(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Ul(t){var e=[];return cl(t.fields||{},function(t,n){var r=new pl([t]);if(ql(n)){var i=Ul(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new yl(e)}var Hl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,al.min(),Bl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Bl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Bl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),zl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Kl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new zl(t,e,n,r,i,o,s)}function Gl(t){var e=tl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Pl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Sl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=oh(e.startAt)),e.endAt&&(n+="|ub:",n+=oh(e.endAt)),e.h=n}return e.h}function Wl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ah(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!kl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ch(t.startAt,e.startAt)&&ch(t.endAt,e.endAt)}function Ql(t){return Il.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Yl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Uc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new $l(t,n,r):"array-contains"===n?new th(t,r):"in"===n?new eh(t,r):"not-in"===n?new nh(t,r):"array-contains-any"===n?new rh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Zl(t,n):new Xl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Nl(e,this.value)):null!==e&&xl(this.value)===xl(e)&&this.m(Nl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),$l=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Il.fromName(r.referenceValue),i}return Object(Uc.c)(e,t),e.prototype.matches=function(t){var e=Il.comparator(t.key,this.key);return this.m(e)},e}(Yl),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Jl(0,n),r}return Object(Uc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Yl),Xl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Jl(0,n),r}return Object(Uc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Yl);function Jl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Il.fromName(t.referenceValue)})}var th=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Uc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ml(e)&&Al(e.arrayValue,this.value)},e}(Yl),eh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Uc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Al(this.value.arrayValue,e)},e}(Yl),nh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Uc.c)(e,t),e.prototype.matches=function(t){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Al(this.value.arrayValue,e)},e}(Yl),rh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Uc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ml(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Al(e.value.arrayValue,t)})},e}(Yl),ih=function(t,e){this.position=t,this.before=e};function oh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Pl(t)}).join(",")}var sh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ah(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function uh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Il.comparator(Il.fromName(s.referenceValue),n.key):Nl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ch(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!kl(t.position[n],e.position[n]))return!1;return!0}var lh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function hh(t,e,n,r,i,o,s,a){return new lh(t,e,n,r,i,o,s,a)}function dh(t){return new lh(t)}function fh(t){return!Sl(t.limit)&&"F"===t.limitType}function ph(t){return!Sl(t.limit)&&"L"===t.limitType}function yh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function mh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function gh(t){return null!==t.collectionGroup}function vh(t){var e=tl(t);if(null===e.p){e.p=[];var n=mh(e),r=yh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new sh(n)),e.p.push(new sh(pl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new sh(pl.keyField(),u))}}}return e.p}function bh(t){var e=tl(t);if(!e.T)if("F"===e.limitType)e.T=Kl(e.path,e.collectionGroup,vh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=vh(e);r<i.length;r++){var o=i[r];n.push(new sh(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ih(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ih(e.startAt.position,!e.startAt.before):null;e.T=Kl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function _h(t,e,n){return new lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wh(t,e){return Wl(bh(t),bh(e))&&t.limitType===e.limitType}function Eh(t){return Gl(bh(t))+"|lt:"+t.limitType}function Ch(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Pl(e.value);var e}).join(", ")+"]"),Sl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+oh(t.startAt)),t.endAt&&(e+=", endAt: "+oh(t.endAt)),"Target("+e+")"}(bh(t))+"; limitType="+t.limitType+")"}function Sh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Il.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!uh(t.startAt,vh(t),e)||t.endAt&&uh(t.endAt,vh(t),e))}(t,e)}function Th(t){return function(e,n){for(var r=!1,i=0,o=vh(t);i<o.length;i++){var s=o[i],a=Oh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Oh(t,e,n){var r=t.field.isKeyField()?Il.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Nl(r,i):Xc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xc()}}function Ih(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tl(e)?"-0":e}}function xh(t){return{integerValue:""+t}}function kh(t,e){return Ol(e)?xh(e):Ih(t,e)}var Ah=function(){this._=void 0};function Nh(t,e,n){return t instanceof jh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Rh?Fh(t,e):t instanceof Mh?Lh(t,e):function(t,e){var n=Ph(t,e),r=qh(n)+qh(t.A);return Fl(n)&&Fl(t.A)?xh(r):Ih(t.R,r)}(t,e)}function Dh(t,e,n){return t instanceof Rh?Fh(t,e):t instanceof Mh?Lh(t,e):n}function Ph(t,e){return t instanceof Vh?Fl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e}(Ah),Rh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Uc.c)(e,t),e}(Ah);function Fh(t,e){for(var n=Bh(e),r=function(t){n.some(function(e){return kl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Mh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Uc.c)(e,t),e}(Ah);function Lh(t,e){for(var n=Bh(e),r=function(t){n=n.filter(function(e){return!kl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Uc.c)(e,t),e}(Ah);function qh(t){return bl(t.integerValue||t.doubleValue)}function Bh(t){return Ml(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Uh=function(t,e){this.field=t,this.transform=e},Hh=function(t,e){this.version=t,this.transformResults=e},zh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Kh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Gh=function(){};function Wh(t,e,n){t instanceof Xh?function(t,e,n){var r=t.value.clone(),i=ed(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Jh?function(t,e,n){if(Kh(t.precondition,e)){var r=ed(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(td(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Qh(t,e,n){t instanceof Xh?function(t,e,n){if(Kh(t.precondition,e)){var r=t.value.clone(),i=nd(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Zh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Jh?function(t,e,n){if(Kh(t.precondition,e)){var r=nd(t.fieldTransforms,n,e),i=e.data;i.setAll(td(t)),i.setAll(r),e.convertToFoundDocument(Zh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Kh(t.precondition,e)&&e.convertToNoDocument(al.min())}(t,e)}function Yh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Ph(o.transform,s||null);null!=a&&(null==n&&(n=Bl.empty()),n.set(o.field,a))}return n||null}function $h(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&il(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Rh&&e instanceof Rh||t instanceof Mh&&e instanceof Mh?il(t.elements,e.elements,kl):t instanceof Vh&&e instanceof Vh?kl(t.A,e.A):t instanceof jh&&e instanceof jh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Zh(t){return t.isFoundDocument()?t.version:al.min()}var Xh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Uc.c)(e,t),e}(Gh),Jh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Uc.c)(e,t),e}(Gh);function td(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function ed(t,e,n){var r=new Map;Jc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Dh(s,a,n[i]))}return r}function nd(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Nh(a,u,e))}return r}var rd,id,od=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Uc.c)(e,t),e}(Gh),sd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Uc.c)(e,t),e}(Gh),ad=function(t){this.count=t};function ud(t){switch(t){case zc.OK:return Xc();case zc.CANCELLED:case zc.UNKNOWN:case zc.DEADLINE_EXCEEDED:case zc.RESOURCE_EXHAUSTED:case zc.INTERNAL:case zc.UNAVAILABLE:case zc.UNAUTHENTICATED:return!1;case zc.INVALID_ARGUMENT:case zc.NOT_FOUND:case zc.ALREADY_EXISTS:case zc.PERMISSION_DENIED:case zc.FAILED_PRECONDITION:case zc.ABORTED:case zc.OUT_OF_RANGE:case zc.UNIMPLEMENTED:case zc.DATA_LOSS:return!0;default:return Xc()}}function cd(t){if(void 0===t)return Yc("GRPC error has no .code"),zc.UNKNOWN;switch(t){case rd.OK:return zc.OK;case rd.CANCELLED:return zc.CANCELLED;case rd.UNKNOWN:return zc.UNKNOWN;case rd.DEADLINE_EXCEEDED:return zc.DEADLINE_EXCEEDED;case rd.RESOURCE_EXHAUSTED:return zc.RESOURCE_EXHAUSTED;case rd.INTERNAL:return zc.INTERNAL;case rd.UNAVAILABLE:return zc.UNAVAILABLE;case rd.UNAUTHENTICATED:return zc.UNAUTHENTICATED;case rd.INVALID_ARGUMENT:return zc.INVALID_ARGUMENT;case rd.NOT_FOUND:return zc.NOT_FOUND;case rd.ALREADY_EXISTS:return zc.ALREADY_EXISTS;case rd.PERMISSION_DENIED:return zc.PERMISSION_DENIED;case rd.FAILED_PRECONDITION:return zc.FAILED_PRECONDITION;case rd.ABORTED:return zc.ABORTED;case rd.OUT_OF_RANGE:return zc.OUT_OF_RANGE;case rd.UNIMPLEMENTED:return zc.UNIMPLEMENTED;case rd.DATA_LOSS:return zc.DATA_LOSS;default:return Xc()}}(id=rd||(rd={}))[id.OK=0]="OK",id[id.CANCELLED=1]="CANCELLED",id[id.UNKNOWN=2]="UNKNOWN",id[id.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",id[id.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",id[id.NOT_FOUND=5]="NOT_FOUND",id[id.ALREADY_EXISTS=6]="ALREADY_EXISTS",id[id.PERMISSION_DENIED=7]="PERMISSION_DENIED",id[id.UNAUTHENTICATED=16]="UNAUTHENTICATED",id[id.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",id[id.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",id[id.ABORTED=10]="ABORTED",id[id.OUT_OF_RANGE=11]="OUT_OF_RANGE",id[id.UNIMPLEMENTED=12]="UNIMPLEMENTED",id[id.INTERNAL=13]="INTERNAL",id[id.UNAVAILABLE=14]="UNAVAILABLE",id[id.DATA_LOSS=15]="DATA_LOSS";var ld=function(){function t(t,e){this.comparator=t,this.root=e||dd.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dd.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dd.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new hd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new hd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new hd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new hd(this.root,t,this.comparator,!0)},t}(),hd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),dd=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Xc();if(this.right.isRed())throw Xc();var t=this.left.check();if(t!==this.right.check())throw Xc();return t+(this.isRed()?0:1)},t}();dd.EMPTY=null,dd.RED=!0,dd.BLACK=!1,dd.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Xc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Xc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Xc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Xc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Xc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new dd(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var fd=function(){function t(t){this.comparator=t,this.data=new ld(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new pd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new pd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),pd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),yd=new ld(Il.comparator);function md(){return yd}var gd=new ld(Il.comparator);function vd(){return gd}var bd=new ld(Il.comparator);function _d(){return bd}var wd=new fd(Il.comparator);function Ed(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Cd=new fd(rl);function Sd(){return Cd}var Td=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Od.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(al.min(),r,Sd(),md(),Ed())},t}(),Od=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ml.EMPTY_BYTE_STRING,n,Ed(),Ed(),Ed())},t}(),Id=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},xd=function(t,e){this.targetId=t,this.V=e},kd=function(t,e,n,r){void 0===n&&(n=ml.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ad=function(){function t(){this.S=0,this.D=Pd(),this.C=ml.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ed(),e=Ed(),n=Ed();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Xc()}}),new Od(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Pd()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Nd=function(){function t(t){this.W=t,this.G=new Map,this.H=md(),this.J=Dd(),this.Y=new fd(rl)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Xc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ql(i))if(0===n){var o=new Il(i.path);this.tt(e,o,Hl.newNoDocument(o,al.min()))}else Jc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Ql(o.target)){var s=new Il(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Hl.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Ed();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Td(t,n,this.Y,this.H,r);return this.H=md(),this.J=Dd(),this.Y=new fd(rl),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ad,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new fd(rl),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Qc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ad),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Dd(){return new ld(Il.comparator)}function Pd(){return new ld(Il.comparator)}var jd={asc:"ASCENDING",desc:"DESCENDING"},Rd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fd=function(t,e){this.databaseId=t,this.I=e};function Md(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ld(t,e){return t.I?e.toBase64():e.toUint8Array()}function Vd(t,e){return Md(t,e.toTimestamp())}function qd(t){return Jc(!!t),al.fromTimestamp(function(t){var e=vl(t);return new sl(e.seconds,e.nanos)}(t))}function Bd(t,e){return function(t){return new dl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ud(t){var e=dl.fromString(t);return Jc(ff(e)),e}function Hd(t,e){return Bd(t.databaseId,e.path)}function zd(t,e){var n=Ud(e);if(n.get(1)!==t.databaseId.projectId)throw new Kc(zc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Kc(zc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Il(Qd(n))}function Kd(t,e){return Bd(t.databaseId,e)}function Gd(t){var e=Ud(t);return 4===e.length?dl.emptyPath():Qd(e)}function Wd(t){return new dl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qd(t){return Jc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Yd(t,e,n){return{name:Hd(t,e),fields:n.toProto().mapValue.fields}}function $d(t,e,n){var r=zd(t,e.name),i=qd(e.updateTime),o=new Bl({mapValue:{fields:e.fields}}),s=Hl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Zd(t,e){var n;if(e instanceof Xh)n={update:Yd(t,e.key,e.value)};else if(e instanceof od)n={delete:Hd(t,e.key)};else if(e instanceof Jh)n={update:Yd(t,e.key,e.data),updateMask:df(e.fieldMask)};else{if(!(e instanceof sd))return Xc();n={verify:Hd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof jh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Mh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Xc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Vd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Xc()}(t,e.precondition)),n}function Xd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?zh.updateTime(qd(t.updateTime)):void 0!==t.exists?zh.exists(t.exists):zh.none()}(e.currentDocument):zh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Jc("REQUEST_TIME"===e.setToServerValue),n=new jh):"appendMissingElements"in e?n=new Rh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Mh(e.removeAllFromArray.values||[]):"increment"in e?n=new Vh(t,e.increment):Xc();var r=pl.fromServerFormat(e.fieldPath);return new Uh(r,n)}(t,e)}):[];if(e.update){var i=zd(t,e.update.name),o=new Bl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new yl((t.fieldPaths||[]).map(function(t){return pl.fromServerFormat(t)}))}(e.updateMask);return new Jh(i,o,s,n,r)}return new Xh(i,o,n,r)}if(e.delete){var a=zd(t,e.delete);return new od(a,n)}if(e.verify){var u=zd(t,e.verify);return new sd(u,n)}return Xc()}function Jd(t,e){return{documents:[Kd(t,e.path)]}}function tf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Kd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Vl(t.value))return{unaryFilter:{field:uf(t.field),op:"IS_NAN"}};if(Ll(t.value))return{unaryFilter:{field:uf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vl(t.value))return{unaryFilter:{field:uf(t.field),op:"IS_NOT_NAN"}};if(Ll(t.value))return{unaryFilter:{field:uf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uf(t.field),op:af(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:uf(t.field),direction:sf(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Sl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=rf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=rf(e.endAt)),n}function ef(t){var e=Gd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Jc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=nf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new sh(cf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Sl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=of(n.startAt));var l=null;return n.endAt&&(l=of(n.endAt)),hh(e,i,a,s,u,"F",c,l)}function nf(t){return t?void 0!==t.unaryFilter?[hf(t)]:void 0!==t.fieldFilter?[lf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return nf(t)}).reduce(function(t,e){return t.concat(e)}):Xc():[]}function rf(t){return{before:t.before,values:t.position}}function of(t){return new ih(t.values||[],!!t.before)}function sf(t){return jd[t]}function af(t){return Rd[t]}function uf(t){return{fieldPath:t.canonicalString()}}function cf(t){return pl.fromServerFormat(t.fieldPath)}function lf(t){return Yl.create(cf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Xc()}}(t.fieldFilter.op),t.fieldFilter.value)}function hf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=cf(t.unaryFilter.field);return Yl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=cf(t.unaryFilter.field);return Yl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cf(t.unaryFilter.field);return Yl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cf(t.unaryFilter.field);return Yl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Xc()}}function df(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function ff(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function pf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mf(e)),e=yf(t.get(n),e);return mf(e)}function yf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function mf(t){return t+"\x01\x01"}function gf(t){var e=t.length;if(Jc(e>=2),2===e)return Jc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),dl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Xc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Xc()}o=s+2}return new dl(r)}var vf=function(t,e){this.seconds=t,this.nanoseconds=e},bf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};bf.store="owner",bf.key="owner";var _f=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};_f.store="mutationQueues",_f.keyPath="userId";var wf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};wf.store="mutations",wf.keyPath="batchId",wf.userMutationsIndex="userMutationsIndex",wf.userMutationsKeyPath=["userId","batchId"];var Ef=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,pf(e)]},t.key=function(t,e,n){return[t,pf(e),n]},t}();Ef.store="documentMutations",Ef.PLACEHOLDER=new Ef;var Cf=function(t,e){this.path=t,this.readTime=e},Sf=function(t,e){this.path=t,this.version=e},Tf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Tf.store="remoteDocuments",Tf.readTimeIndex="readTimeIndex",Tf.readTimeIndexPath="readTime",Tf.collectionReadTimeIndex="collectionReadTimeIndex",Tf.collectionReadTimeIndexPath=["parentPath","readTime"];var Of=function(t){this.byteSize=t};Of.store="remoteDocumentGlobal",Of.key="remoteDocumentGlobalKey";var If=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};If.store="targets",If.keyPath="targetId",If.queryTargetsIndexName="queryTargetsIndex",If.queryTargetsKeyPath=["canonicalId","targetId"];var xf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};xf.store="targetDocuments",xf.keyPath=["targetId","path"],xf.documentTargetsIndex="documentTargetsIndex",xf.documentTargetsKeyPath=["path","targetId"];var kf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};kf.key="targetGlobalKey",kf.store="targetGlobal";var Af=function(t,e){this.collectionId=t,this.parent=e};Af.store="collectionParents",Af.keyPath=["collectionId","parent"];var Nf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Nf.store="clientMetadata",Nf.keyPath="clientId";var Df=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Df.store="bundles",Df.keyPath="bundleId";var Pf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Pf.store="namedQueries",Pf.keyPath="name";var jf=Object(Uc.f)(Object(Uc.f)([],Object(Uc.f)(Object(Uc.f)([],Object(Uc.f)(Object(Uc.f)([],Object(Uc.f)(Object(Uc.f)([],[_f.store,wf.store,Ef.store,Tf.store,If.store,bf.store,kf.store,xf.store]),[Nf.store])),[Of.store])),[Af.store])),[Df.store,Pf.store]),Rf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ff=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Mf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Lf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Xc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Vf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Mf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Uf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Wf(e.target.error);n.ft.reject(new Uf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Uf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Qc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new zf(e)},t}(),qf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Vo.n)())&&Yc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Qc("SimpleDb","Removing database:",t),Kf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Vo.n)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Qc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Uf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Kc(zc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Uf(t,n))},i.onupgradeneeded=function(t){Qc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Qc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Uc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Uc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Uc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Vf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Lf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Qc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Bf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Kf(this.Pt.delete())},t}(),Uf=function(t){function e(e,n){var r=this;return(r=t.call(this,zc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Uc.c)(e,t),e}(Kc);function Hf(t){return"IndexedDbTransactionError"===t.name}var zf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Qc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Qc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Kf(n)},t.prototype.add=function(t){return Qc("SimpleDb","ADD",this.store.name,t,t),Kf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Kf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Qc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Qc("SimpleDb","DELETE",this.store.name,t),Kf(this.store.delete(t))},t.prototype.count=function(){return Qc("SimpleDb","COUNT",this.store.name),Kf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Qc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Lf(function(n,r){e.onerror=function(t){var e=Wf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Lf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Bf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Lf){var a=s.catch(function(t){return o.done(),Lf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Lf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Kf(t){return new Lf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Wf(t.target.error);n(e)}})}var Gf=!1;function Wf(t){var e=qf._t(Object(Vo.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Kc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gf||(Gf=!0,setTimeout(function(){throw r},0)),r}}return t}var Qf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Uc.c)(e,t),e}(Ff);function Yf(t,e){var n=tl(t);return qf.It(n.Mt,e)}var $f=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Wh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Qh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Qh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(al.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ed())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&il(this.mutations,t.mutations,function(t,e){return $h(t,e)})&&il(this.baseMutations,t.baseMutations,function(t,e){return $h(t,e)})},t}(),Zf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Jc(e.mutations.length===r.length);for(var i=_d(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Xf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=al.min()),void 0===o&&(o=al.min()),void 0===s&&(s=ml.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Jf=function(t){this.Lt=t};function tp(t,e){if(e.document)return $d(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Il.fromSegments(e.noDocument.path),r=op(e.noDocument.readTime),i=Hl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Il.fromSegments(e.unknownDocument.path);return r=op(e.unknownDocument.version),Hl.newUnknownDocument(o,r)}return Xc()}function ep(t,e,n){var r=np(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Hd(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Md(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Tf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ip(e.version);return s=e.hasCommittedMutations,new Tf(null,new Cf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=ip(e.version);return new Tf(new Sf(c,l),null,null,!0,r,i)}return Xc()}function np(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rp(t){var e=new sl(t[0],t[1]);return al.fromTimestamp(e)}function ip(t){var e=t.toTimestamp();return new vf(e.seconds,e.nanoseconds)}function op(t){var e=new sl(t.seconds,t.nanoseconds);return al.fromTimestamp(e)}function sp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Xd(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Xd(t.Lt,e)}),o=sl.fromMillis(e.localWriteTimeMs);return new $f(e.batchId,o,n,i)}function ap(t){var e,n,r=op(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?op(t.lastLimboFreeSnapshotVersion):al.min();return void 0!==t.query.documents?(Jc(1===(n=t.query).documents.length),e=bh(dh(Gd(n.documents[0])))):e=function(t){return bh(ef(t))}(t.query),new Xf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ml.fromBase64String(t.resumeToken))}function up(t,e){var n,r=ip(e.snapshotVersion),i=ip(e.lastLimboFreeSnapshotVersion);n=Ql(e.target)?Jd(t.Lt,e.target):tf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new If(e.targetId,Gl(e.target),r,o,e.sequenceNumber,i,n)}function cp(t){var e=ef({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_h(e,e.limit,"L"):e}var lp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return hp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:op(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return hp(t).put({bundleId:(n=e).id,createTime:ip(qd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return dp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:cp(e.bundledQuery),readTime:op(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return dp(t).put(function(t){return{name:t.name,readTime:ip(qd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function hp(t){return Yf(t,Df.store)}function dp(t){return Yf(t,Pf.store)}var fp=function(){function t(){this.Bt=new pp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Lf.resolve()},t.prototype.getCollectionParents=function(t,e){return Lf.resolve(this.Bt.getEntries(e))},t}(),pp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new fd(dl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new fd(dl.comparator)).toArray()},t}(),yp=function(){function t(){this.qt=new pp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:pf(i)};return mp(t).put(o)}return Lf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ol(e),""],!1,!0);return mp(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(gf(o.parent))}return n})},t}();function mp(t){return Yf(t,Af.store)}var gp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function bp(t,e,n){var r=t.store(wf.store),i=t.store(Ef.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Jc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Ef.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Lf.waitFor(o).next(function(){return c})}function _p(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xc();e=t.noDocument}return JSON.stringify(e).length}vp.DEFAULT_COLLECTION_PERCENTILE=10,vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vp.DEFAULT=new vp(41943040,vp.DEFAULT_COLLECTION_PERCENTILE,vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vp.DISABLED=new vp(-1,0,0);var wp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Jc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cp(t).Ot({index:wf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Sp(t),s=Cp(t);return s.add({}).next(function(a){Jc("number"==typeof a);for(var u=new $f(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Zd(t.Lt,e)}),i=n.mutations.map(function(e){return Zd(t.Lt,e)});return new wf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new fd(function(t,e){return rl(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],y=Ef.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,Ef.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Lf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Cp(t).get(e).next(function(t){return t?(Jc(t.userId===n.userId),sp(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Lf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Cp(t).Ot({index:wf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Jc(e.batchId>=r),o=sp(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Cp(t).Ot({index:wf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cp(t).Nt(wf.userMutationsIndex,n).next(function(t){return t.map(function(t){return sp(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ef.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Sp(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=gf(r[1]);if(a===n.userId&&e.path.isEqual(c))return Cp(t).get(u).next(function(t){if(!t)throw Xc();Jc(t.userId===n.userId),o.push(sp(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new fd(rl),i=[];return e.forEach(function(e){var o=Ef.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Sp(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=gf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Lf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ef.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new fd(rl);return Sp(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=gf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Cp(t).get(e).next(function(t){if(null===t)throw Xc();Jc(t.userId===n.userId),r.push(sp(n.R,t))}))}),Lf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return bp(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Lf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Lf.resolve();var r=IDBKeyRange.lowerBound(Ef.prefixForUser(e.userId)),i=[];return Sp(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=gf(t[1]);i.push(o)}else r.done()}).next(function(){Jc(0===i.length)})})},t.prototype.containsKey=function(t,e){return Ep(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Tp(t).get(this.userId).next(function(t){return t||new _f(e.userId,-1,"")})},t}();function Ep(t,e,n){var r=Ef.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Sp(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Cp(t){return Yf(t,wf.store)}function Sp(t){return Yf(t,Ef.store)}function Tp(t){return Yf(t,_f.store)}var Op=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ip=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Op(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return al.fromTimestamp(new sl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return xp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Jc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return xp(t).Ot(function(s,a){var u=ap(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Lf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return xp(t).Ot(function(t,n){var r=ap(n);e(r)})},t.prototype.Xt=function(t){return kp(t).get(kf.key).next(function(t){return Jc(null!==t),t})},t.prototype.Zt=function(t,e){return kp(t).put(kf.key,e)},t.prototype.te=function(t,e){return xp(t).put(up(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Gl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return xp(t).Ot({range:r,index:If.queryTargetsIndexName},function(t,n,r){var o=ap(n);Wl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ap(t);return e.forEach(function(e){var s=pf(e.path);i.push(o.put(new xf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Lf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ap(t);return Lf.forEach(e,function(e){var o=pf(e.path);return Lf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ap(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ap(t),i=Ed();return r.Ot({range:n,kt:!0},function(t,e,n){var r=gf(t[1]),o=new Il(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=pf(e.path),r=IDBKeyRange.bound([n],[ol(n)],!1,!0),i=0;return Ap(t).Ot({index:xf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return xp(t).get(e).next(function(t){return t?ap(t):null})},t}();function xp(t){return Yf(t,If.store)}function kp(t){return Yf(t,kf.store)}function Ap(t){return Yf(t,xf.store)}function Np(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){if(t.code!==zc.FAILED_PRECONDITION||t.message!==Rf)throw t;return Qc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Dp(t,e){var n=t[1],r=e[1],i=rl(t[0],e[0]);return 0===i?rl(n,r):i}var Pp=function(){function t(t){this.ne=t,this.buffer=new fd(Dp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Dp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),jp=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Qc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Uc.b)(e,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Hf(e=n.sent())?(Qc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Np(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Rp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Lf.resolve(Hc.o);var r=new Pp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Qc("LruGarbageCollector","Garbage collection skipped; disabled"),Lf.resolve(gp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Qc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),gp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Qc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Wc()<=qo.a.DEBUG&&Qc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Lf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Fp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Rp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Mp(t,n)},t.prototype.removeReference=function(t,e,n){return Mp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Mp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Tp(t).$t(function(r){return Ep(t,r,e).next(function(t){return t&&(n=!0),Lf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Ap(t).delete([0,pf(s.path)])})});i.push(u)}}).next(function(){return Lf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Mp(t,e)},t.prototype.we=function(t,e){var n,r=Ap(t),i=Hc.o;return r.Ot({index:xf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Hc.o&&e(new Il(gf(n)),i),i=s,n=o):i=Hc.o}).next(function(){i!==Hc.o&&e(new Il(gf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Mp(t,e){return Ap(t).put(function(t,e){return new xf(0,pf(t.path),e)}(e,t.currentSequenceNumber))}var Lp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){cl(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ll(this.inner)},t}(),Vp=function(){function t(){this.changes=new Lp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:al.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Hl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Lf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),qp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Hp(t).put(zp(e),n)},t.prototype.removeEntry=function(t,e){var n=Hp(t),r=zp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Hp(t).get(zp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Hp(t).get(zp(e)).next(function(t){return{document:n.ye(e,t),size:_p(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=md();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=md(),i=new ld(Il.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,_p(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Lf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Hp(t).Ot({range:r},function(t,e,r){for(var s=Il.fromSegments(t);o&&Il.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=md(),o=e.path.length+1,s={};if(n.isEqual(al.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=np(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Tf.collectionReadTimeIndex}return Hp(t).Ot(s,function(t,n,s){if(t.length===o){var a=tp(r.R,n);e.path.isPrefixOf(a.key.path)?Sh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Bp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Up(t).get(Of.key).next(function(t){return Jc(!!t),t})},t.prototype.me=function(t,e){return Up(t).put(Of.key,e)},t.prototype.ye=function(t,e){if(e){var n=tp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(al.min()))return n}return Hl.newInvalidDocument(t)},t}(),Bp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Lp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Uc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new fd(function(t,e){return rl(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=ep(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=_p(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=ep(e.Ie.R,Hl.newNoDocument(o,al.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Lf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Vp);function Up(t){return Yf(t,Of.store)}function Hp(t){return Yf(t,Tf.store)}function zp(t){return t.path.toArray()}var Kp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Jc(n<r&&n>=0&&r<=11);var o=new Vf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(bf.store)}(t),function(t){t.createObjectStore(_f.store,{keyPath:_f.keyPath}),t.createObjectStore(wf.store,{keyPath:wf.keyPath,autoIncrement:!0}).createIndex(wf.userMutationsIndex,wf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ef.store)}(t),Gp(t),function(t){t.createObjectStore(Tf.store)}(t));var s=Lf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(xf.store),t.deleteObjectStore(If.store),t.deleteObjectStore(kf.store)}(t),Gp(t)),s=s.next(function(){return function(t){var e=t.store(kf.store),n=new kf(0,0,al.min().toTimestamp(),0);return e.put(kf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(wf.store).Nt().next(function(n){t.deleteObjectStore(wf.store),t.createObjectStore(wf.store,{keyPath:wf.keyPath,autoIncrement:!0}).createIndex(wf.userMutationsIndex,wf.userMutationsKeyPath,{unique:!0});var r=e.store(wf.store),i=n.map(function(t){return r.put(t)});return Lf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Nf.store,{keyPath:Nf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Of.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Tf.store);e.createIndex(Tf.readTimeIndex,Tf.readTimeIndexPath,{unique:!1}),e.createIndex(Tf.collectionReadTimeIndex,Tf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Df.store,{keyPath:Df.keyPath})}(t),function(t){t.createObjectStore(Pf.store,{keyPath:Pf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Tf.store).Ot(function(t,n){e+=_p(n)}).next(function(){var n=new Of(e);return t.store(Of.store).put(Of.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(_f.store),r=t.store(wf.store);return n.Nt().next(function(n){return Lf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(wf.userMutationsIndex,i).next(function(r){return Lf.forEach(r,function(r){Jc(r.userId===n.userId);var i=sp(e.R,r);return bp(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(xf.store),n=t.store(Tf.store);return t.store(kf.store).get(kf.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new dl(n),s=function(t){return[0,pf(t)]}(o);r.push(e.get(s).next(function(n){return n?Lf.resolve():function(n){return e.put(new xf(0,pf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Lf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Af.store,{keyPath:Af.keyPath});var n=e.store(Af.store),r=new pp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:pf(i)})}};return e.store(Tf.store).Ot({kt:!0},function(t,e){var n=new dl(t);return i(n.popLast())}).next(function(){return e.store(Ef.store).Ot({kt:!0},function(t,e){var n=gf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(If.store);return n.Ot(function(t,r){var i=ap(r),o=up(e.R,i);return n.put(o)})},t}();function Gp(t){t.createObjectStore(xf.store,{keyPath:xf.keyPath}).createIndex(xf.documentTargetsIndex,xf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(If.store,{keyPath:If.keyPath}).createIndex(If.queryTargetsIndexName,If.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kf.store)}var Wp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Kc(zc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fp(this,i),this.Le=n+"main",this.R=new Jf(u),this.Be=new qf(this.Le,11,new Kp(this.R)),this.qe=new Ip(this.referenceDelegate,this.R),this.Ut=new yp,this.Ue=function(t,e){return new qp(t,e)}(this.R,this.Ut),this.Qe=new lp,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Yc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Kc(zc.FAILED_PRECONDITION,Wp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Hc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Uc.b)(e,void 0,void 0,function(){return Object(Uc.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Uc.b)(e,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Uc.b)(e,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return $p(e).put(new Nf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Hf(e))return Qc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Qc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Yp(t).get(bf.key).next(function(t){return Lf.resolve(e.tn(t))})},t.prototype.en=function(t){return $p(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Yf(t,Nf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Lf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Lf.resolve(!0):Yp(t).get(bf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Kc(zc.FAILED_PRECONDITION,Wp);return!1}}return!(!e.networkEnabled||!e.inForeground)||$p(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Qc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t=this;return Object(Uc.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[bf.store,Nf.store],function(e){var n=new Qf(e,Hc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return $p(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return wp.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Qc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",jf,function(o){return r=new Qf(o,i.Ne?i.Ne.next():Hc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Yc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Kc(zc.FAILED_PRECONDITION,Rf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Yp(t).get(bf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Kc(zc.FAILED_PRECONDITION,Wp)})},t.prototype.Ze=function(t){var e=new bf(this.clientId,this.allowTabSynchronization,Date.now());return Yp(t).put(bf.key,e)},t.yt=function(){return qf.yt()},t.prototype.Xe=function(t){var e=this,n=Yp(t);return n.get(bf.key).next(function(t){return e.tn(t)?(Qc("IndexedDbPersistence","Releasing primary lease."),n.delete(bf.key)):Lf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Yc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Qc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Yc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Yc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Yp(t){return Yf(t,bf.store)}function $p(t){return Yf(t,Nf.store)}function Zp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Xp=function(t,e){this.progress=t,this.wn=e},Jp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Il.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):gh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Il(e)).next(function(t){var e=vd();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=vd();return this.Ut.getCollectionParents(t,i).next(function(s){return Lf.forEach(s,function(s){var a=function(t,e){return new lh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Hl.newInvalidDocument(c),r=r.insert(c,l)),Qh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Sh(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Ed(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Jh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),ty=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ed(),i=Ed(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ey=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(al.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(fh(e)||ph(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Wc()<=qo.a.DEBUG&&Qc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ch(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new fd(Th(t));return e.forEach(function(e,r){Sh(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Wc()<=qo.a.DEBUG&&Qc("QueryEngine","Using full collection scan to execute query:",Ch(e)),this.Sn.getDocumentsMatchingQuery(t,e,al.min())},t}(),ny=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ld(rl),this.kn=new Lp(function(t){return Gl(t)},Wl),this.On=al.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Jp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ry(t,e,n,r){return new ny(t,e,n,r)}function iy(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Uc.d)(this,function(s){switch(s.label){case 0:return n=tl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Jp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Ed(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var y=0,m=p.mutations;y<m.length;y++)s=s.add(m[y].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function oy(t,e){var n=tl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Lf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Jc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function sy(t){var e=tl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function ay(t,e){var n=tl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Jc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=md();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(uy(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(al.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Lf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function uy(t,e,n,r,i){var o=Ed();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=md();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(al.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Qc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function cy(t,e){var n=tl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function ly(t,e){var n=tl(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Lf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Xf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function hy(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:r=tl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Hf(s=a.sent()))throw s;return Qc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function dy(t,e,n){var r=tl(t),i=al.min(),o=Ed();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=tl(t),i=r.kn.get(n);return void 0!==i?Lf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,bh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:al.min(),n?o:Ed())}).next(function(t){return{documents:t,Bn:o}})})}function fy(t,e){var n=tl(t),r=tl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function py(t){var e=tl(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=tl(t),i=md(),o=np(n),s=Hp(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Tf.readTimeIndex,range:a},function(t,e){var n=tp(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:rp(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function yy(t){return Object(Uc.b)(this,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){return[2,(e=tl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Hp(t),n=al.min();return e.Ot({index:Tf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=rp(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function my(t,e,n,r){return Object(Uc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Uc.d)(this,function(p){switch(p.label){case 0:for(i=tl(t),o=Ed(),s=md(),a=_d(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,ly(i,function(t){return bh(dh(dl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return uy(t,d,s,al.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function gy(t,e,n){return void 0===n&&(n=Ed()),Object(Uc.b)(this,void 0,void 0,function(){var r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return[4,ly(t,bh(cp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=tl(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=qd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(ml.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var vy=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Lf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:qd(n.createTime)}),Lf.resolve()},t.prototype.getNamedQuery=function(t,e){return Lf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:cp(t.bundledQuery),readTime:qd(t.readTime)}}(e)),Lf.resolve()},t}(),by=function(){function t(){this.Wn=new fd(_y.Gn),this.zn=new fd(_y.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new _y(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new _y(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Il(new dl([])),r=new _y(n,t),i=new _y(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Il(new dl([])),n=new _y(e,t),r=new _y(e,t+1),i=Ed();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new _y(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),_y=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Il.comparator(t.key,e.key)||rl(t.ns,e.ns)},t.Hn=function(t,e){return rl(t.ns,e.ns)||Il.comparator(t.key,e.key)},t}(),wy=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new fd(_y.Gn)}return t.prototype.checkEmpty=function(t){return Lf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new $f(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new _y(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Lf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Lf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Lf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Lf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Lf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new _y(e,0),i=new _y(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Lf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new fd(rl);return e.forEach(function(t){var e=new _y(t,0),i=new _y(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Lf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Il.isDocumentKey(i)||(i=i.child(""));var o=new _y(new Il(i),0),s=new fd(rl);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Lf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Jc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Lf.forEach(e.mutations,function(i){var o=new _y(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new _y(e,0),r=this.rs.firstAfterOrEqual(n);return Lf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Lf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Ey=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ld(Il.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Lf.resolve(n?n.document.clone():Hl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=md();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Hl.newInvalidDocument(t))}),Lf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=md(),i=new Il(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Sh(e,u)&&(r=r.insert(u.key,u.clone()))}return Lf.resolve(r)},t.prototype.fs=function(t,e){return Lf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Cy(this)},t.prototype.getSize=function(t){return Lf.resolve(this.size)},t}(),Cy=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Uc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Lf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Vp),Sy=function(){function t(t){this.persistence=t,this.ds=new Lp(function(t){return Gl(t)},Wl),this.lastRemoteSnapshotVersion=al.min(),this.highestTargetId=0,this.ws=0,this._s=new by,this.targetCount=0,this.ys=Op.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Lf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Lf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Lf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Lf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Lf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Op(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Lf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Lf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Lf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Lf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Lf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Lf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Lf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Lf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Lf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Lf.resolve(n)},t.prototype.containsKey=function(t,e){return Lf.resolve(this._s.containsKey(e))},t}(),Ty=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Hc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Sy(this),this.Ut=new fp,this.Ue=function(t,e){return new Ey(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Jf(e),this.Qe=new vy(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new wy(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Qc("MemoryPersistence","Starting transaction:",t);var i=new Oy(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Lf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Oy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Uc.c)(e,t),e}(Ff),Iy=function(){function t(t){this.persistence=t,this.As=new by,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Xc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Lf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Lf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Lf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lf.forEach(this.vs,function(r){var i=Il.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Lf.or([function(){return Lf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),xy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ky(t,e){return"firestore_clients_"+t+"_"+e}function Ay(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ny(t,e){return"firestore_targets_"+t+"_"+e}xy.UNAUTHENTICATED=new xy(null),xy.GOOGLE_CREDENTIALS=new xy("google-credentials-uid"),xy.FIRST_PARTY=new xy("first-party-uid");var Dy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Kc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Yc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Py=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Kc(i.error.code,i.error.message)),o?new t(e,i.state,r):(Yc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sd(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ol(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Yc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ry=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Yc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Fy=function(){function t(){this.activeTargetIds=Sd()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),My=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ld(rl),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=ky(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Fy),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Uc.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(ky(this.persistenceKey,r)))&&(o=jy.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ny(this.persistenceKey,t));if(n){var r=Py.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ny(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Qc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Qc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Qc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Qc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Yc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Uc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Uc.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Hc.o;if(null!=t)try{var n=JSON.parse(t);Jc("number"==typeof n),e=n}catch(t){Yc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Hc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Dy(this.currentUser,t,e,n),i=Ay(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Ay(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ny(this.persistenceKey,t),i=new Py(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return jy.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Dy.Vs(new xy(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Py.Vs(r,e)},t.prototype.js=function(t){return Ry.Vs(t)},t.prototype.ii=function(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Qc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Sd();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Ly=function(){function t(){this.li=new Fy,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Fy,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Vy=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),qy=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Qc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Qc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),By={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Uy=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Hy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Uc.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Bc;s.listenOnce(Lc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Mc.NO_ERROR:var e=s.getResponseJson();Qc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Mc.TIMEOUT:Qc("Connection",'RPC "'+t+'" timed out'),o(new Kc(zc.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:var n=s.getStatus();if(Qc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(zc).indexOf(e)>=0?e:zc.UNKNOWN}(r.status);o(new Kc(a,r.message))}else o(new Kc(zc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Kc(zc.UNAVAILABLE,"Connection failed."));break;default:Xc()}}finally{Qc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Dc,i=Ra(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Vo.u)()||Object(Vo.x)()||Object(Vo.r)()||Object(Vo.t)()||Object(Vo.y)()||Object(Vo.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Qc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Uy({Ei:function(t){c?Qc("Connection","Not sending because WebChannel is closed:",t):(u||(Qc("Connection","Opening WebChannel transport."),a.open(),u=!0),Qc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,qc.EventType.OPEN,function(){c||Qc("Connection","WebChannel transport opened.")}),h(a,qc.EventType.CLOSE,function(){c||(c=!0,Qc("Connection","WebChannel transport closed"),l.Vi())}),h(a,qc.EventType.ERROR,function(t){c||(c=!0,$c("Connection","WebChannel transport errored:",t),l.Vi(new Kc(zc.UNAVAILABLE,"The operation could not be completed")))}),h(a,qc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Jc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Qc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=rd[t];if(void 0!==e)return cd(e)}(i),s=r.message;void 0===o&&(o=zc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Kc(o,s)),a.close()}else Qc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Vc.STAT_EVENT,function(t){10===t.stat?Qc("Connection","Detected buffering proxy"):11===t.stat&&Qc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Qc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Qc("RestConnection","Received: ",t),t},function(e){throw $c("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+By[t]},t}());function zy(){return"undefined"!=typeof window?window:null}function Ky(){return"undefined"!=typeof document?document:null}function Gy(t){return new Fd(t,!0)}var Wy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Qc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Qy=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Wy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===zc.RESOURCE_EXHAUSTED?(Yc(e.toString()),Yc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===zc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Kc(zc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Uc.b)(t,void 0,void 0,function(){return Object(Uc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Qc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Qc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Yy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Uc.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Xc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Jc(void 0===e||"string"==typeof e),ml.fromBase64String(e||"")):(Jc(void 0===e||e instanceof Uint8Array),ml.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?zc.UNKNOWN:cd(t.code);return new Kc(e,t.message||"")}(a);n=new kd(r,i,o,s||null)}else if("documentChange"in e){i=zd(t,(r=e.documentChange).document.name),o=qd(r.document.updateTime);var a=new Bl({mapValue:{fields:r.document.fields}}),u=(s=Hl.newFoundDocument(i,o,a),r.targetIds||[]);n=new Id(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=zd(t,(r=e.documentDelete).document),o=r.readTime?qd(r.readTime):al.min(),a=Hl.newNoDocument(i,o),n=new Id([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=zd(t,(r=e.documentRemove).document),n=new Id([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Xc();var c=e.filter;i=new ad(r=c.count||0),n=new xd(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return al.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?al.min():e.readTime?qd(e.readTime):al.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Wd(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ql(r)?{documents:Jd(t,r)}:{query:tf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ld(t,e.resumeToken):e.snapshotVersion.compareTo(al.min())>0&&(n.readTime=Md(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Wd(this.R),e.removeTarget=t,this.cr(e)},e}(Qy),$y=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Uc.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Jc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Jc(void 0!==e),t.map(function(t){return function(t,e){var n=qd(t.updateTime?t.updateTime:e);return n.isEqual(al.min())&&(n=qd(e)),new Hh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=qd(t.commitTime);return this.listener.Tr(n,e)}return Jc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Wd(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Zd(e.R,t)})};this.cr(n)},e}(Qy),Zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Uc.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Kc(zc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===zc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Kc(zc.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===zc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Kc(zc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Xy=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Yc(e),this.Vr=!1):Qc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Jy=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Uc.b)(o,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return um(this)?(Qc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Uc.b)(this,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return(e=tl(t)).$r.add(4),[4,em(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,tm(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Xy(n,r)};function tm(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:if(!um(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function em(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nm(t,e){var n=tl(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),am(n)?sm(n):Cm(n).er()&&im(n,e))}function rm(t,e){var n=tl(t),r=Cm(n);n.Or.delete(e),r.er()&&om(n,e),0===n.Or.size&&(r.er()?r.ir():um(n)&&n.Br.set("Unknown"))}function im(t,e){t.qr.U(e.targetId),Cm(t).mr(e)}function om(t,e){t.qr.U(e),Cm(t).yr(e)}function sm(t){t.qr=new Nd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Cm(t).start(),t.Br.Sr()}function am(t){return um(t)&&!Cm(t).tr()&&t.Or.size>0}function um(t){return 0===tl(t).$r.size}function cm(t){t.qr=void 0}function lm(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){return t.Or.forEach(function(e,n){im(t,e)}),[2]})})}function hm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(n){return cm(t),am(t)?(t.Br.Nr(e),sm(t)):t.Br.set("Unknown"),[2]})})}function dm(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o;return Object(Uc.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof kd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Uc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Qc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Id?t.qr.X(e):e instanceof xd?t.qr.rt(e):t.qr.et(e),n.isEqual(al.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,sy(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(ml.EMPTY_BYTE_STRING,n.snapshotVersion)),om(t,e);var r=new Xf(n.target,e,1,n.sequenceNumber);im(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Qc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,fm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function fm(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r=this;return Object(Uc.d)(this,function(i){switch(i.label){case 0:if(!Hf(e))throw e;return t.$r.add(1),[4,em(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return sy(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Uc.b)(r,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return Qc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,tm(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function pm(t,e){return e().catch(function(n){return fm(t,n,e)})}function ym(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Uc.d)(this,function(s){switch(s.label){case 0:e=tl(t),n=Sm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return um(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,cy(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Sm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,fm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return mm(e)&&gm(e),[2]}})})}function mm(t){return um(t)&&!Sm(t).tr()&&t.kr.length>0}function gm(t){Sm(t).start()}function vm(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){return Sm(t).Ar(),[2]})})}function bm(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n,r;return Object(Uc.d)(this,function(i){for(e=Sm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function _m(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Zf.from(r,e,n),[4,pm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,ym(t)];case 2:return o.sent(),[2]}})})}function wm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(n){switch(n.label){case 0:return e&&Sm(t).pr?[4,function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return ud(r=e.code)&&r!==zc.ABORTED?(n=t.kr.shift(),Sm(t).sr(),[4,pm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,ym(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return mm(t)&&gm(t),[2]}})})}function Em(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return n=tl(t),e?(n.$r.delete(2),[4,tm(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,em(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Cm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=tl(t);return r.br(),new Yy(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:lm.bind(null,t),Ri:hm.bind(null,t),_r:dm.bind(null,t)}),t.Mr.push(function(n){return Object(Uc.b)(e,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),am(t)?sm(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),cm(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Sm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=tl(t);return r.br(),new $y(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:vm.bind(null,t),Ri:wm.bind(null,t),Ir:bm.bind(null,t),Tr:_m.bind(null,t)}),t.Mr.push(function(n){return Object(Uc.b)(e,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,ym(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Qc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Tm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kc(zc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Om(t,e){if(Yc("AsyncQueue",e+": "+t),Hf(t))return new Kc(zc.UNAVAILABLE,e+": "+t);throw t}var Im=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Il.comparator(e.key,n.key)}:function(t,e){return Il.comparator(t.key,e.key)},this.keyedMap=vd(),this.sortedSet=new ld(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),xm=function(){function t(){this.Kr=new ld(Il.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Xc():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),km=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Im.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Am=function(){this.Wr=void 0,this.listeners=[]},Nm=function(){this.queries=new Lp(function(t){return Eh(t)},wh),this.onlineState="Unknown",this.Gr=new Set};function Dm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Uc.d)(this,function(c){switch(c.label){case 0:if(n=tl(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Am),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Om(a,"Initialization of query '"+Ch(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Fm(n),[2]}})})}function Pm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Uc.d)(this,function(a){return n=tl(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function jm(t,e){for(var n=tl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Fm(n)}function Rm(t,e,n){var r=tl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Fm(t){t.Gr.forEach(function(t){t.next()})}var Mm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new km(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=km.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Lm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Vm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return zd(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?$d(this.R,t.document,!1):Hl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return qd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Vm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Ed()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return[4,my(this.localStore,new Vm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,gy(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Xp(Object.assign({},this.progress),t))]}})})}}();var qm=function(t){this.key=t},Bm=function(t){this.key=t},Um=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ed(),this.mutatedKeys=Ed(),this.lo=Th(t),this.fo=new Im(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new xm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=fh(this.query)&&i.size===this.query.limit?i.last():null,c=ph(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Sh(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),fh(this.query)||ph(this.query))for(;s.size>this.query.limit;){var l=fh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new km(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new xm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ed(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Bm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new qm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ed();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return km.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Hm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zm=function(t){this.key=t,this.bo=!1},Km=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Lp(function(t){return Eh(t)},wh),this.Vo=new Map,this.So=new Set,this.Do=new ld(Il.comparator),this.Co=new Map,this.No=new by,this.xo={},this.Fo=new Map,this.ko=Op.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Gm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:return n=wg(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,ly(n.localStore,bh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Wm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&nm(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Wm(t,e,n,r){return Object(Uc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Uc.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Uc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,dy(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(sg(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,dy(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Um(e,i.Bn),s=o._o(i.documents),a=Od.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),sg(t,n,u.To),c=new Hm(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Qm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return n=tl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!wh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,hy(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),rm(n.remoteStore,r.targetId),ig(n,r.targetId)}).catch(Np)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ig(n,r.targetId),[4,hy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Ym(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:r=Eg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=tl(t),i=sl.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ed());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Yh(c,n.get(c.key));null!=l&&s.push(new Jh(c.key,l,Ul(l.toProto().mapValue),zh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ld(rl)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,cg(r,i.changes)];case 3:return a.sent(),[4,ym(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Om(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function $m(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r;return Object(Uc.d)(this,function(i){switch(i.label){case 0:n=tl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ay(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Jc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Jc(r.bo):t.removedDocuments.size>0&&(Jc(r.bo),r.bo=!1))}),[4,cg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Np(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Zm(t,e,n){var r=tl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=tl(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Fm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xm(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Uc.d)(this,function(c){switch(c.label){case 0:return(r=tl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ld(Il.comparator)).insert(o,Hl.newNoDocument(o,al.min())),a=Ed().add(o),u=new Td(al.min(),new Map,new fd(rl),s,a),[4,$m(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ug(r),[3,4];case 2:return[4,hy(r.localStore,e,!1).then(function(){return ig(r,e,n)}).catch(Np)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Jm(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:n=tl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,oy(n.localStore,e)];case 2:return i=o.sent(),rg(n,r,null),ng(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,cg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Np(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function tg(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:r=tl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=tl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Jc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),rg(r,e,n),ng(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,cg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Np(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function eg(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:um((n=tl(t)).remoteStore)||Qc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=tl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Om(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ng(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function rg(t,e,n){var r=tl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ig(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||og(t,e)})}function og(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(rm(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ug(t))}function sg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof qm?(t.No.addReference(o.key,e),ag(t,o)):o instanceof Bm?(Qc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||og(t,o.key)):Xc()}}function ag(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Qc("SyncEngine","New document in limbo: "+n),t.So.add(r),ug(t))}function ug(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Il(dl.fromString(e)),r=t.ko.next();t.Co.set(r,new zm(n)),t.Do=t.Do.insert(n,r),nm(t.remoteStore,new Xf(bh(dh(n.path)),r,2,Hc.o))}}function cg(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:return r=tl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ty.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Uc.d)(this,function(l){switch(l.label){case 0:n=tl(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Lf.forEach(e,function(e){return Lf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Lf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Hf(r=l.sent()))throw r;return Qc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function lg(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return(n=tl(t)).currentUser.isEqual(e)?[3,3]:(Qc("SyncEngine","User change. New user:",e.toKey()),[4,iy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Kc(zc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,cg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function hg(t,e){var n=tl(t),r=n.Co.get(e);if(r&&r.bo)return Ed().add(r.key);var i=Ed(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function dg(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return[4,dy((n=tl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&sg(n,e.targetId,i.To),i)]}})})}function fg(t){return Object(Uc.b)(this,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){return[2,py((e=tl(t)).localStore).then(function(t){return cg(e,t)})]})})}function pg(t,e,n,r){return Object(Uc.b)(this,void 0,void 0,function(){var i,o;return Object(Uc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=tl(t),r=tl(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Lf.resolve(null)})})}((i=tl(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ym(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(rg(i,e,r||null),ng(i,e),function(t,e){tl(tl(t)._n).Gt(e)}(i.localStore,e)):Xc(),s.label=4;case 4:return[4,cg(i,o)];case 5:return s.sent(),[3,7];case 6:Qc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function yg(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Uc.d)(this,function(c){switch(c.label){case 0:return wg(n=tl(t)),Eg(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,mg(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Em(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)nm(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ig(n,e),hy(n.localStore,e,!0)}),rm(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,mg(n,a)];case 5:return c.sent(),function(t){var e=tl(t);e.Co.forEach(function(t,n){rm(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ld(Il.comparator)}(n),n.Oo=!1,[4,Em(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function mg(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Uc.d)(this,function(y){switch(y.label){case 0:n=tl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,ly(n.localStore,bh(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,dg(n,d)]):[3,6];case 4:(f=y.sent()).snapshot&&i.push(f.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,fy(n.localStore,a)];case 8:return p=y.sent(),[4,ly(n.localStore,p)];case 9:return u=y.sent(),[4,Wm(n,gg(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function gg(t){return hh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vg(t){var e=tl(t);return tl(tl(e.localStore).persistence).fn()}function bg(t,e,n,r){return Object(Uc.b)(this,void 0,void 0,function(){var i,o,s;return Object(Uc.d)(this,function(a){switch(a.label){case 0:return(i=tl(t)).Oo?(Qc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,py(i.localStore)];case 3:return o=a.sent(),s=Td.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,cg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,hy(i.localStore,e,!0)];case 6:return a.sent(),ig(i,e,r),[3,8];case 7:Xc(),a.label=8;case 8:return[2]}})})}function _g(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Uc.d)(this,function(d){switch(d.label){case 0:if(!(r=wg(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Qc("SyncEngine","Adding an already active target "+s),[3,5]):[4,fy(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,ly(r.localStore,a)];case 3:return u=d.sent(),[4,Wm(r,gg(a),u.targetId,!1)];case 4:d.sent(),nm(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,hy(r.localStore,t,!1).then(function(){rm(r.remoteStore,t),ig(r,t)}).catch(Np)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function wg(t){var e=tl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$m.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xm.bind(null,e),e.vo._r=jm.bind(null,e.eventManager),e.vo.Mo=Rm.bind(null,e.eventManager),e}function Eg(t){var e=tl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tg.bind(null,e),e}var Cg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return this.R=Gy(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return ry(this.persistence,new ey,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ty(Iy.bs,this.R)},t.prototype.Bo=function(t){return new Ly},t.prototype.terminate=function(){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Sg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Uc.c)(e,t),e.prototype.initialize=function(e){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,yy(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Eg(this.Ko.syncEngine)];case 4:return n.sent(),[4,ym(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return ry(this.persistence,new ey,t.initialUser,this.R)},e.prototype.Uo=function(t){return new jp(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Zp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vp.withCacheSize(this.cacheSizeBytes):vp.DEFAULT;return new Qp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,zy(),Ky(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Ly},e}(Cg),Tg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Uc.c)(e,t),e.prototype.initialize=function(e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r=this;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof My?(this.sharedClientState.syncEngine={ui:pg.bind(null,n),ai:bg.bind(null,n),hi:_g.bind(null,n),fn:vg.bind(null,n),ci:fg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Uc.b)(r,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return[4,yg(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=zy();if(!My.yt(e))throw new Kc(zc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Zp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new My(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Sg),Og=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n=this;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Zm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=lg.bind(null,this.syncEngine),[4,Em(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Nm},t.prototype.createDatastore=function(t){var e=Gy(t.databaseInfo.databaseId),n=new Hy(t.databaseInfo);return function(t,e,n){return new Zy(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Zm(s.syncEngine,t,0)},o=qy.yt()?new qy:new Vy,new Jy(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Km(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Uc.b)(this,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return e=tl(t),Qc("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,em(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Ig=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),xg=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Mf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Lm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Uc.b)(this,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n=this;return Object(Uc.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Kc(zc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Uc.d)(this,function(u){switch(u.label){case 0:return n=tl(t),r=Wd(n.R)+"/documents",i={documents:e.map(function(t){return Hd(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Jc(!!e.found);var n=zd(t,e.found.name),r=qd(e.found.updateTime),i=new Bl({mapValue:{fields:e.found.fields}});return Hl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Jc(!!e.missing),Jc(!!e.readTime);var n=zd(t,e.missing),r=qd(e.readTime);return Hl.newNoDocument(n,r)}(t,e):Xc()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Jc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new od(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Uc.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Il.fromPath(n);e.mutations.push(new sd(r,e.precondition(r)))}),[4,function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return n=tl(t),r=Wd(n.R)+"/documents",i={writes:e.map(function(t){return Zd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Xc();e=al.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Kc(zc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?zh.updateTime(e):zh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(al.min()))throw new Kc(zc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zh.updateTime(e)}return zh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),kg=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Wy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Uc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Uc.d)(this,function(r){return t=new xg(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Sl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ud(e)}return!1},t}(),Ag=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=xy.UNAUTHENTICATED,this.clientId=nl.u(),this.credentialListener=function(){},this.receivedInitialUser=new Mf,this.credentials.setChangeListener(function(t){Qc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Kc(zc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Mf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Uc.b)(t,void 0,void 0,function(){var t,n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Om(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Ng(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Qc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Uc.b)(i,void 0,void 0,function(){return Object(Uc.d)(this,function(t){switch(t.label){case 0:return[4,iy(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Dg(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Pg(t)];case 1:return n=i.sent(),Qc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Uc.b)(this,void 0,void 0,function(){var n,r;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return(n=tl(t)).asyncQueue.verifyOperationInProgress(),Qc("RemoteStore","RemoteStore received new credentials"),r=um(n),n.$r.add(3),[4,em(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,tm(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Pg(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Qc("FirestoreClient","Using default OfflineComponentProvider"),[4,Ng(t,new Cg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function jg(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Qc("FirestoreClient","Using default OnlineComponentProvider"),[4,Dg(t,new Og)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Rg(t){return Pg(t).then(function(t){return t.persistence})}function Fg(t){return Pg(t).then(function(t){return t.localStore})}function Mg(t){return jg(t).then(function(t){return t.remoteStore})}function Lg(t){return jg(t).then(function(t){return t.syncEngine})}function Vg(t){return Object(Uc.b)(this,void 0,void 0,function(){var e,n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return[4,jg(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Gm.bind(null,e.syncEngine),n.onUnlisten=Qm.bind(null,e.syncEngine),n)]}})})}function qg(t,e,n){var r=this;void 0===n&&(n={});var i=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(r,void 0,void 0,function(){var r;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ig({next:function(o){e.enqueueAndForget(function(){return Pm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Kc(zc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Kc(zc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Mm(dh(n.path),o,{includeMetadataChanges:!0,so:!0});return Dm(t,s)},[4,Vg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Bg(t,e,n){var r=this;void 0===n&&(n={});var i=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(r,void 0,void 0,function(){var r;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ig({next:function(n){e.enqueueAndForget(function(){return Pm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Kc(zc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Mm(n,o,{includeMetadataChanges:!0,so:!0});return Dm(t,s)},[4,Vg(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Ug=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Hg=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),zg=new Map,Kg=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Gg=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(xy.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Wg=function(){function t(t){var e=this;this.oc=null,this.currentUser=xy.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Qc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Jc("string"==typeof n.accessToken),new Kg(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Jc(null===t||"string"==typeof t),new xy(t)},t}(),Qg=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=xy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Yg=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Qg(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(xy.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function $g(t,e,n){if(!n)throw new Kc(zc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Kc(zc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Xg(t,e,n,r){if(!0===e&&!0===r)throw new Kc(zc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Jg(t){if(!Il.isDocumentKey(t))throw new Kc(zc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function tv(t){if(Il.isDocumentKey(t))throw new Kc(zc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ev(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Xc()}function nv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Kc(zc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ev(t);throw new Kc(zc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function rv(t,e){if(e<=0)throw new Kc(zc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var iv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Kc(zc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Kc(zc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Xg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ov=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new iv({}),this._settingsFrozen=!1,t instanceof Hg?(this._databaseId=t,this._credentials=new Gg):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Kc(zc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hg(t.options.projectId)}(t),this._credentials=new Wg(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Kc(zc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Kc(zc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Gg;switch(t.type){case"gapi":var e=t.client;return Jc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Yg(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Kc(zc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=zg.get(this))&&(Qc("ComponentProvider","Removing Datastore"),zg.delete(this),t.terminate()),Promise.resolve();var t},t}(),sv=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new uv(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),av=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,dh(r))||this)._path=r,i.type="collection",i}return Object(Uc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new sv(this.firestore,null,new Il(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(av);function cv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Vo.m)(t),$g("collection","path",e),t instanceof ov)return tv(n=dl.fromString.apply(dl,Object(Uc.f)([e],r))),new uv(t,null,n);if(!(t instanceof sv||t instanceof uv))throw new Kc(zc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tv(n=dl.fromString.apply(dl,Object(Uc.f)([t.path],r)).child(dl.fromString(e))),new uv(t.firestore,null,n)}function lv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Vo.m)(t),1===arguments.length&&(e=nl.u()),$g("doc","path",e),t instanceof ov)return Jg(n=dl.fromString.apply(dl,Object(Uc.f)([e],r))),new sv(t,null,new Il(n));if(!(t instanceof sv||t instanceof uv))throw new Kc(zc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Jg(n=t._path.child(dl.fromString.apply(dl,Object(Uc.f)([e],r)))),new sv(t.firestore,t instanceof uv?t._converter:null,new Il(n))}function hv(t,e){return t=Object(Vo.m)(t),e=Object(Vo.m)(e),(t instanceof sv||t instanceof uv)&&(e instanceof sv||e instanceof uv)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function dv(t,e){return t=Object(Vo.m)(t),e=Object(Vo.m)(e),t instanceof av&&e instanceof av&&t.firestore===e.firestore&&wh(t._query,e._query)&&t._converter===e._converter}var fv=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Wy(this,"async_queue_retry"),this.Ec=function(){var e=Ky();e&&Qc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ky();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Ky();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t,e=this;return Object(Uc.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Hf(t=n.sent()))throw t;return Qc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Yc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Tm.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Xc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Uc.b)(this,void 0,void 0,function(){var t;return Object(Uc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function pv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Mf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var yv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new fv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Uc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||gv(this),this._firestoreClient.terminate()},e}(ov);function mv(t){return t._firestoreClient||gv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ug(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Ag(t._credentials,t._queue,r)}function vv(t,e,n){var r=this,i=new Mf;return t.asyncQueue.enqueue(function(){return Object(Uc.b)(r,void 0,void 0,function(){var r;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ng(t,n)];case 1:return o.sent(),[4,Dg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===zc.FAILED_PRECONDITION||t.code===zc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function bv(t){if(t._initialized||t._terminated)throw new Kc(zc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var _v=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Kc(zc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),wv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ml.fromBase64String(e))}catch(e){throw new Kc(zc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ml.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ev=function(t){this._methodName=t},Cv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Kc(zc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Kc(zc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return rl(this._lat,t._lat)||rl(this._long,t._long)},t}(),Sv=/^__.*__$/,Tv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Jh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xh(t,this.data,e,this.fieldTransforms)},t}(),Ov=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Jh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Iv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xc()}}var xv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Qv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Iv(this.Dc)&&Sv.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),kv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Gy(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new xv({Dc:t,methodName:e,Lc:n,path:pl.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Av(t){var e=t._freezeSettings(),n=Gy(t._databaseId);return new kv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);zv("Data must be an object, but it was:",s,r);var a,u,c=Uv(r,s);if(o.merge)a=new yl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Kv(e,d[h],n);if(!s.contains(f))throw new Kc(zc.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Yv(l,f)||l.push(f)}a=new yl(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Tv(new Bl(c),a,u)}var Dv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ev);function Pv(t,e,n){return new xv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype._toFieldTransform=function(t){return new Uh(t.path,new jh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ev),Rv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Uc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Pv(this,t,!0),n=this.qc.map(function(t){return Bv(t,e)}),r=new Rh(n);return new Uh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ev),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Uc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Pv(this,t,!0),n=this.qc.map(function(t){return Bv(t,e)}),r=new Mh(n);return new Uh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ev),Mv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Uc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Vh(t.R,kh(t.R,this.Uc));return new Uh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ev);function Lv(t,e,n,r){var i=t.Bc(1,e,n);zv("Data must be an object, but it was:",i,r);var o=[],s=Bl.empty();cl(r,function(t,r){var a=Wv(e,t,n);r=Object(Vo.m)(r);var u=i.kc(a);if(r instanceof Dv)o.push(a);else{var c=Bv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new yl(o);return new Ov(s,a,i.fieldTransforms)}function Vv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Kv(e,r,n)],u=[i];if(o.length%2!=0)throw new Kc(zc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Kv(e,o[c])),u.push(o[c+1]);for(var l=[],h=Bl.empty(),d=a.length-1;d>=0;--d)if(!Yv(l,a[d])){var f=a[d],p=u[d];p=Object(Vo.m)(p);var y=s.kc(f);if(p instanceof Dv)l.push(f);else{var m=Bv(p,y);null!=m&&(l.push(f),h.set(f,m))}}var g=new yl(l);return new Ov(h,g,s.fieldTransforms)}function qv(t,e,n,r){return void 0===r&&(r=!1),Bv(n,t.Bc(r?4:3,e))}function Bv(t,e){if(Hv(t=Object(Vo.m)(t)))return zv("Unsupported field value:",e,t),Uv(t,e);if(t instanceof Ev)return function(t,e){if(!Iv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Bv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Vo.m)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sl.fromDate(t);return{timestampValue:Md(e.R,n)}}if(t instanceof sl)return n=new sl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Md(e.R,n)};if(t instanceof Cv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wv)return{bytesValue:Ld(e.R,t._byteString)};if(t instanceof sv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Bd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+ev(t))}(t,e)}function Uv(t,e){var n={};return ll(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(t,function(t,r){var i=Bv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Hv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sl||t instanceof Cv||t instanceof wv||t instanceof sv||t instanceof Ev)}function zv(t,e,n){if(!Hv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ev(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Kv(t,e,n){if((e=Object(Vo.m)(e))instanceof _v)return e._internalPath;if("string"==typeof e)return Wv(t,e);throw Qv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Gv=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(Gv)>=0)throw Qv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(_v.bind.apply(_v,Object(Uc.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Qv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Qv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Kc(zc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Yv(t,e){return t.some(function(t){return t.isEqual(e)})}var $v=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new sv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Xv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Zv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}($v);function Xv(t,e){return"string"==typeof e?Wv(t,e):e instanceof _v?e._internalPath:e._delegate._internalPath}var Jv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Uc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new eb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Xv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}($v),eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(tb),nb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Jv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new eb(n._firestore,n._userDataWriter,r.key,r,new Jv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kc(zc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new eb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Jv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new eb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Jv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:rb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function rb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xc()}}function ib(t,e){return t instanceof tb&&e instanceof tb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof nb&&e instanceof nb&&t._firestore===e._firestore&&dv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ob(t){if(ph(t)&&0===t.explicitOrderBy.length)throw new Kc(zc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sb=function(){};function ab(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ub=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Uc.c)(e,t),e.prototype._apply=function(t){var e=Av(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Kc(zc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){yb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(pb(r,t,l[c]));a={arrayValue:{values:u}}}else a=pb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||yb(s,o),a=qv(n,"where",s,"in"===o||"not-in"===o);var h=Yl.create(i,o,a);return function(t,e){if(e.g()){var n=mh(t);if(null!==n&&!n.isEqual(e.field))throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yh(t);null!==r&&mb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Kc(zc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new av(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(sb),cb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Uc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new sh(e,n);return function(t,e){if(null===yh(t)){var n=mh(t);null!==n&&mb(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new av(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new lh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(sb),lb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Uc.c)(e,t),e.prototype._apply=function(t){return new av(t.firestore,t._converter,_h(t._query,this.Gc,this.zc))},e}(sb),hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Uc.c)(e,t),e.prototype._apply=function(t){var e=fb(t,this.type,this.Hc,this.Jc);return new av(t.firestore,t._converter,function(t,e){return new lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(sb),db=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Uc.c)(e,t),e.prototype._apply=function(t){var e=fb(t,this.type,this.Hc,this.Jc);return new av(t.firestore,t._converter,function(t,e){return new lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(sb);function fb(t,e,n,r){if(n[0]=Object(Vo.m)(n[0]),n[0]instanceof $v)return function(t,e,n,r,i){if(!r)throw new Kc(zc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=vh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Rl(e,r.key));else{var c=r.data.field(u.field);if(wl(c))throw new Kc(zc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ih(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Av(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Kc(zc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!gh(t)&&-1!==c.indexOf("/"))throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(dl.fromString(c));if(!Il.isDocumentKey(l))throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Il(l);a.push(Rl(e,h))}else{var d=qv(n,r,c);a.push(d)}}return new ih(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function pb(t,e,n){if("string"==typeof(n=Object(Vo.m)(n))){if(""===n)throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gh(e)&&-1!==n.indexOf("/"))throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(dl.fromString(n));if(!Il.isDocumentKey(r))throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Rl(t,new Il(r))}if(n instanceof sv)return Rl(t,n._key);throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ev(n)+".")}function yb(t,e){if(!Array.isArray(t)||0===t.length)throw new Kc(zc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Kc(zc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function mb(t,e,n){if(!n.isEqual(e))throw new Kc(zc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var gb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),xl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(_l(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Xc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return cl(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Cv(bl(t.latitude),bl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=El(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Cl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=vl(t);return new sl(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=dl.fromString(t);Jc(ff(n));var r=new Hg(n.get(1),n.get(3)),i=new Il(n.popFirst(5));return r.isEqual(e)||Yc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function vb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Uc.c)(e,t),e.prototype.convertBytes=function(t){return new wv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sv(this.firestore,null,e)},e}(gb),_b=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Av(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=wb(t,this._firestore),i=vb(r._converter,e,n),o=Nv(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,zh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=wb(t,this._firestore);return o="string"==typeof(e=Object(Vo.m)(e))||e instanceof _v?Vv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Lv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,zh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=wb(t,this._firestore);return this._mutations=this._mutations.concat(new od(e._key,zh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Kc(zc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function wb(t,e){if((t=Object(Vo.m)(t)).firestore!==e)throw new Kc(zc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Uc.c)(e,t),e.prototype.convertBytes=function(t){return new wv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sv(this.firestore,null,e)},e}(gb);function Cb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=nv(t,sv);var o=nv(t.firestore,yv),s=Av(o);return Tb(o,[("string"==typeof(e=Object(Vo.m)(e))||e instanceof _v?Vv(s,"updateDoc",t._key,e,n,r):Lv(s,"updateDoc",t._key,e)).toMutation(t._key,zh.exists(!0))])}function Sb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Vo.m)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||pv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(pv(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof sv)c=nv(t.firestore,yv),l=dh(t._key.path),u={next:function(e){i[a]&&i[a](Ob(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=nv(t,av);c=nv(f.firestore,yv),l=f._query;var p=new Eb(c);u={next:function(t){i[a]&&i[a](new nb(c,p,f,t))},error:i[a+1],complete:i[a+2]},ob(t._query)}return function(t,e,n,r){var i=this,o=new Ig(r),s=new Mm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(i,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return e=Dm,[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(i,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return e=Pm,[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(mv(c),l,h,u)}function Tb(t,e){return function(t,e){var n=this,r=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(n,void 0,void 0,function(){var n;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return n=Ym,[4,Lg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(mv(t),e)}function Ob(t,e,n){var r=n.docs.get(e._key),i=new Eb(t);return new tb(t,i,e._key,r,new Jv(n.hasPendingWrites,n.fromCache),e._converter)}var Ib=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Uc.c)(e,t),e.prototype.get=function(e){var n=this,r=wb(e,this._firestore),i=new Eb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new tb(n._firestore,i,r._key,t._document,new Jv(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Av(t)}return t.prototype.get=function(t){var e=this,n=wb(t,this._firestore),r=new bb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Xc();var i=t[0];if(i.isFoundDocument())return new $v(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new $v(e._firestore,r,n._key,null,n._converter);throw Xc()})},t.prototype.set=function(t,e,n){var r=wb(t,this._firestore),i=vb(r._converter,e,n),o=Nv(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=wb(t,this._firestore);return o="string"==typeof(e=Object(Vo.m)(e))||e instanceof _v?Vv(this._dataReader,"Transaction.update",s._key,e,n,r):Lv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=wb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function xb(){if("undefined"==typeof Uint8Array)throw new Kc(zc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function kb(){if("undefined"==typeof atob)throw new Kc(zc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ab=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return kb(),new t(wv.fromBase64String(e))},t.fromUint8Array=function(e){return xb(),new t(wv.fromUint8Array(e))},t.prototype.toBase64=function(){return kb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return xb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Nb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){bv(t=nv(t,yv));var n=mv(t),r=t._freezeSettings(),i=new Og;return vv(n,i,new Sg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){bv(t=nv(t,yv));var e=mv(t),n=t._freezeSettings(),r=new Og;return vv(e,r,new Tg(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Kc(zc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Mf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Uc.b)(e,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Uc.b)(this,void 0,void 0,function(){return Object(Uc.d)(this,function(e){switch(e.label){case 0:return qf.yt()?[4,qf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Zp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Db=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Hg||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=nv(t,ov))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&$c("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Uc.b)(e,void 0,void 0,function(){var e,n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return[4,Rg(t)];case 1:return e=r.sent(),[4,Mg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=tl(t);return e.$r.delete(0),tm(e)}(n))]}})})})}(mv(nv(this._delegate,yv)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Uc.b)(e,void 0,void 0,function(){var e,n;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return[4,Rg(t)];case 1:return e=r.sent(),[4,Mg(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Uc.b)(this,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return(e=tl(t)).$r.add(0),[4,em(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(mv(nv(this._delegate,yv)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Xg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(e,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(r){switch(r.label){case 0:return e=eg,[4,Lg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(mv(nv(this._delegate,yv)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ig(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(n,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){tl(t).Gr.add(e),e.next()},[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(n,void 0,void 0,function(){var e;return Object(Uc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){tl(t).Gr.delete(e)},[4,Vg(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(mv(t=nv(t,yv)),pv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Kc(zc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Gb(this,cv(this._delegate,t))}catch(t){throw Lb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Mb(this,lv(this._delegate,t))}catch(t){throw Lb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Hb(this,function(t,e){if(t=nv(t,ov),$g("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Kc(zc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new av(t,null,function(t){return new lh(dl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Lb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(n,void 0,void 0,function(){var n;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return jg(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new kg(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(mv(t),function(n){return e(new Ib(t,n))})}(this._delegate,function(n){return t(new jb(e,n))})},t.prototype.batch=function(){var t=this;return mv(this._delegate),new Rb(new _b(this._delegate,function(e){return Tb(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Kc(zc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Kc(zc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Pb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Uc.c)(e,t),e.prototype.convertBytes=function(t){return new Ab(new wv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Mb.Zc(e,this.firestore,null)},e}(gb),jb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Pb(t)}return t.prototype.get=function(t){var e=this,n=Wb(t);return this._delegate.get(n).then(function(t){return new Bb(e._firestore,new tb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Wb(t);return n?(Zg("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Uc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Wb(t);return this._delegate.delete(e),this},t}(),Rb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Wb(t);return n?(Zg("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Uc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Wb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Fb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new eb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ub(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Pb(e),n),i.set(n,o)),o},t}();Fb.eu=new WeakMap;var Mb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Pb(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Kc(zc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new sv(n._delegate,r,new Il(e)))},t.Zc=function(e,n,r){return new t(n,new sv(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Gb(this.firestore,cv(this._delegate,t))}catch(t){throw Lb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Vo.m)(t))instanceof sv&&hv(this._delegate,t)},t.prototype.set=function(t,e){e=Zg("DocumentReference.set",e);try{return function(t,e,n){t=nv(t,sv);var r=nv(t.firestore,yv),i=vb(t._converter,e,n);return Tb(r,[Nv(Av(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,zh.none())])}(this._delegate,t,e)}catch(t){throw Lb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Cb(this._delegate,t):Cb.apply(void 0,Object(Uc.f)([this._delegate,t,e],n))}catch(t){throw Lb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Tb(nv((t=this._delegate).firestore,yv),[new od(t._key,zh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vb(e),i=qb(e,function(e){return new Bb(t.firestore,new tb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Sb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nv(t,sv);var e=nv(t.firestore,yv),n=mv(e),r=new Eb(e);return function(t,e){var n=this,r=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(n,void 0,void 0,function(){var n;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i;return Object(Uc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=tl(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Kc(zc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Om(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Fg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new tb(e,r,t._key,n,new Jv(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nv(t,sv);var e=nv(t.firestore,yv);return qg(mv(e),t._key,{source:"server"}).then(function(n){return Ob(e,t,n)})}(this._delegate):function(t){t=nv(t,sv);var e=nv(t.firestore,yv);return qg(mv(e),t._key).then(function(n){return Ob(e,t,n)})}(this._delegate)).then(function(t){return new Bb(e.firestore,new tb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Fb.tu(this.firestore,e):null))},t}();function Lb(t,e,n){return t.message=t.message.replace(e,n),t}function Vb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!pv(r))return r}return{}}function qb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=pv(t[0])?t[0]:pv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Bb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Mb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return ib(this._delegate,t._delegate)},t}(),Ub=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Uc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Bb),Hb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Pb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ab(this._delegate,function(t,e,n){var r=e,i=Xv("where",t);return new ub(i,r,n)}(e,n,r)))}catch(e){throw Lb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ab(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Xv("orderBy",t);return new cb(r,n)}(e,n)))}catch(e){throw Lb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ab(this._delegate,function(t){return rv("limit",t),new lb("limit",t,"F")}(e)))}catch(e){throw Lb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ab(this._delegate,function(t){return rv("limitToLast",t),new lb("limitToLast",t,"L")}(e)))}catch(e){throw Lb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hb("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Lb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hb("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Lb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new db("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Lb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ab(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new db("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Lb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return dv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=nv(t,av);var e=nv(t.firestore,yv),n=mv(e),r=new Eb(e);return function(t,e){var n=this,r=new Mf;return t.asyncQueue.enqueueAndForget(function(){return Object(Uc.b)(n,void 0,void 0,function(){var n;return Object(Uc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Uc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Uc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,dy(t,e,!0)];case 1:return a=u.sent(),r=new Um(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Om(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Fg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new nb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=nv(t,av);var e=nv(t.firestore,yv),n=mv(e),r=new Eb(e);return Bg(n,t._query,{source:"server"}).then(function(n){return new nb(e,r,t,n)})}(this._delegate):function(t){t=nv(t,av);var e=nv(t.firestore,yv),n=mv(e),r=new Eb(e);return ob(t._query),Bg(n,t._query).then(function(n){return new nb(e,r,t,n)})}(this._delegate)).then(function(t){return new Kb(e.firestore,new nb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vb(e),i=qb(e,function(e){return new Kb(t.firestore,new nb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Sb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Fb.tu(this.firestore,e):null))},t}(),zb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Ub(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Kb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Hb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Ub(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new zb(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Ub(n._firestore,r))})},t.prototype.isEqual=function(t){return ib(this._delegate,t._delegate)},t}(),Gb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Uc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Mb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Mb(this.firestore,void 0===t?lv(this._delegate):lv(this._delegate,t))}catch(t){throw Lb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=nv(t.firestore,yv),r=lv(t),i=vb(t._converter,e);return Tb(n,[Nv(Av(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,zh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Mb(e.firestore,t)})},e.prototype.isEqual=function(t){return hv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Fb.tu(this.firestore,t):null))},e}(Hb);function Wb(t){return nv(t,sv)}var Qb,Yb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(_v.bind.apply(_v,Object(Uc.f)([void 0],t)))}return t.documentId=function(){return new t(pl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Vo.m)(t))instanceof _v&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),$b=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new jv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Dv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Mv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Zb=n("/6Yf"),Xb={Firestore:Db,GeoPoint:Cv,Timestamp:sl,Blob:Ab,Transaction:jb,WriteBatch:Rb,DocumentReference:Mb,DocumentSnapshot:Bb,Query:Hb,QueryDocumentSnapshot:Ub,QuerySnapshot:Kb,CollectionReference:Gb,FieldPath:Yb,FieldValue:$b,setLogLevel:function(t){Gc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Zb.a("firestore",function(t){return function(t,e){return new Db(t,new yv(t,e),new Nb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Xb)))})(Qb=Lo.a),Qb.registerVersion("@firebase/firestore","2.2.5");var Jb=n("VRyK"),t_=n("zx2A");function e_(t,e){return"function"==typeof e?n=>n.pipe(e_((n,r)=>Object(Y.a)(t(n,r)).pipe(Object(X.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new n_(t))}class n_{constructor(t){this.project=t}call(t,e){return e.subscribe(new r_(t,this.project))}}class r_ extends t_.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new t_.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(t_.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var i_=n("qgXg"),o_=n("9ppp"),s_=n("Ylt2");class a_ extends he.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new u_(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new o_.a;if(this.isStopped||this.hasError?o=Di.a.EMPTY:(this.observers.push(t),o=new s_.a(this,t)),r&&t.add(t=new Ro.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||i_.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class u_{constructor(t,e){this.time=t,this.value=e}}function c_(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new a_(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const l_=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function h_(t=null){return e=>e.lift(new d_(t))}class d_{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new f_(t,this.defaultValue))}}class f_ extends ji.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function p_(t=g_){return e=>e.lift(new y_(t))}class y_{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new m_(t,this.errorFactory))}}class m_ extends ji.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Qb){t=Qb}this.destination.error(t)}}}function g_(){return new l_}var v_=n("SpAZ");function b_(t,e){return e?e_(()=>t,e):e_(()=>t)}var __=n("tf+s");const w_=new r.m("angularfire2.auth.use-emulator"),E_=new r.m("angularfire2.auth.settings"),C_=new r.m("angularfire2.auth.tenant-id"),S_=new r.m("angularfire2.auth.langugage-code"),T_=new r.m("angularfire2.auth.use-device-language"),O_=new r.m("angularfire.auth.persistence");let I_=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Fo.d(i),d=Object(Fo.h)(h),f=new he.a,p=Object(Pi.a)(void 0).pipe(Object(Ro.b)(h.outsideAngular),e_(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(X.a)(()=>Object(Fo.g)(t,i,e)),Object(X.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Fo.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),c_({bufferSize:1,refCount:!1}));if(b(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Pi.a)(null);else{p.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Fi((e,n)=>t(e,n,r)):v_.a,Bi(1),n?h_(e):p_(()=>new l_))}()).subscribe();const t=p.pipe(e_(t=>t.getRedirectResult().then(t=>t,()=>null)),d,c_({bufferSize:1,refCount:!1})),e=t=>new $.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(e_(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(e_(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(b_(n),Object(__.a)(h.outsideAngular),Object(Ro.b)(h.insideAngular)),this.user=t.pipe(b_(r),Object(__.a)(h.outsideAngular),Object(Ro.b)(h.insideAngular)),this.idToken=this.user.pipe(e_(t=>t?Object(Y.a)(t.getIdToken()):Object(Pi.a)(null))),this.idTokenResult=this.user.pipe(e_(t=>t?Object(Y.a)(t.getIdTokenResult()):Object(Pi.a)(null))),this.credential=Object(Jb.a)(t,f,this.authState.pipe(Fi(t=>!t))).pipe(Object(X.a)(t=>(null==t?void 0:t.user)?t:null),Object(__.a)(h.outsideAngular),Object(Ro.b)(h.insideAngular))}return Object(Fo.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Fo.c),r.Kb(Fo.b,8),r.Kb(r.v),r.Kb(r.t),r.Kb(w_,8),r.Kb(E_,8),r.Kb(C_,8),r.Kb(S_,8),r.Kb(T_,8),r.Kb(O_,8))},t.\u0275prov=Object(r.xb)({factory:function(){return new t(Object(r.Kb)(Fo.c),Object(r.Kb)(Fo.b,8),Object(r.Kb)(r.v),Object(r.Kb)(r.t),Object(r.Kb)(w_,8),Object(r.Kb)(E_,8),Object(r.Kb)(C_,8),Object(r.Kb)(S_,8),Object(r.Kb)(T_,8),Object(r.Kb)(O_,8))},token:t,providedIn:"any"}),t})();function x_(t,e){return function(t,e=Ri.b){return new $.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function k_(t,e){return x_(t,e).pipe(Object(X.a)(t=>({payload:t,type:"query"})))}function A_(t,e){return k_(t,e).pipe(no(void 0),Oo(),Object(X.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function N_(t,e,n){return A_(t,n).pipe(ko((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return D_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return D_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return D_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Do(),Object(X.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function D_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function P_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Fo.e)(I_,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class j_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=A_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(X.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(no(void 0),Oo(),Fi(([t,e])=>e.length>0||!t),Object(X.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ko((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=P_(t);return N_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return k_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(X.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Y.a)(this.query.get(t)).pipe(Object(Ro.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new R_(this.ref.doc(t),this.afs)}}class R_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=B_(n,e);return new j_(r,i,this.afs)}snapshotChanges(){return x_(this.ref,this.afs.schedulers.outsideAngular).pipe(no(void 0),Oo(),Object(X.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(X.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Y.a)(this.ref.get(t)).pipe(Object(Ro.b)(this.afs.schedulers.insideAngular))}}class F_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?A_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(X.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Fi(t=>t.length>0),this.afs.keepUnstableUntilFirst):A_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ko((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=P_(t);return N_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return k_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(X.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Y.a)(this.query.get(t)).pipe(Object(Ro.b)(this.afs.schedulers.insideAngular))}}const M_=new r.m("angularfire2.enableFirestorePersistence"),L_=new r.m("angularfire2.firestore.persistenceSettings"),V_=new r.m("angularfire2.firestore.settings"),q_=new r.m("angularfire2.firestore.use-emulator");function B_(t,e=(t=>t)){return{query:e(t),ref:t}}let U_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Fo.d(o),this.keepUnstableUntilFirst=Object(Fo.h)(this.schedulers);const c=Object(Fo.g)(t,o,e);!Mo.a.auth&&u&&Object(Fo.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Fo.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!b(i)){const e=()=>{try{return Object(Y.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Qb){return"undefined"!=typeof console&&console.warn(Qb),Object(Pi.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Pi.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=B_(n,e),o=this.schedulers.ngZone.run(()=>r);return new j_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new F_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new R_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Fo.c),r.Kb(Fo.b,8),r.Kb(M_,8),r.Kb(V_,8),r.Kb(r.v),r.Kb(r.t),r.Kb(L_,8),r.Kb(q_,8),r.Kb(w_,8))},t.\u0275prov=Object(r.xb)({factory:function(){return new t(Object(r.Kb)(Fo.c),Object(r.Kb)(Fo.b,8),Object(r.Kb)(M_,8),Object(r.Kb)(V_,8),Object(r.Kb)(r.v),Object(r.Kb)(r.t),Object(r.Kb)(L_,8),Object(r.Kb)(q_,8),Object(r.Kb)(w_,8))},token:t,providedIn:"any"}),t})(),H_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:M_,useValue:!0},{provide:L_,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({providers:[U_]}),t})();const z_={apiKey:"AIzaSyC9FCs9lBYaN8cb-_HD-fZ2WkJ1ANmneFI",authDomain:"formdataqr.firebaseapp.com",projectId:"formdataqr",storageBucket:"formdataqr.appspot.com",messagingSenderId:"761801446757",appId:"1:761801446757:web:35fe32aa72b4a5c950fd8c",measurementId:"G-JK3QKNZD31"};var K_=n("w1tV");class G_ extends ji.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class W_ extends ji.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Q_=n("SeVD");function Y_(t,e,n,r,i=new W_(t,n,r)){if(!i.closed)return e instanceof $.a?e.subscribe(i):Object(Q_.a)(e)(i)}class $_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Z_(t,this.observables,this.project))}}class Z_ extends G_{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Y_(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class X_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new J_(t,this.predicate))}}class J_ extends ji.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function tw(t){return null==t}function ew(t){return"function"==typeof t.set}function nw(t,e){return ew(e)?e:t.ref(e)}function rw(t,e){if("string"==typeof t)return e.stringCase();if(ew(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function iw(t,e,n="on",r=Ri.b){return new $.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(X.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(K_.a)())}function ow(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function sw(t,e){const{payload:n,prevKey:r,key:i}=e,o=ow(t,i),s=function(t,e){if(tw(e))return 0;{const n=ow(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function aw(t){return(tw(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function uw(t,e,n){return function(t,e,n){return iw(t,"value","once",n).pipe(e_(r=>{const i=[Object(Pi.a)(r)];return e.forEach(e=>i.push(iw(t,e,"on",n))),Object(Jb.a)(...i).pipe(ko(sw,[]))}),Do())}(t,e=aw(e),n)}function cw(t,e,n){const r=(e=aw(e)).map(e=>iw(t,e,"on",n));return Object(Jb.a)(...r)}function lw(t,e){return function(n,r){return rw(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function hw(t,e){return function(){return iw(t,"value","on",e)}}n("6Uf2");const dw=new r.m("angularfire2.realtimeDatabaseURL"),fw=new r.m("angularfire2.database.use-emulator");let pw=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Fo.d(i),this.keepUnstableUntilFirst=Object(Fo.h)(this.schedulers);const a=o,u=Object(Fo.g)(t,i,e);!Mo.a.auth&&s&&Object(Fo.j)(),this.database=Object(Fo.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>nw(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:lw(r,"update"),set:lw(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?rw(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>uw(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>cw(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return iw(t,"value","on",e).pipe(Object(X.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new $_(t,n))}}(e),Object(X.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new X_(r))),Object(X.a)(t=>t.actions));var r}(t,cw(t,e).pipe(ko((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>uw(t,r,n).pipe(Object(X.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>nw(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>hw(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>hw(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(X.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Fo.c),r.Kb(Fo.b,8),r.Kb(dw,8),r.Kb(r.v),r.Kb(r.t),r.Kb(fw,8),r.Kb(w_,8))},t.\u0275prov=Object(r.xb)({factory:function(){return new t(Object(r.Kb)(Fo.c),Object(r.Kb)(Fo.b,8),Object(r.Kb)(dw,8),Object(r.Kb)(r.v),Object(r.Kb)(r.t),Object(r.Kb)(fw,8),Object(r.Kb)(w_,8))},token:t,providedIn:"any"}),t})(),yw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({providers:[pw]}),t})(),mw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t}),t.\u0275inj=r.yb({imports:[[ao,so],so]}),t})(),gw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.zb({type:t,bootstrap:[To]}),t.\u0275inj=r.yb({providers:[$e],imports:[[Q,Ye,ce,ue,Fo.a.initializeApp(z_),H_,yw,Ni,mw,yo]]}),t})();Object(r.K)(),G().bootstrapModule(gw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);